/**
*   CanvasLite
*   an html canvas implementation in pure JavaScript
*
*   @version 0.9.92 (2023-07-30 12:08:20)
*   https://github.com/foo123/CanvasLite
*
**/!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"CanvasLite",function(t){"use strict";var n="prototype",P=Object.defineProperty,c=Object[n].hasOwnProperty,r=Object[n].toString,u="undefined"!=typeof global&&"[object global]"===r.call(global),i="undefined"!=typeof window&&"[object Window]"===r.call(window),W=Math,U=1/0,f=W.sqrt(2),A=isNaN,Z=isFinite,d=W.PI,x=2*d,p=d/2,m=6,g=f,v=.5,D="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array,z=[0,0,0,0],B=/[MLHVCSQTAZ]/gi,L=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g;function F(n,e,t,r){var a;if(!(this instanceof F))return new F(n,e,t,r);r=r||(t&&t.$target?F.getRGBAFrom(t.$target):function(n,e){return z}),a=new q(n,e,t,r),P(this,"width",{get:function(){return n},set:function(n){}}),P(this,"height",{get:function(){return e},set:function(n){}}),this.getContext=function(n){if("2d"===n)return a;H('Unsupported context "'+n+'"')}}function q(S,B,m,d){var o,i,e,t,g,v,r,a,l,u,s,c,f,h,p,C,y=this,w=null,b=null,x=function(){w={}},k=function(n){for(var e in w){var t=w[e],e=e.split(",");n(+e[0],+e[1],t)}w=null},L=function(n,e,t){var r;0<=n&&n<S&&0<=e&&e<B&&0<t&&0<h&&(n=String(n)+","+String(e),e=w[n]||0,r=b?b[n]||0:1,e<(t*=h*r))&&(w[n]=t)},T=function(n,e,t){var r="clear"===p?z:o(n,e),a=3<r.length?r[3]:1;m(n,e,r[0],r[1],r[2],a*t,p)},I=function(n,e,t){var r="clear"===p?z:i(n,e),a=3<r.length?r[3]:1;m(n,e,r[0],r[1],r[2],a*t,p)},n=function(n){o=F.getRGBAFrom([0,0,0,1]),i=F.getRGBAFrom([0,0,0,1]),b=w=null,r="butt",a="miter",l=10,u=1,s=[],c=0,f=G.EYE(),h=1,p="source-over",e=[],C=new E(f),n||y.clearRect(0,0,S,B)};P(y,"strokeStyle",{get:function(){return""},set:function(n){o=n instanceof V||n instanceof Q?n.getColorAt.bind(n):F.getRGBAFrom((n.substr&&n.split?In(n):n)||z)}}),P(y,"fillStyle",{get:function(){return""},set:function(n){i=n instanceof V||n instanceof Q?n.getColorAt.bind(n):F.getRGBAFrom((n.substr&&n.split?In(n):n)||z)}}),P(y,"lineWidth",{get:function(){return u},set:function(n){!A(n=+n)&&Z(n)&&0<n&&(u=n)}}),P(y,"lineCap",{get:function(){return r},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(r=n)}}),P(y,"lineJoin",{get:function(){return a},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(a=n)}}),P(y,"miterLimit",{get:function(){return l},set:function(n){!A(n=+n)&&Z(n)&&0<=n&&(l=n)}}),P(y,"lineDashOffset",{get:function(){return c},set:function(n){!A(n=+n)&&Z(n)&&(c=n)}}),P(y,"lineDash",{get:function(){return s.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),s=n}}),y.getLineDash=function(){return y.lineDash},y.setLineDash=function(n){y.lineDash=n},P(y,"globalAlpha",{get:function(){return h},set:function(n){!A(n=+n)&&0<=n&&n<=1&&(h=n)}}),P(y,"globalCompositeOperation",{get:function(){return p},set:function(n){p=String(n)}}),y.save=function(){(e=e||[]).push([o,i,b,r,a,l,u,s,c,f,h,p])},y.restore=function(){var n;e&&e.length&&(n=e.pop(),o=n[0],i=n[1],b=n[2],r=n[3],a=n[4],l=n[5],u=n[6],s=n[7],c=n[8],C.transform=f=n[9],h=n[10],p=n[11])},y.reset=function(){n()},y.scale=function(n,e){C.transform=f=f.mul(G.scale(n,e))},y.rotate=function(n){C.transform=f=f.mul(G.rotate(n||0))},y.translate=function(n,e){C.transform=f=f.mul(G.translate(n||0,e||0))},y.transform=function(n,e,t,r,a,o){C.transform=f=f.mul(new G(n,t,a,e,r,o))},y.getTransform=function(){return f.clone()},y.setTransform=function(n,e,t,r,a,o){1<arguments.length?f=new G(n,t,a,e,r,o):n&&null!=n.a&&null!=n.f&&(f=new G(n.a,n.c,n.e,n.b,n.d,n.f)),C.transform=f},y.resetTransform=function(){C.transform=f=G.EYE()},y.beginPath=function(){C=new E(f)},y.closePath=function(){C.closePath()},y.moveTo=function(n,e){C.moveTo(n,e)},y.lineTo=function(n,e){C.lineTo(n,e)},y.rect=function(n,e,t,r){C.rect(n,e,t,r)},y.roundRect=function(n,e,t,r){C.roundRect.apply(C,arguments)},y.arc=function(n,e,t,r,a,o){C.arc(n,e,t,r,a,o)},y.ellipse=function(n,e,t,r,a,o,i,l){C.ellipse(n,e,t,r,a,o,i,l)},y.arcTo=function(n,e,t,r,a){C.arcTo(n,e,t,r,a)},y.quadraticCurveTo=function(n,e,t,r){C.quadraticCurveTo(n,e,t,r)},y.bezierCurveTo=function(n,e,t,r,a,o){C.bezierCurveTo(n,e,t,r,a,o)},y.clearRect=function(n,e,t,r){var a=p,o=h;p="clear",h=1,y.fill(new E(f).rect(n,e,t,r),"evenodd"),p=a,h=o},y.strokeRect=function(n,e,t,r){0<u&&y.stroke(new E(f).rect(n,e,t,r))},y.fillRect=function(n,e,t,r){y.fill(new E(f).rect(n,e,t,r),"evenodd")},y.stroke=function(n){var e,t;0<u&&(t=(n=n||C).transform,e=W.abs(t.sx),t=W.abs(t.sy),x(),ln(L,n,u,0,0,r,a,l,e,t,0,0,S-1,B-1),k(T))},t=function(n,e){var t=S-1,r=B-1,a=(ln(L,n,.5,0,0,"butt","bevel",0,1,1,0,0,t,r),L),o=0,i=0,l=t,t=r,u=n._sd;if(u.length){var s,c,f,h,d,p,m,g,v,y,w,b,x,k,C=u.length,T=new Array(C),I=u.ymin,P=u.ymax,A=0,D="evenodd"===e;for(I=W.max(i,W.round(I)),P=W.min(t,W.round(P));I<=P;++I){for(;A<C&&u[A][3]<I;)++A;if(C<=A)break;if((f=u[A])[1]>I)I=W.floor(f[1]);else{for(y=f[0],w=f[2],d=f[1],p=f[3],v=Y(d,p)?(b=!1,g=W.min(y,w),W.max(y,w)):g=b=(w-y)*(I-d)/(p-d)+y,f[8]=b,f[9]=0,T[0]=f,s=A+(c=1);s<C&&u[s][1]<=I;++s)(f=u[s])[3]>=I&&(y=f[0],w=f[2],d=f[1],p=f[3],v=Y(d,p)?(b=!1,g=W.min(g,y,w),W.max(v,y,w)):(b=(w-y)*(I-d)/(p-d)+y,g=W.min(g,b),W.max(v,b)),f[8]=b,f[9]=0,T[c++]=f);if(h=sn(T,c),!(c<h+2||(g=W.max(o,W.round(g+.5)),(v=W.min(l,W.round(v-.5)))<g)))if(D)for(m=g;m<=v;++m){for(k=x=!1,s=0;s<c;++s)(f=T[s])[9]||!1!==(b=f[8])&&(b<m&&(x=!x),m<b)&&(k=!k);x&&k&&a(m,I,1)}else for(m=g;m<=v;++m){for(s=k=x=0;s<c;++s)(f=T[s])[9]||!1!==(b=f[8])&&(b<m||m<b)&&(h=cn(m,I,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),b<m&&(x+=h),m<b)&&(k+=h);x&&k&&a(m,I,1)}}}}},y.fill=function(n,e){!arguments.length||null==n&&null==e?(n=C,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof E?e="nonzero":(e=n,n=C)),e=String(e||"nonzero").toLowerCase(),x(),t(n=n||C,e="evenodd"!==e?"nonzero":e),k(I)},y.clip=function(n,e){!arguments.length||null==n&&null==e?(n=C,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof E?e="nonzero":(e=n,n=C)),"evenodd"!==(e=String(e||"nonzero").toLowerCase())&&(e="nonzero"),(n=n||C)===C&&(C=new E(f)),x(),t(n,e),b=w,w=null},y.isPointInStroke=function(n,e,t){arguments.length<3&&(t=e,e=n,n=C);var r,a,o,i,l,u,s,c=e||0,f=t||0,e=n||C,h=e._d,d=h.length;for(r=0;r<d;++r)if(o=h[r],0<(i=o.length-2))for(a=0;a<i;a+=2)if(l=+o[a],u=o[a+1],s=+o[a+2],N((o[a+3]-u)*(c-l),(f-u)*(s-l),1e-4))return!0;return!1},y.isPointInPath=function(n,e,t,r){n instanceof E||(r=t,t=e,e=n,n=C),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var a=e||0,o=t||0,e=r,i=(t=n||C)._sd;if(!(!i.length||o<i.ymin||o>i.ymax)){for(var l,u,s,c,f,h,d,p,m,g,v,y,w,b=i.length,x=new Array(b),k=0,t="evenodd"===e;k<b&&i[k][3]<o;)++k;if(!(b<=k||(s=i[k])[1]>o)){for(m=s[0],g=s[2],f=s[1],h=s[3],p=Y(f,h)?(v=!1,d=W.min(m,g),W.max(m,g)):d=v=(g-m)*(o-f)/(h-f)+m,s[8]=v,s[9]=0,x[0]=s,l=k+(u=1);l<b&&i[l][1]<=o;++l)(s=i[l])[3]>=o&&(m=s[0],g=s[2],f=s[1],h=s[3],p=Y(f,h)?(v=!1,d=W.min(d,m,g),W.max(p,m,g)):(v=(g-m)*(o-f)/(h-f)+m,d=W.min(d,v),W.max(p,v)),s[8]=v,s[9]=0,x[u++]=s);if(c=sn(x,u),u<c+2)return!1!==x[0][8]&&N(a,x[0][8]);if(!(p<d||a<d||p<a)){if(t)for(w=y=!1,l=0;l<u;++l)(s=x[l])[9]||!1!==(v=s[8])&&(v<=a&&(y=!y),a<=v)&&(w=!w);else for(l=w=y=0;l<u;++l)(s=x[l])[9]||!1!==(v=s[8])&&(v<a||a<v)&&(c=cn(a,o,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),v<=a&&(y+=c),a<=v)&&(w+=c);if(y&&w)return!0}}}return!1},g=function(n,e,t,r,a,o,i){if(r=W.min(r,e-1),a=W.min(a,t-1),o=W.min(o,e-1),i=W.min(i,t-1),o<r||i<a)return new D(0);var l,u,s,c,f,h=new D((o-r+1)*(i-a+1)<<2);if(n)for(u=r,s=a,c=0;s<=i;c+=4,++u)o<u&&(u=r,++s),h[c]=n[f=s*e+u<<2],h[c+1]=n[1+f],h[c+2]=n[2+f],h[c+3]=n[3+f];else for(u=r,s=a,c=0;s<=i;c+=4,++u)o<u&&(u=r,++s),l=d(u,s),h[c]=J(l[0],0,255),h[c+1]=J(l[1],0,255),h[c+2]=J(l[2],0,255),h[c+3]=J(W.round(255*l[3]),0,255);return h},v=function(n,e,t,r,a,o,i,l,u,s,c,f){var h,d,p;for(i=W.min(i,a-1),l=W.min(l,o-1),c=W.min(c,e-1),f=W.min(f,t-1),u=W.min(u,a-1),s=W.min(s,o-1),c-=i,f-=l,d=i,p=l;p<=s;++d)u<d&&(d=i,++p),t<=p+f||e<=d+c||m(d+c,p+f,r[h=p*a+d<<2],r[1+h],r[2+h],r[3+h]/255,"copy")},y.drawImage=function(n,e,t,r,a,o,i,l,u){(n=n&&"function"==typeof n.getImageData?n.getImageData():n)&&n.data||H("Invalid image data in drawImage");var s=S,c=B,f=n.width,h=n.height,n=n.data,d=q.Interpolation.bilinear,p=arguments.length;f&&h||H("Invalid image data in drawImage"),e=e||0,t=t||0,3===p?v(0,s,c,n,f,h,0,0,f-1,h-1,o=e,i=t):5===p?(o=e,i=t,u=a,v(0,s,c,f===(l=r)&&h===u?n:d(n,f,h,l,u),l,u,0,0,l-1,u-1,o,i)):v(0,s,c,r===l&&a===u?g(n,f,h,e,t,e+r-1,t+a-1):d(g(n,f,h,e,t,e+r-1,t+a-1),r,a,l,u),l,u,0,0,l-1,u-1,o,i)},y.getImageData=function(n,e,t,r){var a=S,o=B;return null==e&&(e=0),null==r&&(r=o),n=W.max(0,W.min(n=null==n?0:n,(t=null==t?a:t)-1,a-1)),e=W.max(0,W.min(e,r-1,o-1)),t=W.min(n+t-1,t-1,a-1),r=W.min(e+r-1,r-1,o-1),{data:g(null,a,o,n,e,t,r),width:t-n+1,height:r-e+1}},y.putImageData=function(n,e,t){n&&n.data||H("Invalid image data in putImageData");var r=n.width,a=n.height;v(0,S,B,n.data,r,a,0,0,r-1,a-1,e=null==e?0:e,t=null==t?0:t)},n(!0)}function E(n,f){var e,c,t,h,d,p,m,g,v,y=this,s=!0,w=[],b=null;P(y,"transform",{get:function(){return f.clone()},set:function(n){f=n}}),P(y,"_d",{get:function(){return w},set:function(n){}}),P(y,"_sd",{get:function(){return b=b||un(w)},set:function(n){}}),y.moveTo=function(n,e){n=C([n,e],f);return n&&(w.push(n),s=!1),y},y.closePath=function(){var n,e,t,r,a,o;return w.length&&2<w[w.length-1].length&&(n=+w[w.length-1][0],e=w[w.length-1][1],t=+w[w.length-1][2],r=w[w.length-1][3],a=+w[w.length-1][w[w.length-1].length-2],o=w[w.length-1][w[w.length-1].length-1],N(n,a,1e-6)&&N(e,o,1e-6)?w[w.length-1][w[w.length-1].length-2]=new k(a,{join:[t,r]}):w[w.length-1].push(new k(n,{join:[t,r]}),e),w.push([n,e]),s=!1,b=null),y},y.lineTo=function(n,e){n=C([n,e],f);return n&&(s?(w.push(n),s=!1):(w[w.length-1].push(n[0],n[1]),b=null)),y},y.rect=function(n,e,t,r){t=C([n,e,n+t,e,n+t,e+r,n,e+r],f);return t?(t[0]=new k(+t[0],{lineCap:"butt",lineJoin:"miter"}),w.length&&w[w.length-1].length<=2?w[w.length-1]=t:w.push(t),b=null,y.closePath()):y},y.roundRect=function(n,e,t,r){var a,o,i,l,u,s,c=C([n,e,t,r]);return c?(((s=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<s.length)&&H("Invalid radii in roundRect"),4===s.length?(a=s[0],o=s[1],i=s[2],l=s[3]):3===s.length?(a=s[0],o=s[1],l=s[1],i=s[2]):l=2===s.length?(a=s[0],i=s[0],o=s[1],s[1]):(a=s[0],o=s[0],i=s[0],s[0]),t<0&&(n+=t,t=-t,u=a,a=o,o=u,u=l,l=i,i=u),r<0&&(e+=r,r=-r,u=a,a=l,l=u,u=o,o=i,i=u),(s=W.min(t/(a+o),r/(o+i),t/(i+l),r/(a+l)))<1&&(a*=s,o*=s,l*=s,i*=s),T(c=[],n+a,e,f),T(c,n+t-o,e,f),K(c,n+t-o,e,n+t,e,n+t,e+o,o,f),T(c,n+t,e+r-i,f),K(c,n+t,e+r-i,n+t,e+r,n+t-i,e+r,i,f),T(c,n+l,e+r,f),K(c,n+l,e+r,n,e+r,n,e+r-l,l,f),T(c,n,e+a,f),K(c,n,e+a,n,e,n+a,e,a,f),c[0]=new k(+c[0],{lineCap:"butt",lineJoin:"bevel"}),w.push(c),b=null,y.closePath()):y},y.arc=function(n,e,t,r,a,o){var i=C([n,e,t,r,a]);return i&&(t<0&&H("Negative radius in arc"),(i=rn(n,e,t,t,0,r,a,o,f))[0]=new k(+i[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),i[i.length-2]=new k(+i[i.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),s?(w.push(i),s=!1):w[w.length-1].push.apply(w[w.length-1],i),b=null),y},y.ellipse=function(n,e,t,r,a,o,i,l){var u=C([n,e,t,r,a,o,i]);return u&&((t<0||r<0)&&H("Negative radius in ellipse"),(u=rn(n,e,t,r,a,o,i,l,f))[0]=new k(+u[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),u[u.length-2]=new k(+u[u.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),s?(w.push(u),s=!1):w[w.length-1].push.apply(w[w.length-1],u),b=null),y},y.arcTo=function(n,e,t,r,a){n=C([n,e,t,r,a]);return n&&(a<0&&H("Negative radius in arcTo"),s&&(w.push(f.transform(n[0],n[1])),s=!1),(n=an((e=f.inv().transform(+w[w.length-1][w[w.length-1].length-2],w[w.length-1][w[w.length-1].length-1]))[0],e[1],n[0],n[1],n[2],n[3],a,f))[0]=new k(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),w[w.length-1].push.apply(w[w.length-1],n),b=null),y},y.quadraticCurveTo=function(n,e,t,r){n=C([n,e,t,r],f);return n&&(s&&(w.push([n[0],n[1]]),s=!1),e=w[w.length-1].pop(),(n=on([+w[w.length-1].pop(),e,n[0],n[1],n[2],n[3]],f))[0]=new k(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),w[w.length-1].push.apply(w[w.length-1],n),b=null),y},y.bezierCurveTo=function(n,e,t,r,a,o){n=C([n,e,t,r,a,o],f);return n&&(s&&(w.push([n[0],n[1]]),s=!1),e=w[w.length-1].pop(),(n=on([+w[w.length-1].pop(),e,n[0],n[1],n[2],n[3],n[4],n[5]],f))[0]=new k(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),w[w.length-1].push.apply(w[w.length-1],n),b=null),y},y.addPath=function(n){return n instanceof E&&(e(n),b=null),y},y.dispose=function(){b=w=null},e=function(n){var t;n._d.reduce(function(n,e){return e&&e.length&&2<e.length&&(t=[+e[e.length-2],e[e.length-1]],n.push(e.slice())),n},w),s=!t||(w.push(t),!1)},1===arguments.length&&(n instanceof G?(f=n,n=null):f=null),f=(f=f instanceof G?f:null)||G.EYE(),n&&(n instanceof E?e(n):(n=n,c=y,t=I(String(n)).match(B),h=n.split(B),m=null,v=g=!(p=[(d=[0,0])[0],d[1]]),t&&t.forEach(function(n,e){var t,r,a,o,i,l,u=n===n.toLowerCase(),s=(I(h[e+1]||"").match(L)||[]).map(dn);switch(n.toUpperCase()){case"M":for(l=!1;2<=s.length;)l?(t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),g=!0):(d[0]=(u?d[0]:0)+s.shift(),d[1]=(u?d[1]:0)+s.shift(),p=[d[0],d[1]],c.moveTo(d[0],d[1]),v=!0),l=!0;m=null;break;case"H":for(g=v||g;1<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),t[1]],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),v&&(g=!0),v=!0;m=null;break;case"V":for(g=v||g;1<=s.length;)r=[(t=[d[0],d[1]])[0],(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),v&&(g=!0),v=!0;m=null;break;case"L":for(g=v||g;2<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),v&&(g=!0),v=!0;m=null;break;case"A":for(v=g=!0;7<=s.length;)i={start:null,end:null,radiusX:s.shift(),radiusY:s.shift(),angle:s.shift(),largeArc:s.shift(),sweep:s.shift()},t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],i.start=t,i.end=r,c.ellipse.apply(c,function(n,e,t,r,a,o,i,l,u){var s=u?W.cos(u):1,c=u?W.sin(u):0,f=s*(n-t)/2+c*(e-r)/2,h=-c*(n-t)/2+s*(e-r)/2,d=f*f,p=h*h,m=i*i,g=l*l,v=d/m+p/g;1<v&&(v=W.sqrt(v),m=(i*=v)*i,g=(l*=v)*l);v=W.sqrt(W.abs((m*g-m*p-g*d)/(m*p+g*d)))*(a===o?-1:1),m=v*i*h/l,p=-v*l*f/i,g=s*m-c*p+(n+t)/2,d=c*m+s*p+(e+r)/2,a=j(fn(1,0,(f-m)/i,(h-p)/l)),v=fn((f-m)/i,(h-p)/l,(-f-m)/i,(-h-p)/l);v-=W.floor(v/x)*x,!o&&0<v&&(v-=x);o&&v<0&&(v+=x);return[g,d,i,l,u,a,a+v,!o]}(i.start[0],i.start[1],i.end[0],i.end[1],i.largeArc,i.sweep,i.radiusX,i.radiusY,i.angle));m=null;break;case"Q":for(v=g=!0;4<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=a[0],d[1]=a[1],c.quadraticCurveTo(r[0],r[1],a[0],a[1]),m=["Q",t,r,a];break;case"T":for(v=g=!0;2<=s.length;)t=[d[0],d[1]],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],r=m&&"Q"===m[0]?[2*t[0]-m[2][0],2*t[1]-m[2][1]]:[t[0],t[1]],d[0]=a[0],d[1]=a[1],c.quadraticCurveTo(r[0],r[1],a[0],a[1]),m=["Q",t,r,a];break;case"C":for(v=g=!0;6<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],o=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=o[0],d[1]=o[1],c.bezierCurveTo(r[0],r[1],a[0],a[1],o[0],o[1]),m=["C",t,r,a,o];break;case"S":for(v=g=!0;4<=s.length;)t=[d[0],d[1]],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],o=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],r=m&&"C"===m[0]?[2*t[0]-m[3][0],2*t[1]-m[3][1]]:[t[0],t[1]],d[0]=o[0],d[1]=o[1],c.bezierCurveTo(r[0],r[1],a[0],a[1],o[0],o[1]),m=["C",t,r,a,o];break;case"Z":t=[d[0],d[1]],r=[p[0],p[1]],d[0]=r[0],d[1]=r[1],p=[d[0],d[1]],c.closePath(),v=g=!1,m=null}}),g&&c.moveTo(d[0],d[1])))}function G(n,e,t,r,a,o){var i=this,l=1,u=1;arguments.length&&(i.m11=n,i.m12=e,i.m13=t,i.m21=r,i.m22=a,i.m23=o),P(i,"a",{get:function(){return i.m11},set:function(n){i.m11=l=n}}),P(i,"c",{get:function(){return i.m12},set:function(n){i.m12=n}}),P(i,"e",{get:function(){return i.m13},set:function(n){i.m13=n}}),P(i,"b",{get:function(){return i.m21},set:function(n){i.m21=n}}),P(i,"d",{get:function(){return i.m22},set:function(n){i.m22=u=n}}),P(i,"f",{get:function(){return i.m23},set:function(n){i.m23=n}}),P(i,"is2D",{get:function(){return!0},set:function(n){}}),P(i,"isIdentity",{get:function(){return Y(i.m11,1)&&Y(i.m12,0)&&Y(i.m13,0)&&Y(i.m21,0)&&Y(i.m22,1)&&Y(i.m23,0)},set:function(n){}}),P(i,"sx",{get:function(){return l},set:function(n){l*=n}}),P(i,"sy",{get:function(){return u},set:function(n){u*=n}})}function k(n,e){this.value=n,this.params=e||null}function C(n,e){for(var t=0,r=n.length;t<r;++t)if(A(n[t])||!Z(n[t]))return null;if(e)for(t=0;t<r;t+=2){var a=e.transform(n[t],n[t+1]);n[t]=a[0],n[t+1]=a[1]}return n}function T(n,e,t,r){r=r?r.transform(e,t):[e,t];n.push(r[0],r[1])}function K(n,e,t,r,a,o,i,l,u){n.push.apply(n,an(e,t,r,a,o,i,l,u))}function nn(n,e,t,r,a,o,i,l,u,s,c,f,h,d,p,m){if(0===l&&0===u)X(n,e,t,r,a,o,i,f,h,d,p,m,!0,!0);else{var g,v,y;if(r<e&&(D=e,e=r,r=D,D=t,t=a,a=D,D=s,s=c,c=D),D=a<t?-1:1,Y(o,0))"square"===s&&(t-=D*l),"square"===c&&(a+=D*l),"round"===s&&O(n,e-l,t,e+l,t,e,t-D*l,l,h,d,p,m),"round"===c&&O(n,r-l,a,r+l,a,r,a+D*l,l,h,d,p,m),R(n,W.round(e-l),W.round(t),W.round(e+l),W.round(a),h,d,p,m);else if(Y(i,0))"square"===s&&(e-=+u),"square"===c&&(r+=+u),"round"===s&&O(n,e,t-u,e,t+u,e-u,t,u,h,d,p,m),"round"===c&&O(n,r,a-u,r,a+u,r+u,a,u,h,d,p,m),R(n,W.round(e),W.round(t-u),W.round(r),W.round(t+u),h,d,p,m);else{"square"===s&&(e-=+u,t-=D*l),"square"===c&&(r+=+u,a+=D*l),i=e-(o=+l),v=t+(A=D*u),e=e+o,t=t-A,g=r-o,y=a+A,r=r+o,o=a-A,"round"!==s&&"round"!==c||(f=M(l,u)),"round"===s?O(n,i,v,e,t,(i-+u+e-+u)/2,(v-D*l+t-D*l)/2,f,h,d,p,m):X(n,i,v,e,t,null,null,1,h,d,p,m),X(n,e,t,r,o,null,null,1,h,d,p,m),"round"===c?O(n,r,o,g,y,(+u+g+r+ +u)/2,(y+D*l+o+D*l)/2,f,h,d,p,m):X(n,r,o,g,y,null,null,1,h,d,p,m),X(n,g,y,i,v,null,null,1,h,d,p,m);var w,b,x,k,C,T,I,P,G=n,a=i,A=v,s=e,c=t,u=r,D=o,l=g,f=y,S=h,n=d,B=p,i=m,L=W.min(A,c,D,f),z=W.max(A,c,D,f),F=W.min(a,s,u,l),q=W.max(a,s,u,l),E=null!=S;if(!E||!(z<n||i<L||q<S||B<F))if(Y(L,z))L=W.round(L),F=W.round(F),q=W.round(q),R(G,F,L,q,L,S,n,B,i);else if(L=W.round(L),z=W.round(z),E&&(L=W.max(n,L),z=W.min(i,z)),!(z<L))for((C=[c<A?[s,c,a,A]:[a,A,s,c],D<c?[u,D,s,c]:[s,c,u,D],f<D?[l,f,u,D]:[u,D,l,f],A<f?[a,A,l,f]:[l,f,a,A]])[1][1]<C[0][1]&&(T=C[0],C[0]=C[1],C[1]=T),C[3][1]<C[2][1]&&(T=C[2],C[2]=C[3],C[3]=T),C[2][1]<C[0][1]&&(T=C[0],C[0]=C[2],C[2]=T),C[3][1]<C[1][1]&&(T=C[1],C[1]=C[3],C[3]=T),C[2][1]<C[1][1]&&(T=C[2],C[2]=C[1],C[1]=T),I=0;L<=z;++L){for(;I<4&&C[I][3]<L;)++I;if(4<=I)return;for(q=-(F=U),P=I;P<4;++P)x=C[P][0],w=C[P][1],k=C[P][2],b=C[P][3],w<=L&&L<=b&&(q=Y(w,b)?(F=W.min(F,x,k),W.max(q,x,k)):(k=(k-x)*(L-w)/(b-w)+x,F=W.min(F,k),W.max(q,k)));if(q-F<1)(!E||S<=F&&F<=B)&&G(W.round(F),L,1);else for(F=W.round(F+.5),q=W.round(q-.5),E&&(F=W.max(S,F),q=W.min(B,q));F<=q;++F)G(F,L,1)}}}}function en(n,e,t,r,a){var n=W.max(0,(n-1)/2),o=1===r?0:r/2,i=1===a?0:a/2,o=r*n+o<.5&&a*n+i<.5?[0,0]:Y(e,0)?[r*n+o,0]:Y(t,0)?[0,a*n+i]:[(r*n+o)*t/(r=M(e,t)),(a*n+i)*e/r];return o}function R(n,e,t,r,a,o,i,l,u){var s,c;if(r<e&&(s=e,e=r,r=s),a<t&&(c=t,t=a,a=c),null!=o){if(r<o||l<e||a<i||u<t)return;e=W.max(e,o),t=W.max(t,i),r=W.min(r,l),a=W.min(a,u)}if(t===a)for(s=e;s<=r;++s)n(s,t,1);else if(e===r)for(c=t;c<=a;++c)n(e,c,1);else for(c=t;c<=a;++c)for(s=e;s<=r;++s)n(s,c,1)}function _(n,e,t,r,a,o,i,l,u,s,c){var f,h,d,p,m,g,v,y,w,b,x,k,C,T,I=null!=l;if(!I||!(W.max(e,r,o)<l||W.min(e,r,o)>s||W.max(t,a,i)<u||W.min(t,a,i)>c)){if(a<t&&(d=t,t=a,a=d,d=e,e=r,r=d),i<t&&(d=t,t=i,i=d,d=e,e=o,o=d),i<a&&(d=a,a=i,i=d,d=r,r=o,o=d),Y(b=i-t,0))return p=W.round(t),R(n,f=W.round(W.min(e,r,o)),p,h=W.round(W.max(e,r,o)),p,l,u,s,c);for(k=i-a,v=o-e,y=r-e,w=o-r,C=Y(x=a-t,0),T=Y(k,0),p=W.round(t+.5),m=a,g=W.round(i-.5),I&&(p=W.max(u,p),g=W.min(c,g));p<=g;++p)if(h=p<m?C?(f=e,r):(f=v*(p-t)/b+e,y*(p-t)/x+e):T?(f=r,o):(f=v*(p-t)/b+e,w*(p-a)/k+r),W.abs(h-f)<1)(!I||l<=f&&f<=s)&&n(W.round(f),p,1);else for(h<f&&(d=f,f=h,h=d),f=W.round(f+.5),h=W.round(h-.5),I&&(f=W.max(l,f),h=W.min(s,h));f<=h;++f)n(f,p,1)}}function O(n,e,t,r,a,o,i,l,u,s,c,f){var h,d,p,m,g,v,y,w,b,x,k,C,G,T,I,P,A,D,S,B,L,z,F,q,E,R=null!=u;for(a<t&&(D=t,t=a,a=D,D=e,e=r,r=D),D=o,S=i,z=r,F=a,q=(z-=B=e)*(D-=B)+(F-=L=t)*(S-=L),E=M(z,F),M(D,S),B=o+l/(S=M(o-(x=[B+(D=q/E)*z/E,L+D*F/E])[0],i-x[1]))*(x[0]-o),q=i+l/S*(x[1]-i),z=W.atan2(i-q,o-B),L=W.atan2(t-q,e-B),F=W.atan2(a-q,r-B),z=j(z),E=j(L),S=j(F),P=(x=rn(B,q,l,l,0,L,F,!(z<E&&z<S||E<z&&S<z||E<z&&z<S))).length-2,T=0;T<P;T+=2)X(n,x[T],x[T+1],x[T+2],x[T+3],null,null,1,u,s,c,f);for(x=un([x]),h=W.round(W.min(t,a,i,x.ymin)),d=W.round(W.max(t,a,i,x.ymax)),R&&(h=W.max(h,s),d=W.min(d,f)),k=r-e,G=Y(C=a-t,0),T=0,P=x.length;h<=d;++h){for(;T<P&&x[T][3]<h;)++T;if(P<=T)break;if((A=x[T])[1]>h)h=W.floor(A[1]);else{for(m=-(p=U),t<=h&&h<=a&&(m=G?(p=W.min(p,e,r),W.max(m,e,r)):(p=W.min(p,g=k*(h-t)/C+e),W.max(m,g))),I=T;I<P&&x[I][1]<=h;++I)(A=x[I])[3]>=h&&(v=A[0],y=A[2],m=Y(w=A[1],b=A[3])?(p=W.min(p,v,y),W.max(m,v,y)):(p=W.min(p,g=(y-v)*(h-w)/(b-w)+v),W.max(m,g)));for(p=W.round(p+.5),m=W.round(m-.5),R&&(p=W.max(p,u),m=W.min(m,c));p<=m;++p)n(p,h,1)}}}function X(n,e,t,r,a,o,i,l,u,s,c,f,h,d){var p=W.min(e,r),m=W.max(e,r),g=W.min(t,a),v=W.max(t,a);if(!(m<u||c<p||v<s||f<g)){if(null==o&&(o=W.abs(r-e),i=W.abs(a-t)),p<u||c<m||g<s||f<v){p=function(n,e,t,r,a,o,i,l){var u=-(t=-(t-n)),s=-(r=-(r-e)),a=n-a,i=i-n,o=e-o,l=l-e,c=1,f=0;if(!(0==t&&a<0||0==u&&i<0||0==r&&o<0||0==s&&l<0||(0!=t&&(a=a/t,i=i/u,t<0?(f<a&&(f=a),i<c&&(c=i)):(f<i&&(f=i),a<c&&(c=a))),0!=r&&(t=o/r,i=l/s,r<0?(f<t&&(f=t),i<c&&(c=i)):(f<i&&(f=i),t<c&&(c=t))),c<f)))return[n+u*f,e+s*f,n+u*c,e+s*c]}(e,t,r,a,u,s,c,f);if(!p)return;e=p[0],t=p[1],r=p[2],a=p[3]}if(Y(o,0)||Y(i,0))return R(n,W.round(e),W.round(t),W.round(r),W.round(a));var y,w,b,x,k=0,C=0,T=0,m=o<i,I=l<1?l:1;if(m&&(y=e,e=t,t=y,y=r,r=a,a=y,y=o,o=i,i=y),r<e&&(y=e,e=r,r=y,w=t,t=a,a=w),v=t+(x=(a<t?-1:1)*i/o)*((g=W.round(e))-e),u=h?1:1-(e+.5-W.floor(e+.5)),s=g,T=1-(C=v-(c=W.floor(v))),m?(n(c,s,I*T*u),n(c+1,s,I*C*u)):(n(s,c,I*T*u),n(s,c+1,I*C*u)),k=v+x,v=a+x*((g=W.round(r))-r),u=d?1:r+.5-W.floor(r+.5),b=g,T=1-(C=v-(f=W.floor(v))),m?(n(f,b,I*T*u),n(f+1,b,I*C*u)):(n(b,f,I*T*u),n(b,f+1,I*C*u)),m)for(y=s+1;y<b;++y)0<(T=1-(C=k-(w=W.floor(k))))&&n(w,y,I*T),0<C&&n(w+1,y,I*C),k+=x;else for(y=s+1;y<b;++y)0<(T=1-(C=k-(w=W.floor(k))))&&n(y,w,I*T),0<C&&n(y,w+1,I*C),k+=x}}function tn(n,e,t,r,a,o,i,l,u,s,c,f,h,d,p,m,g,v,y,w,b){var x,k,C,T,I,P,A,D,S=r<e?-1:1,B=a<t?-1:1,L=o<r?-1:1,z=i<a?-1:1;N(B*u*L*f,z*h*S*l,1e-6)||(C={x:e-(T=S*s),y:t+(D=B*c)},e={x:e+T,y:t-D},t={x:r-T,y:a+D},T={x:r+T,y:a-D},I={x:r-(D=L*d),y:a+(k=z*p)},P={x:r+D,y:a-k},A={x:o-D,y:i+k},o={x:o+D,y:i-k},D={x:r,y:a},i=z*h*S*l<B*u*L*f?(x=t,I):(x=T,P),L*B*S*z<0&&(x=T===x?t:T,i=P===i?I:P),S*z<0&&(x=T===x?t:T),L*B<0&&(i=P===i?I:P),S*L<0&&(x=T===x?t:T,i=P===i?I:P),"bevel"===m?(X(n,x.x,x.y,i.x,i.y,null,null,1,v,y,w,b),_(n,D.x,D.y,x.x,x.y,i.x,i.y,v,y,w,b)):(r=(k=x===T?e:C).x,a=k.y,h=x.x,l=x.y,u=i.x,f=i.y,z=l-a,B=r-h,h=h*a-r*l,l=(L=(S=i===P?o:A).x)*f-u*(t=S.y),T=M((I=!Y(L=z*(r=u-L)-B*(a=t-f),0)&&{x:(B*l-h*r)/L,y:(h*a-z*l)/L}).x-D.x,I.y-D.y),e=W.min(M(s,c),M(d,p)),"round"===m?(I={x:D.x+e*(I.x-D.x)/T,y:D.y+e*(I.y-D.y)/T},_(n,D.x,D.y,x.x,x.y,i.x,i.y,v,y,w,b),O(n,x.x,x.y,i.x,i.y,I.x,I.y,e,v,y,w,b)):g*e<T?(X(n,x.x,x.y,i.x,i.y,null,null,1,v,y,w,b),_(n,D.x,D.y,x.x,x.y,i.x,i.y,v,y,w,b)):(X(n,x.x,x.y,I.x,I.y,null,null,1,v,y,w,b),X(n,i.x,i.y,I.x,I.y,null,null,1,v,y,w,b),_(n,D.x,D.y,x.x,x.y,i.x,i.y,v,y,w,b),_(n,I.x,I.y,x.x,x.y,i.x,i.y,v,y,w,b))))}function rn(r,a,o,i,n,l,e,t,u){s=e,t=t,c=j(f=l),s+=c-f,!t&&x<=s-c?s=c+x:t&&x<=c-s?s=c-x:!t&&s<c?s=c+(x-j(c-s)):t&&c<s&&(s=c-(x-j(s-c)));var s,c,f=[c,s],h=(l=f[0],e=f[1],n?W.cos(n):1),d=n?W.sin(n):0,p=e-l,m=u&&!u.isIdentity;return y(function(n){var n=l+n*p,e=o*W.cos(n),n=i*W.sin(n),t=r+h*e-d*n,e=a+d*e+h*n;return m?u.transform(t,e):[t,e]},m?u.sx:1,m?u.sy:1)}function an(n,e,t,r,a,o,i,l){var u=[],n=function(n,e,t,r,a,o,i){if(N(t,n)&&N(r,e)||N(t,a)&&N(r,o)||N(i,0))return[t,r];var l,u,s,c=!1;if(a={x:a-t,y:o-r},u=M((o={x:n-t,y:e-r}).x,o.y),s=M(a.x,a.y),Y(l=(o.x*a.x+o.y*a.y)/(u*s),-1))return[t,r];if(Y(l,1))return[n+(n=65535/u)*o.x,e+n*o.y];e=i/W.tan(W.acos(l)/2),l={x:t+(n=e/u)*o.x,y:r+n*o.y},n=M((u={x:o.y,y:-o.x}).x,u.y),o=i/n,(u.x*a.x+u.y*a.y)/(n*s)<0&&(u={x:-u.x,y:-u.y});o={x:l.x+o*u.x,y:l.y+o*u.y},u={x:-u.x,y:-u.y},n=W.acos(u.x/n),u.y<0&&(n=x-n);s=M((e={x:(t={x:t+(u=e/s)*a.x,y:r+u*a.y}).x-o.x,y:t.y-o.y}).x,e.y),r=W.acos(e.x/s),e.y<0&&(r=x-r);r<n&&n-r<d&&(c=!0);n<r&&d<r-n&&(c=!0);return[l.x,l.y,o.x,o.y,n,r,!(!c||N(x,i))]}(n,e,t,r,a,o,i);return n&&2<=n.length&&(e=l?l.transform(n[0],n[1]):[n[0],n[1]],u.push(e[0],e[1]),2<n.length)&&u.push.apply(u,rn(n[2],n[3],i,i,0,n[4],n[5],n[6],l)),u}function on(i,n){var e=n&&!n.isIdentity;return y(6<i.length?function(n){var e=1-n,t=n*n,r=e*e,a=r*e,o=t*n,r=3*r*n,n=3*t*e;return[a*i[0]+r*i[2]+n*i[4]+o*i[6],a*i[1]+r*i[3]+n*i[5]+o*i[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*i[0]+e*i[2]+n*i[4],t*i[1]+e*i[3]+n*i[5]]},e?n.sx:1,e?n.sy:1)}function ln(n,e,t,G,R,r,a,U,_,O,X,M,N,Y){for(var o,i=0,l=e._d,J=l.length;i<J;++i)if((o=l[i])&&2<o.length){E=q=b=w=y=v=g=m=p=d=h=f=c=s=u=F=z=L=B=S=D=A=P=I=T=C=k=x=void 0;var u,s,c,f,h,d,p,m,g,v,y,w,b,x=n,k=o,C=t,T=r,I=a,P=U,A=_,D=O,S=X,B=M,L=N,z=Y,F=k.length,q=I,E=T;if(F<6)nn(x,s=k[0],c=k[1],f=k[2],h=k[3],v=W.abs(f-s),y=W.abs(h-c),(b=en(C,v,y,A,D))[0],b[1],T,T,C,S,B,L,z);else{for(F-=2,u=0;u<F;u+=2)s=k[u],c=k[u+1],f=k[u+2],h=k[u+3],b=en(C,v=W.abs(f-s),y=W.abs(h-c),A,D),s.params&&s.params.lineCap&&(E=!0===s.params.lineCap?T:s.params.lineCap),nn(x,s,c,f,h,v,y,b[0],b[1],0===u?E:null,F===u+2?E:null,C,S,B,L,z),0<u&&(0<w[0]||0<w[1]||0<b[0]||0<b[1])&&(s.params&&s.params.lineJoin&&(q=!0===s.params.lineJoin?I:s.params.lineJoin),tn(x,d,p,s,c,f,h,m,g,w[0],w[1],v,y,b[0],b[1],q,P,S,B,L,z)),d=s,p=c,m=v,g=y,w=b;f.params&&f.params.join&&(d=f.params.join[0],p=f.params.join[1],0<(w=en(C,m=W.abs(d-f),g=W.abs(p-h),A,D))[0]||0<w[1]||0<b[0]||0<b[1])&&tn(x,s,c,f,h,d,p,v,y,b[0],b[1],m,g,w[0],w[1],q,P,S,B,L,z)}}}function un(n){if(!n)return[];for(var e,t,r,a,o=[],i=n.length,l=U,u=-U,s=0,c=0,f=0;f<i;++f)if((a=n[f])&&!((e=a.length-2)<=0)){for(++s,r=-(c=1),t=0;t<e;t+=2)a[t].params&&a[t].params.type&&(0<=r&&r<o.length&&(o[r][7]=o[r+c-2][6]+1,o[r+c-2][7]=o[r][6]+1),++s,c=1,r=o.length),l=W.min(l,a[t+1]),u=W.max(u,a[t+1]),a[t+1]>a[t+3]?o.push([+a[t+2],a[t+3],+a[t],a[t+1],-1,s,c,c,0,0]):o.push([+a[t],a[t+1],+a[t+2],a[t+3],1,s,c,c,0,0]),++c;l=W.min(l,a[1+e]),u=W.max(u,a[1+e])}return(o=o.sort(hn)).ymin=l,o.ymax=u,o}function sn(n,e){for(var t,r,a,o=0,i=0;i<e;++i)if(!(r=n[i])[9])for(t=i+1;t<e;++t)(a=n[t])[9]||r[4]!==a[4]||r[5]!==a[5]||1<W.abs(r[6]-a[6])&&1<W.abs(r[7]-a[7])||(N(r[0],a[0],1e-6)&&N(r[1],a[1],1e-6)&&N(r[2],a[2],1e-6)&&N(r[3],a[3],1e-6)||N(r[3],a[1],1e-6)||N(r[1],a[3],1e-6))&&(a[9]=1,++o);return o}function y(n,e,t){var r,a=[],o=m,i=n(0);for(a.push(i[0],i[1]),r=0;r<o;++r)i=function n(e,t,r,a,o,i,l,u){if(i<=o||N(o,i,1e-6))return l;l=l||t(o);u=u||t(i);var s,c=W.max(r,a),f=M(u[0]-l[0],u[1]-l[1])*c;if(f<=g){if(f<1)return l;e.push(u[0],u[1])}else w((s=t(f=(o+i)/2))[0],s[1],l[0],l[1],u[0],u[1])*c<v?e.push(u[0],u[1]):(n(e,t,r,a,o,f,l,s),n(e,t,r,a,f,i,s,u));return u}(a,n,e,t,0===r?0:r/o,o===r+1?1:(r+1)/o,i,null);return a}function cn(n,e,t,r,a,o){return(n-t)*(o-r)-(a-t)*(e-r)<0?-1:1}function M(n,e){n=W.abs(n),e=W.abs(e);var t=0;return Y(n,0)?e:Y(e,0)?n:e<n?n*W.sqrt(1+(t=e/n)*t):n<e?e*W.sqrt(1+(t=n/e)*t):n*f}function w(n,e,t,r,a,o){var a=a-t,o=o-r,i=M(a,o);return Y(i,0)?M(n-t,e-r):W.abs(a*(r-e)-o*(t-n))/i}function fn(n,e,t,r){var a,o,i=n*r-e*t;return t=t,r=r,a=M(n=n,e=e),o=M(t,r),(i<0?-1:1)*(Y(a,0)||Y(o,0)?0:W.acos(J(n/a*(t/o)+e/a*(r/o),-1,1)))}function N(n,e,t){return W.abs(n-e)<(t||1e-6)}function Y(n,e){return W.abs(n-e)<Number.EPSILON}function J(n,e,t){return W.min(W.max(n,e),t)}function j(n){return n=n,t=0,r=e=x,(n-=e*W.floor(n/e))<t&&(n+=e),r<n&&(n-=e),n;var e,t,r}function hn(n,e){var t=n[1]-e[1];return N(t,0)?n[3]-e[3]:t}function dn(n){return parseFloat(n||"")||0}function H(n){throw new Error(n)}function e(){}function V(c){if(!(this instanceof V)||"function"!=typeof c||c.length<5)throw new Error("Gradient: invalid gradient");var f=new a,t={0:[0,[0,0,0,0]],1:[1,[0,0,0,0]]},r=null,h=function(){var n;return null==r&&((n=Object.keys(t)).sort(function(n,e){return parseFloat(n)-parseFloat(e)}),r=n.map(function(n){return t[n]}).filter(function(n){return 0<=n[0]&&n[0]<=1})),r};P(this,"transform",{get:function(){return f},set:function(n){},enumerable:!0,configurable:!1}),this.addColorStop=function(n,e){r=null,t[String(n)]=[+n,In(e)||[0,0,0,0]]},this.getColorAt=function(n,e){var t=f.imatrix(!0),t=t?t.transform(n,e):null;return t?c(t.x,t.y,h(),new D(4),0):new D(4)},this.getBitmap=function(n,e){n=W.round(n),e=W.round(e);var t,r,a,o,i,l=f.imatrix(!0),u=n*e<<2,s=new D(u);if(l)for(t=h(),r=o=a=0;r<u;r+=4,++a)n<=a&&(a=0,++o),i=l.transform(a,o),c(i.x,i.y,t,s,r);return s}}function Q(s){if(!(this instanceof Q)||"function"!=typeof s||s.length<4)throw new Error("Pattern: invalid pattern");var c=new a;P(this,"transform",{get:function(){return c},set:function(n){},enumerable:!0,configurable:!1}),this.getColorAt=function(n,e){n=c.imatrix(!0).transform(n,e);return s(n.x,n.y,new D(4),0)},this.getBitmap=function(n,e){n=W.round(n),e=W.round(e);for(var t,r=c.imatrix(!0),a=n*e<<2,o=new D(a),i=0,l=0,u=0;u<a;u+=4,++i)n<=i&&(i=0,++l),t=r.transform(i,l),s(t.x,t.y,o,u);return o}}function a(){var i=this,l=new G,u=new G,e=[];i.dispose=function(){e=u=l=null},i.matrix=function(n){return!0===n?l:l.clone()},i.imatrix=function(n){return!0===n?u:u.clone()},i.reset=function(){return l=new G,u=new G,i},i.save=function(){return 10<=e.length&&e.shift(),e.push([l,u]),i},i.restore=function(){var n;return e.length&&(n=e.pop(),l=n[0],u=n[1]),i},i.scale=function(n,e,t,r){return l=G.scale(n,e,t,r).mul(l),u=u.mul(G.scale(1/n,1/e,t,r)),i},i.rotate=function(n,e,t){return l=G.rotate(n,e,t).mul(l),u=u.mul(G.rotate(-n,e,t)),i},i.translate=function(n,e){return l=G.translate(n,e).mul(l),u=u.mul(G.translate(-n,-e)),i},i.skewX=function(n){return l=G.skewX(n).mul(l),u=u.mul(G.skewX(n).inv()),i},i.skewY=function(n){return l=G.skewY(n).mul(l),u=u.mul(G.skewY(n).inv()),i},i.transform=function(n,e,t,r,a,o){n=new G(n,t,a,e,r,o);return l=n.mul(l),u=u.mul(n.inv()),i}}function pn(n,e,t){for(var r,a=0,o=t-1;a<o;){if(e[a][0]>=n)return a;e[r=a+o>>>1][0]<n?a=1+r:o=r}return a}function mn(n,e,t,r,a){return n[e+0]=J(W.round(t[0]+a*(r[0]-t[0])),0,255),n[e+1]=J(W.round(t[1]+a*(r[1]-t[1])),0,255),n[e+2]=J(W.round(t[2]+a*(r[2]-t[2])),0,255),n[e+3]=3<t.length?J(W.round(255*(t[3]+a*(r[3]-t[3]))),0,255):255,n}F.VERSION="0.9.92",F[n]={constructor:F,width:null,height:null,getContext:null},F.getRGBAFrom=function(o){var t;return"function"==typeof o?function(n,e){n=o(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:o.data&&null!=o.width&&null!=o.height?function(n,e){var t=o.width,r=o.height,a=o.data;return 0<=n&&n<t&&0<=e&&e<r?[a[r=n+t*e<<2],a[1+r],a[2+r],a[3+r]/255]:z}:(t=[o[0]||0,o[1]||0,o[2]||0,3<o.length?o[3]||0:1],function(n,e){return t})},F.setRGBATo=function(v){var n;return"function"==typeof v?v:((n=function(n,e,t,r,a,o,i){var l=v.width,u=v.height,s=v.data;if(0<=n&&n<l&&0<=e&&e<u){var u=n+l*e<<2,n=s[u]||0,l=s[1+u]||0,e=s[2+u]||0,c=(s[3+u]||0)/255,f=o,h=null,d=0,p=0,m=0,g=0;switch("clear"!==(i=i||"source-over")&&"copy"!==i&&(h=(h=q.CompositionMode[i])||q.CompositionMode[i="source-over"]),i){case"clear":h=null;break;case"copy":d=t,p=r,m=a,g=J(W.round(255*f),0,255),h=null;break;case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":g=h(c,c,f,f);break;default:g=f+c-f*c}h&&(g=0<g?(d=J(W.round(255*h(c*n/255,c,f*t/255,f)/g),0,255),p=J(W.round(255*h(c*l/255,c,f*r/255,f)/g),0,255),m=J(W.round(255*h(c*e/255,c,f*a/255,f)/g),0,255),J(W.round(255*g),0,255)):m=p=d=0),s[u]=d,s[1+u]=p,s[2+u]=m,s[3+u]=g}}).$target=v,n)},q[n]={constructor:q,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return null==e&&null!=n.width&&null!=n.height&&(e=n.height,n=n.width),{data:new D(n*e<<2),width:n,height:e}},getImageData:null,putImageData:null,drawImage:null,createLinearGradient:e,createRadialGradient:e,createConicGradient:e,createPattern:e,strokeText:e,fillText:e,measureText:e},((F.RenderingContext2D=q).CompositionMode={xor:function(n,e,t,r){return t*(1-e)+n*(1-r)},"destination-out":function(n,e,t,r){return n*(1-r)},"destination-in":function(n,e,t,r){return n*r},"destination-atop":function(n,e,t,r){return t*(1-e)+n*r},"destination-over":function(n,e,t,r){return t*(1-e)+n},"source-out":function(n,e,t,r){return t*(1-e)},"source-in":function(n,e,t,r){return t*e},"source-atop":function(n,e,t,r){return t*e+n*(1-r)},"source-over":function(n,e,t,r){return t+n*(1-r)},multiply:function(n,e,t,r){return t*n+t*(1-e)+n*(1-r)},screen:function(n,e,t,r){return t+n-t*n},overlay:function(n,e,t,r){return 2*n<=e?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-2*n*t-e*r},darken:function(n,e,t,r){return W.min(t*e,n*r)+t*(1-e)+n*(1-r)},lighten:function(n,e,t,r){return W.max(t*e,n*r)+t*(1-e)+n*(1-r)},"color-dodge":function(n,e,t,r){return t===r&&0===n?t*(1-e):t===r?r*e+t*(1-e)+n*(1-r):r*e*W.min(1,n/e*r/(r-t))+t*(1-e)+n*(1-r)},"color-burn":function(n,e,t,r){return 0===t&&n===e?r*e+n*(1-r):0===t?n*(1-r):r*e*(1-W.min(1,(1-(e?n/e:0))*r/t))+t*(1-e)+n*(1-r)},"hard-light":function(n,e,t,r){return 2*t<=r?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-r*e-2*t*n},"soft-light":function(n,e,t,r){var a=e?n/e:0;return 2*t<=r?n*(r+(2*t-r)*(1-a))+t*(1-e)+n*(1-r):r<2*t&&4*n<=e?e*(2*t-r)*(16*W.pow(a,3)-12*W.pow(a,2)-3*a)+t-t*e+n:e*(2*t-r)*(W.pow(a,.5)-a)+t-t*e+n},difference:function(n,e,t,r){return t+n-2*W.min(t*e,n*r)},exclusion:function(n,e,t,r){return t*e+n*r-2*t*n+t*(1-e)+n*(1-r)}}).hardlight=q.CompositionMode["hard-light"],q.CompositionMode.softlight=q.CompositionMode["soft-light"],q.Interpolation={bilinear:function(n,e,t,r,a){for(var o,i,l,u,s,c,f,h,d,p,m=r*a<<2,g=new D(m),v=(e-1)/r,y=(t-1)/a,w=e<<2,b=0,x=0,k=0,C=0,T=0,I=0;I<m;I+=4,++b,x+=v)r<=b&&(T=(k+=y)-(p=(x=b=0)|k),C=p*e),o=n[h=C+(p=0|x)<<2],i=n[4+h],l=n[h+w],u=n[h+w+4],g[I]=J(W.round(o*(s=(1-(d=x-p))*(1-T))+i*(c=d*(1-T))+l*(f=T*(1-d))+u*(d=d*T)),0,255),o=n[1+h],i=n[5+h],l=n[h+w+1],u=n[h+w+5],g[I+1]=J(W.round(o*s+i*c+l*f+u*d),0,255),o=n[2+h],i=n[6+h],l=n[h+w+2],u=n[h+w+6],g[I+2]=J(W.round(o*s+i*c+l*f+u*d),0,255),o=n[3+h],i=n[7+h],l=n[h+w+3],u=n[h+w+7],g[I+3]=J(W.round(o*s+i*c+l*f+u*d),0,255);return g}},E[n]={constructor:E,_d:null,_sd:null,transform:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},q.Path2D=E,G[n]={constructor:G,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this,e=new G(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23);return e.sx=n.sx,e.sy=n.sy,e},mul:function(n){var e,t=this;if(n instanceof G)return(e=new G(t.m11*n.m11+t.m12*n.m21,t.m11*n.m12+t.m12*n.m22,t.m11*n.m13+t.m12*n.m23+t.m13,t.m21*n.m11+t.m22*n.m21,t.m21*n.m12+t.m22*n.m22,t.m21*n.m13+t.m22*n.m23+t.m23)).sx=t.sx*n.sx,e.sy=t.sy*n.sy,e},inv:function(){var n=this,e=n.m11,t=n.m12,r=n.m13,a=n.m21,o=n.m22,i=n.m23,l=e*o-t*a;return Y(l,0)?null:((a=new G(o=o/l,t=-t/l,-o*r-t*i,o=-a/l,t=e/l,-o*r-t*i)).sx=1/n.sx,a.sy=1/n.sy,a)},transform:function(n,e){1===arguments.length&&(e=n[1],n=n[0]);var t=this;return[t.m11*n+t.m12*e+t.m13,t.m21*n+t.m22*e+t.m23]}},G.translate=function(n,e){return new G(1,0,n||0,0,1,e||0)},G.scale=function(n,e,t,r){t=new G(n,0,-n*(t=t||0)+t,0,e,-e*(r=r||0)+r);return t.sx=n,t.sy=e,t},G.rotate=function(n,e,t){e=e||0,t=t||0;var r=W.cos(n||0),n=W.sin(n||0);return new G(r,-n,e-r*e+n*t,n,r,t-r*t-n*e)},G.skewX=function(n){return new G(1,n||0,0,0,1,0)},G.skewY=function(n){return new G(1,0,0,n||0,1,0)},G.EYE=function(){return new G(1,0,0,0,1,0)},q.Matrix2D=G,k[n]={constructor:k,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},V.VERSION="1.2.2",V[n]={constructor:V,transform:null,addColorStop:null,getColorAt:null,getBitmap:null},V.createLinearGradient=function(u,s,n,e){var c=(n=n||0)-(u=u||0),f=(e=e||0)-(s=s||0),h=Y(c,0),d=Y(f,0),p=2*c*f;return new V(function(n,e,t,r,a){var o,i,l=t.length,n=n-u,e=e-s,n=d&&h?0:h?e/f:d?n/c:(n*f+e*c)/p;return n<=0?n=o=i=0:1<=n?(o=i=l-1,n=1):o=0===(i=pn(n,t,l))?0:i-1,mn(r,a||0,t[o][1],t[i][1],t[i][0]>t[o][0]?(n-t[o][0])/(t[i][0]-t[o][0]):n)})},V.createRadialGradient=function(d,p,m,g,v,n){var y=(m=m||0)*m-2*m*(n=n||0)+n*n-(d=d||0)*d+2*d*(g=g||0)-g*g-(p=p||0)*p+2*p*(v=v||0)-v*v,w=-2*m*m+2*m*n+2*d*d-2*d*g+2*p*p-2*p*v,b=-d*d-p*p+m*m;return new V(function(n,e,t,r,a){var o,i,l,u,s,c,f,h=t.length;return u=w-2*n*d+2*n*g-2*e*p+2*e*v,s=b-n*n+2*n*d-e*e+2*e*p,(u=(s=Y(l=y,0)?(f=s,!Y(c=u,0)&&[-f/c]):N(f=u*u-4*l*s,c=0)?[-u/(2*l)]:!(f<0)&&(c=W.sqrt(f),[(-u-c)/(2*l),(-u+c)/(2*l)]))?1<s.length?0<=s[0]&&s[0]<=1&&0<=s[1]&&s[1]<=1?W.min(s[0],s[1]):0<=s[0]&&s[0]<=1?s[0]:0<=s[1]&&s[1]<=1?s[1]:W.min(s[0],s[1]):s[0]:-1)<0||1<u?(l=n-d,s=e-p,i=o=W.sqrt(l*l+s*s)<m?u=0:h-(u=1)):o=0===(i=pn(u,t,h))?0:i-1,mn(r,a||0,t[o][1],t[i][1],t[i][0]>t[o][0]?(u-t[o][0])/(t[i][0]-t[o][0]):u)})},V.createConicGradient=function(i,l,u){return i=i||0,l=l||0,u=u||0,new V(function(n,e,t,r,a){var o=t.length,e=W.atan2(e-u,n-l)+p-i;return e<0&&(e+=x),x<e&&(e-=x),mn(r,a||0,t[r=0===(n=pn(e=J(e/x,0,1),t,o))?0:n-1][1],t[n][1],t[n][0]>t[r][0]?(e-t[r][0])/(t[n][0]-t[r][0]):e)})},Q[n]={constructor:Q,transform:null,getColorAt:null,getBitmap:null},Q.createPattern=function(a,n){if(!((a=a&&"function"==typeof a.getImageData?a.getImageData():a)&&a.data&&a.width&&a.height&&a.data.length===4*a.width*a.height))throw new Error("Pattern: invalid image data");var o=a.width,i=a.height;switch(n){case"no-repeat":return new Q(function(n,e,t,r){n=W.round(n),e=W.round(e),0<=n&&n<o&&0<=e&&e<i&&(t[r+0]=a.data[n=n+e*o<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n])});case"repeat-x":return new Q(function(n,e,t,r){n=W.round(n),0<=(e=W.round(e))&&e<i&&((n%=o)<0&&(n+=o),t[r+0]=a.data[n=n+e*o<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n])});case"repeat-y":return new Q(function(n,e,t,r){n=W.round(n),e=W.round(e),0<=n&&n<o&&((e%=i)<0&&(e+=i),t[r+0]=a.data[n=n+e*o<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n])});default:return new Q(function(n,e,t,r){n=W.round(n),e=W.round(e),(n%=o)<0&&(n+=o),(e%=i)<0&&(e+=i);n=n+e*o<<2;t[r+0]=a.data[n],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n]})}},V.Pattern=Q,V.createPattern=Q.createPattern,q.Gradient=V,q.Pattern=Q,q[n].createLinearGradient=V.createLinearGradient,q[n].createRadialGradient=V.createRadialGradient,q[n].createConicGradient=V.createConicGradient,q[n].createPattern=V.createPattern,a[n]={constructor:a,dispose:null,matrix:null,imatrix:null,reset:null,save:null,restore:null,scale:null,rotate:null,translate:null,reflectX:null,reflectY:null,skewX:null,skewY:null,transform:null},V.Transform=a;var gn=/^#([0-9a-fA-F]{3,6})\b/,vn=/^(rgba?)\b\s*\(([^\)]*)\)/i,yn=/^(hsla?)\b\s*\(([^\)]*)\)/i,wn=/^(hwba?)\b\s*\(([^\)]*)\)/i,bn=/\s+|,/gm,xn=/\/\s*(\d*?\.?\d+%?)/;function kn(n,e,t,r){var a,o,i;return e/=100,e=(1-W.abs(2*(t/=100)-1))*e,a=W.floor((n=n/60)/2),a=e*(1-W.abs(n-2*a-1)),t=t-e/2,n=0<=n&&n<1?(o=e+t,i=a+t,0+t):1<=n&&n<2?(o=a+t,i=e+t,0+t):2<=n&&n<3?(o=0+t,i=e+t,a+t):3<=n&&n<4?(o=0+t,i=a+t,e+t):4<=n&&n<5?(o=a+t,i=0+t,e+t):(o=e+t,i=0+t,a+t),[J(W.round(255*o),0,255),J(W.round(255*i),0,255),J(W.round(255*n),0,255),r]}function Cn(n,e,t,r){var a,t=1-t/100;return n=n,a=100*t,r=r,e=(a/=100)*(1-(e=100-e/t)/200),t=W.min(e,1-e),kn(n,0===t?0:100*(a-e)/t,100*e,r)}var Tn=/^\s+|\s+$/gm,I=String.prototype.trim?function(n){return n.trim()}:function(){return s.replace(Tn,"")};function In(n){var e,t,r,a,o,i,l,u;return n=I(String(n)).toLowerCase(),(e=n.match(gn))?!(r=e[1])||r.length<3?[0,0,0,0]:r.length<6?[J(parseInt(r[0]+r[0],16)||0,0,255),J(parseInt(r[1]+r[1],16)||0,0,255),J(parseInt(r[2]+r[2],16)||0,0,255),1]:[J(parseInt(r[0]+r[1],16)||0,0,255),J(parseInt(r[2]+r[3],16)||0,0,255),J(parseInt(r[4]+r[5],16)||0,0,255),1]:(e=n.match(wn))?(t=e[2].match(xn),l=(a=I(e[2]).split(bn).map(I))[0]||"0",r=a[1]||"0",o=a[2]||"0",i=t?t[1]:"1",Cn(l=parseFloat(l,10),r="%"===r.slice(-1)?parseFloat(r,10):100*parseFloat(r,10)/255,o="%"===o.slice(-1)?parseFloat(o,10):100*parseFloat(o,10)/255,i="%"===i.slice(-1)?parseFloat(i,10)/100:parseFloat(i,10))):(e=n.match(yn))?(t=e[2].match(xn),l=(a=I(e[2]).split(bn).map(I))[0]||"0",n=a[1]||"0",u=a[2]||"0",i=t?t[1]:"hsla"===e[1]&&null!=a[3]?a[3]:"1",kn(l=parseFloat(l,10),n="%"===n.slice(-1)?parseFloat(n,10):100*parseFloat(n,10)/255,u="%"===u.slice(-1)?parseFloat(u,10):100*parseFloat(u,10)/255,i="%"===i.slice(-1)?parseFloat(i,10)/100:parseFloat(i,10))):(e=n.match(vn))?(t=e[2].match(xn),l=(a=I(e[2]).split(bn).map(I))[0]||"0",u=a[1]||"0",o=a[2]||"0",i=t?t[1]:"rgba"===e[1]&&null!=a[3]?a[3]:"1",[l="%"===l.slice(-1)?2.55*parseFloat(l,10):parseFloat(l,10),u="%"===u.slice(-1)?2.55*parseFloat(u,10):parseFloat(u,10),o="%"===o.slice(-1)?2.55*parseFloat(o,10):parseFloat(o,10),i="%"===i.slice(-1)?parseFloat(i,10)/100:parseFloat(i,10)]):c.call(Pn,n)?Pn[n].slice():void 0}var Pn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function An(n){return n.reduce(function(n,e){return 2*n+e},0)}function Dn(n){for(var e=[],t=7;0<=t;--t)e.push(!!(n&1<<t));return e}function Sn(n,r){for(var e,t,a=0,o=[],i=1<<n,l=1+i,u=n+1,s=[];;)if(t=e,(e=function(n){for(var e=0,t=0;t<n;++t)r.charCodeAt(a>>3)&1<<(7&a)&&(e|=1<<t),++a;return e}(u))===i){c=void 0,s=[],u=n+1;for(var c=0;c<i;++c)s[c]=[c];s[i]=[],s[l]=null}else{if(e===l)break;if(e<s.length)t!==i&&s.push(s[t].concat(s[e][0]));else{if(e!==s.length)throw new Error("Invalid LZW code.");s.push(s[t].concat(s[t][0]))}o.push.apply(o,s[e]),s.length===1<<u&&u<12&&u++}return o}function Bn(n){var e=this;e.data=n,e.len=e.data.length,e.pos=0,e.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return n instanceof Uint8Array?n[this.pos++]:255&n.charCodeAt(this.pos++)},e.readBytes=function(n){for(var e=[],t=0;t<n;++t)e.push(this.readByte());return e},e.read=function(n){for(var e="",t=0;t<n;++t)e+=String.fromCharCode(this.readByte());return e},e.readUnsigned=function(){var n=this.readBytes(2);return(n[1]<<8)+n[0]}}function Ln(o,i){i=i||{};function l(){for(var n,e="";n=o.readByte(),e+=o.read(n),0!==n;);return e}var r=function(n){for(var e=[],t=0;t<n;++t)e.push(o.readBytes(3));return e},e=function(n){function e(n){var e;o.readByte(),n.identifier=o.read(8),n.authCode=o.read(3),"NETSCAPE"===n.identifier?(e=n,o.readByte(),e.unknown=o.readByte(),e.iterations=o.readUnsigned(),e.terminator=o.readByte(),i.app&&i.app.NETSCAPE&&i.app.NETSCAPE(e)):((e=n).appData=l(),i.app&&i.app[e.identifier]&&i.app[e.identifier](e))}var t,r;switch(n.label=o.readByte(),n.label){case 249:n.extType="gce",a=n,o.readByte(),r=Dn(o.readByte()),a.reserved=r.splice(0,3),a.disposalMethod=An(r.splice(0,3)),a.userInput=r.shift(),a.transparencyGiven=r.shift(),a.delayTime=o.readUnsigned(),a.transparencyIndex=o.readByte(),a.terminator=o.readByte(),i.gce&&i.gce(a);break;case 254:n.extType="com",(r=n).comment=l(),i.com&&i.com(r);break;case 1:n.extType="pte";var a=n;o.readByte(),a.ptHeader=o.readBytes(12),a.ptData=l(),i.pte&&i.pte(a);break;case 255:n.extType="app",e(n);break;default:n.extType="unknown",(t=n).data=l(),i.unknown&&i.unknown(t)}},t=function(n){function e(n,e){for(var t=new Array(n.length),r=n.length/e,a=[0,4,2,1],o=[8,8,4,2],i=0,l=0;l<4;++l)for(var u=a[l];u<r;u+=o[l]){var s=u,c=i;c=n.slice(c*e,(c+1)*e),t.splice.apply(t,[s*e,e].concat(c)),++i}return t}n.leftPos=o.readUnsigned(),n.topPos=o.readUnsigned(),n.width=o.readUnsigned(),n.height=o.readUnsigned();var t=Dn(o.readByte()),t=(n.lctFlag=t.shift(),n.interlaced=t.shift(),n.sorted=t.shift(),n.reserved=t.splice(0,2),n.lctSize=An(t.splice(0,3)),n.lctFlag&&(n.lct=r(1<<n.lctSize+1)),n.lzwMinCodeSize=o.readByte(),l());n.pixels=Sn(n.lzwMinCodeSize,t),n.interlaced&&(n.pixels=e(n.pixels,n.width)),i.img&&i.img(n)},a=function(){var n={};switch(n.sentinel=o.readByte(),String.fromCharCode(n.sentinel)){case"!":n.type="ext",e(n);break;case",":n.type="img",t(n);break;case";":n.type="eof",i.eof&&i.eof(n);break;default:throw new Error("Unknown block: 0x"+n.sentinel.toString(16))}"eof"!==n.type&&a()},n={};if(n.sig=o.read(3),n.ver=o.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=o.readUnsigned(),n.height=o.readUnsigned();var u=Dn(o.readByte());n.gctFlag=u.shift(),n.colorRes=An(u.splice(0,3)),n.sorted=u.shift(),n.gctSize=An(u.splice(0,3)),n.bgColor=o.readByte(),n.pixelAspectRatio=o.readByte(),n.gctFlag&&(n.gct=r(1<<n.gctSize+1)),i.hdr&&i.hdr(n),a()}var zn=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),$=5793;function Fn(){}function qn(e,t,n,r,a,u,s,o,c){n.precision,n.samplesPerLine,n.scanLines;var i=n.mcusPerLine,G=n.progressive,R=(n.maxH,n.maxV,t),l=0,f=0;function h(){if(0<f)return l>>--f&1;if(255==(l=e[t++])){var n=e[t++];if(n)throw"unexpected marker: "+(l<<8|n).toString(16)}return l>>>(f=7)}function d(n){for(var e,t=n;null!=(e=h());){if("number"==typeof(t=t[e]))return t;if("object"!=typeof t)throw"invalid huffman sequence"}return null}function p(n){for(var e=0;0<n;){var t=h();if(null==t)return;e=e<<1|t,--n}return e}function m(n){var e=p(n);return 1<<n-1<=e?e:e+(-1<<n)+1}var g=0;var v,y=0;var w,b,x,k,C,T,I,P,A,U,D,S,_,B,O,L,z,F=r.length,X=G?0===u?0===o?function(n,e){var t=0===(t=d(n.huffmanTableDC))?0:m(t)<<c;e[0]=n.pred+=t}:function(n,e){e[0]|=h()<<c}:0===o?function(n,e){if(0<g)--g;else for(var t=u,r=s;t<=r;){var a=d(n.huffmanTableAC),o=15&a,a=a>>4;if(0==o){if(a<15){g=p(a)+(1<<a)-1;break}t+=16}else e[zn[t+=a]]=m(o)*(1<<c),t++}}:function(n,e){for(var t=u,r=s,a=0;t<=r;){var o=zn[t];switch(y){case 0:var i=d(n.huffmanTableAC),l=15&i,a=i>>4;if(0==l)y=a<15?(g=p(a)+(1<<a),4):(a=16,1);else{if(1!=l)throw"invalid ACn encoding";v=m(l),y=a?2:3}continue;case 1:case 2:e[o]?e[o]+=h()<<c:0===--a&&(y=2==y?3:0);break;case 3:e[o]?e[o]+=h()<<c:(e[o]=v<<c,y=0);break;case 4:e[o]&&(e[o]+=h()<<c)}t++}4===y&&0===--g&&(y=0)}:function(n,e){for(var t=0===(t=d(n.huffmanTableDC))?0:m(t),r=(e[0]=n.pred+=t,1);r<64;){var a=d(n.huffmanTableAC),o=15&a,a=a>>4;if(0==o){if(a<15)break;r+=16}else e[zn[r+=a]]=m(o),r++}},q=0,E=1==F?r[0].blocksPerLine*r[0].blocksPerColumn:i*n.mcusPerColumn;for(a=a||E;q<E;){for(b=0;b<F;++b)r[b].pred=0;if(g=0,1==F)for(w=r[0],C=0;C<a;++C)O=X,z=void 0,z=(L=q)/(B=w).blocksPerLine|0,L%=B.blocksPerLine,O(B,B.blocks[z][L]),++q;else for(C=0;C<a;++C){for(b=0;b<F;++b)for(I=(w=r[b]).h,P=w.v,x=0;x<P;++x)for(k=0;k<I;++k)U=X,S=x,_=k,S=((D=q)/i|0)*(A=w).v+S,D=D%i*A.h+_,U(A,A.blocks[S][D]);if(++q===E)break}if(f=0,(T=e[t]<<8|e[t+1])<65280)throw"marker was not found";if(!(65488<=T&&T<=65495))break;t+=2}return t-R}function En(n,e){var t=[],r=e.blocksPerLine,a=e.blocksPerColumn,o=r<<3,i=new Int32Array(64),l=new Uint8Array(64);for(var u=0;u<a;++u){var s=u<<3;for(F=0;F<8;++F)t.push(new Uint8Array(o));for(var c=0;c<r;++c){D=A=P=I=T=w=y=v=g=m=p=d=h=f=C=k=x=b=void 0;for(var f,h,d,p,m,g,v,y,w,b=e.blocks[u][c],x=l,k=i,C=e.quantizationTable,T=k,I=0;I<64;++I)T[I]=b[I]*C[I];for(I=0;I<8;++I){var P=8*I;0==T[1+P]&&0==T[2+P]&&0==T[3+P]&&0==T[4+P]&&0==T[5+P]&&0==T[6+P]&&0==T[7+P]?(w=$*T[0+P]+512>>10,T[0+P]=w,T[1+P]=w,T[2+P]=w,T[3+P]=w,T[4+P]=w,T[5+P]=w,T[6+P]=w,T[7+P]=w):(f=$*T[0+P]+128>>8,h=$*T[4+P]+128>>8,d=T[2+P],p=T[6+P],m=2896*(T[1+P]-T[7+P])+128>>8,y=2896*(T[1+P]+T[7+P])+128>>8,g=T[3+P]<<4,w=f-h+1>>1,f=f+h+1>>1,h=w,w=3784*d+1567*p+128>>8,d=1567*d-3784*p+128>>8,p=w,w=m-(v=T[5+P]<<4)+1>>1,m=m+v+1>>1,v=w,w=y+g+1>>1,g=y-g+1>>1,y=w,w=f-p+1>>1,f=f+p+1>>1,p=w,w=h-d+1>>1,h=h+d+1>>1,d=w,w=2276*m+3406*y+2048>>12,m=3406*m-2276*y+2048>>12,y=w,w=799*g+4017*v+2048>>12,g=4017*g-799*v+2048>>12,v=w,T[0+P]=f+y,T[7+P]=f-y,T[1+P]=h+v,T[6+P]=h-v,T[2+P]=d+g,T[5+P]=d-g,T[3+P]=p+m,T[4+P]=p-m)}for(I=0;I<8;++I){var A=I;0==T[8+A]&&0==T[16+A]&&0==T[24+A]&&0==T[32+A]&&0==T[40+A]&&0==T[48+A]&&0==T[56+A]?(w=$*k[I+0]+8192>>14,T[0+A]=w,T[8+A]=w,T[16+A]=w,T[24+A]=w,T[32+A]=w,T[40+A]=w,T[48+A]=w,T[56+A]=w):(f=$*T[0+A]+2048>>12,h=$*T[32+A]+2048>>12,d=T[16+A],p=T[48+A],m=2896*(T[8+A]-T[56+A])+2048>>12,y=2896*(T[8+A]+T[56+A])+2048>>12,g=T[24+A],w=f-h+1>>1,f=f+h+1>>1,h=w,w=3784*d+1567*p+2048>>12,d=1567*d-3784*p+2048>>12,p=w,w=m-(v=T[40+A])+1>>1,m=m+v+1>>1,v=w,w=y+g+1>>1,g=y-g+1>>1,y=w,w=f-p+1>>1,f=f+p+1>>1,p=w,w=h-d+1>>1,h=h+d+1>>1,d=w,w=2276*m+3406*y+2048>>12,m=3406*m-2276*y+2048>>12,y=w,w=799*g+4017*v+2048>>12,g=4017*g-799*v+2048>>12,v=w,T[0+A]=f+y,T[56+A]=f-y,T[8+A]=h+v,T[48+A]=h-v,T[16+A]=d+g,T[40+A]=d-g,T[24+A]=p+m,T[32+A]=p-m)}for(I=0;I<64;++I){var D=128+(T[I]+8>>4);x[I]=D<0?0:255<D?255:D}for(var S=0,B=c<<3,L=0;L<8;++L)for(var z=t[s+L],F=0;F<8;++F)z[B+F]=l[S++]}}return t}function S(n){return n<0?0:255<n?255:n}async function Gn(n,e){var t=new Fn;return t.parse(new Uint8Array(n)),n={width:t.width,height:t.height,data:new Uint8Array(t.width*t.height<<2)},t.copyToImageData(n),n}function Rn(n,e,t){var r,a=[];if(0<=n)for(r=0;r<n;++r)a.push(e[t.pos++]);else for(r=0;n<r;--r)a.push(e[t.pos++]);return a}Fn[n]={constructor:Fn,parse:function(e){var t=0;e.length;function n(){var n=e[t]<<8|e[t+1];return t+=2,n}var r,a,o=null,i=null,l=[],u=[],s=[],c=[],f=n();if(65496!=f)throw"SOI not found";for(f=n();65497!=f;){switch(f){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:void 0,L=void 0,L=n(),L=e.subarray(t,t+L-2),t+=L.length;65504===f&&74===L[0]&&70===L[1]&&73===L[2]&&70===L[3]&&0===L[4]&&(o={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),65518===f&&65===L[0]&&100===L[1]&&111===L[2]&&98===L[3]&&101===L[4]&&0===L[5]&&(i={version:L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var G=n()+t-2;t<G;){var h=e[t++],d=new Int32Array(64);if(h>>4==0)for(F=0;F<64;++F)d[zn[F]]=e[t++];else{if(h>>4!=1)throw"DQT: invalid table spec";for(F=0;F<64;++F)d[zn[F]]=n()}l[15&h]=d}break;case 65472:case 65473:case 65474:n(),(r={}).extended=65473===f,r.progressive=65474===f,r.precision=e[t++],r.scanLines=n(),r.samplesPerLine=n(),r.components={},r.componentsOrder=[];var R=e[t++];for(z=0;z<R;++z){var p=e[t],U=e[t+1]>>4,_=15&e[t+1],O=e[t+2];r.componentsOrder.push(p),r.components[p]={h:U,v:_,quantizationIdx:O},t+=3}S=D=A=P=I=T=C=k=b=w=m=x=y=v=g=void 0;var m,g=r,v=0,y=0;for(m in g.components)g.components.hasOwnProperty(m)&&(v<(x=g.components[m]).h&&(v=x.h),y<x.v)&&(y=x.v);var w=W.ceil(g.samplesPerLine/8/v),b=W.ceil(g.scanLines/8/y);for(m in g.components)if(g.components.hasOwnProperty(m)){for(var x=g.components[m],k=W.ceil(W.ceil(g.samplesPerLine/8)*x.h/v),C=W.ceil(W.ceil(g.scanLines/8)*x.v/y),T=w*x.h,I=b*x.v,P=[],A=0;A<I;++A){for(var D=[],S=0;S<T;++S)D.push(new Int32Array(64));P.push(D)}x.blocksPerLine=k,x.blocksPerColumn=C,x.blocks=P}g.maxH=v,g.maxV=y,g.mcusPerLine=w,g.mcusPerColumn=b,u.push(r);break;case 65476:var X=n();for(z=2;z<X;){var M=e[t++],N=new Uint8Array(16),B=0;for(F=0;F<16;++F,++t)B+=N[F]=e[t];var Y=new Uint8Array(B);for(F=0;F<B;++F,++t)Y[F]=e[t];z+=17+B,(M>>4==0?c:s)[15&M]=function(n,e){for(var t,r=0,a=[],o=16;0<o&&!n[o-1];)--o;a.push({children:[],index:0});for(var i,l=a[0],u=0;u<o;++u){for(t=0;t<n[u];++t){for((l=a.pop()).children[l.index]=e[r];0<l.index;)l=a.pop();for(++l.index,a.push(l);a.length<=u;)a.push(i={children:[],index:0}),l.children[l.index]=i.children,l=i;r++}u+1<o&&(a.push(i={children:[],index:0}),l.children[l.index]=i.children,l=i)}return a[0].children}(N,Y)}break;case 65501:n(),a=n();break;case 65498:n();var J=e[t++],j=[];for(z=0;z<J;++z){E=r.components[e[t++]];var H=e[t++];E.huffmanTableDC=c[H>>4],E.huffmanTableAC=s[15&H],j.push(E)}var L=e[t++],V=e[t++],Q=e[t++],V=qn(e,t,r,j,a,L,V,Q>>4,15&Q);t+=V;break;default:if(255==e[t-3]&&192<=e[t-2]&&e[t-2]<=254){t-=3;break}throw"unknown JPEG marker "+f.toString(16)}f=n()}if(1!=u.length)throw"only single frame JPEGs supported";for(var z=0;z<u.length;++z){var F,q=u[z].components;for(F in q)q[F].quantizationTable=l[q[F].quantizationIdx],delete q[F].quantizationIdx}this.width=r.samplesPerLine,this.height=r.scanLines,this.jfif=o,this.adobe=i,this.components=[];for(z=0;z<r.componentsOrder.length;++z){var E=r.components[r.componentsOrder[z]];this.components.push({lines:En(0,E),scaleX:E.h/r.maxH,scaleY:E.v/r.maxV})}},getData:function(n,e){var t,r,a,o,i,l,u,s,c,f,h,d,p,m,g,v,y,w,b,x,k,C=this.width/n,T=this.height/e,I=0,P=n*e*this.components.length,A=new Uint8Array(P);switch(this.components.length){case 1:for(t=this.components[0],f=0;f<e;++f)for(i=t.lines[0|f*t.scaleY*T],c=0;c<n;++c)h=i[0|c*t.scaleX*C],A[I++]=h;break;case 2:for(t=this.components[0],r=this.components[1],f=0;f<e;++f)for(i=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],c=0;c<n;++c)h=i[0|c*t.scaleX*C],A[I++]=h,h=l[0|c*r.scaleX*C],A[I++]=h;break;case 3:for(k=!0,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),t=this.components[0],r=this.components[1],a=this.components[2],f=0;f<e;++f)for(i=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],u=a.lines[0|f*a.scaleY*T],c=0;c<n;++c)x=k?(h=i[0|c*t.scaleX*C],d=l[0|c*r.scaleX*C],w=S(h+1.402*((p=u[0|c*a.scaleX*C])-128)),b=S(h-.3441363*(d-128)-.71413636*(p-128)),S(h+1.772*(d-128))):(w=i[0|c*t.scaleX*C],b=l[0|c*r.scaleX*C],u[0|c*a.scaleX*C]),A[I++]=w,A[I++]=b,A[I++]=x;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(k=!1,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),t=this.components[0],r=this.components[1],a=this.components[2],o=this.components[3],f=0;f<e;++f)for(i=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],u=a.lines[0|f*a.scaleY*T],s=o.lines[0|f*o.scaleY*T],c=0;c<n;++c)k?(h=i[0|c*t.scaleX*C],d=l[0|c*r.scaleX*C],p=u[0|c*a.scaleX*C],m=s[0|c*o.scaleX*C],g=255-S(h+1.402*(p-128)),v=255-S(h-.3441363*(d-128)-.71413636*(p-128)),y=255-S(h+1.772*(d-128))):(g=i[0|c*t.scaleX*C],v=l[0|c*r.scaleX*C],y=u[0|c*a.scaleX*C],m=s[0|c*o.scaleX*C]),A[I++]=g,A[I++]=v,A[I++]=y,A[I++]=m;break;default:throw"Unsupported color mode"}return A},copyToImageData:function(n){var e,t,r,a,o,i,l,u,s=n.width,c=n.height,f=n.data,h=this.getData(s,c),d=0,p=0;switch(this.components.length){case 1:for(t=0;t<c;++t)for(e=0;e<s;++e)r=h[d++],f[p++]=r,f[p++]=r,f[p++]=r,f[p++]=255;break;case 3:for(t=0;t<c;++t)for(e=0;e<s;++e)i=h[d++],l=h[d++],u=h[d++],f[p++]=i,f[p++]=l,f[p++]=u,f[p++]=255;break;case 4:for(t=0;t<c;++t)for(e=0;e<s;++e)a=h[d++],o=h[d++],r=h[d++],i=255-S(a*(1-(a=h[d++])/255)+a),l=255-S(o*(1-a/255)+a),u=255-S(r*(1-a/255)+a),f[p++]=i,f[p++]=l,f[p++]=u,f[p++]=255;break;default:throw"Unsupported color mode"}}};var Un=function(n,e){var t=n[e.pos++];return n[e.pos++]|t<<8},h=function(n,e){var t=n[e.pos++],r=n[e.pos++],a=n[e.pos++];return n[e.pos++]|a<<8|r<<16|t<<24};function _n(){}_n[n]={constructor:_n,data:null,pos:null,palette:null,imgData:null,transparency:null,animation:null,text:null,width:0,height:0,bits:null,colorType:null,compressionMethod:null,filterMethod:null,interlaceMethod:null,hasAlphaChannel:null,colors:null,colorSpace:null,pixelBitlength:null,readData:function(n){var e,t,r,a,o,i,l,u,s,c,f=this;for(f.data=n,f.pos=8,f.palette=[],f.imgData=[],f.transparency={},f.animation=null,f.text={},r=null;;){switch(e=h(f.data,f),o=function(){var n,e=[];for(n=0;n<4;++n)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(f).join("")){case"IHDR":f.width=h(f.data,f),f.height=h(f.data,f),f.bits=f.data[f.pos++],f.colorType=f.data[f.pos++],f.compressionMethod=f.data[f.pos++],f.filterMethod=f.data[f.pos++],f.interlaceMethod=f.data[f.pos++];break;case"acTL":f.animation={numFrames:h(f.data,f),numPlays:h(f.data,f)||U,frames:[]};break;case"PLTE":f.palette=Rn(e,f.data,f);break;case"fcTL":r&&f.animation.frames.push(r),f.pos+=4,r={width:h(f.data,f),height:h(f.data,f),xOffset:h(f.data,f),yOffset:h(f.data,f)},l=Un(f.data,f),a=Un(f.data,f)||100,r.delay=1e3*l/a,r.disposeOp=f.data[f.pos++],r.blendOp=f.data[f.pos++],r.data=[];break;case"IDAT":case"fdAT":for("fdAT"===o&&(f.pos+=4,e-=4),n=(null!=r?r.data:void 0)||f.imgData,u=0;0<=e?u<e:e<u;0<=e?++u:--u)n.push(f.data[f.pos++]);break;case"tRNS":switch(f.transparency={},f.colorType){case 3:if(f.transparency.indexed=Rn(e,f.data,f),0<(i=255-f.transparency.indexed.length))for(s=0;0<=i?s<i:i<s;0<=i?++s:--s)f.transparency.indexed.push(255);break;case 0:f.transparency.grayscale=Rn(e,f.data,f)[0];break;case 2:f.transparency.rgb=Rn(e,f.data,f)}break;case"tEXt":a=(l=Rn(e,f.data,f)).indexOf(0),c=String.fromCharCode.apply(String,l.slice(0,a)),f.text[c]=String.fromCharCode.apply(String,l.slice(a+1));break;case"IEND":return r&&f.animation.frames.push(r),f.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(f),f.hasAlphaChannel=4===(c=f.colorType)||6===c,t=f.colors+(f.hasAlphaChannel?1:0),f.pixelBitlength=f.bits*t,f.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(f),void(f.imgData=new Uint8Array(f.imgData));default:f.pos+=e}if(f.pos+=4,f.pos>f.data.length)throw new Error("Incomplete or corrupt PNG file")}},decodePixels:async function(n){var e,t,r,a,o,i,l,u,s,c,f,h,d,p,m,g,v,y,w,b,x,k,C,T;if(0===(n=null==n?this.imgData:n).length)return new Uint8Array(0);for(k=n,T={chunkSize:null==C?16384:C},n=await new Promise(function(t){require("zlib").inflate(k instanceof Buffer?k:Buffer.from(k),T,function(n,e){t(n?null:e)})}),p=(c=this.pixelBitlength/8)*this.width,f=new Uint8Array(p*this.height),i=n.length,t=h=d=0;h<i;){switch(n[h++]){case 0:for(a=v=0;v<p;a=v+=1)f[t++]=n[h++];break;case 1:for(a=y=0;y<p;a=y+=1)e=n[h++],o=a<c?0:f[t-c],f[t++]=(e+o)%256;break;case 2:for(a=w=0;w<p;a=w+=1)e=n[h++],r=(a-a%c)/c,m=d&&f[(d-1)*p+r*c+a%c],f[t++]=(m+e)%256;break;case 3:for(a=b=0;b<p;a=b+=1)e=n[h++],r=(a-a%c)/c,o=a<c?0:f[t-c],m=d&&f[(d-1)*p+r*c+a%c],f[t++]=(e+Math.floor((o+m)/2))%256;break;case 4:for(a=x=0;x<p;a=x+=1)e=n[h++],r=(a-a%c)/c,o=a<c?0:f[t-c],0===d?m=g=0:(m=f[(d-1)*p+r*c+a%c],g=r&&f[(d-1)*p+(r-1)*c+a%c]),s=o+m-g,l=Math.abs(s-o),u=Math.abs(s-m),s=Math.abs(s-g),f[t++]=(e+(l<=u&&l<=s?o:u<=s?m:g))%256;break;default:throw new Error("Invalid filter algorithm: "+n[h-1])}d++}return f},decodePalette:function(){for(var n,e,t=this.palette,r=this.transparency.indexed||[],a=new Uint8Array((r.length||0)+t.length),o=0,i=(t.length,0),l=n=0,u=t.length;n<u;l=n+=3)a[o++]=t[l],a[o++]=t[l+1],a[o++]=t[l+2],a[o++]=null!=(e=r[i++])?e:255;return a},copyToImageData:function(n,e){var t,r,a,o,i,l,u,s,c=this,f=c.colors,h=null,d=c.hasAlphaChannel;if(c.palette.length&&(h=null!=(s=c._decodedPalette)?s:c._decodedPalette=c.decodePalette(),f=4,d=!0),l=(t=n.data||n).length,a=h||e,r=o=0,1===f)for(;r<l;)i=h?4*e[r/4]:o,u=a[i++],t[r++]=u,t[r++]=u,t[r++]=u,t[r++]=d?a[i++]:255,o=i;else for(;r<l;)i=h?4*e[r/4]:o,t[r++]=a[i++],t[r++]=a[i++],t[r++]=a[i++],t[r++]=d?a[i++]:255,o=i},decode:async function(){var n=new Uint8Array(this.width*this.height<<2);return this.copyToImageData(n,await this.decodePixels()),n}};var On=[137,80,78,71,13,10,26,10],Xn=2,Mn=6,Nn={0:1,2:3,3:1,4:2,6:4};function b(n){return W.max(0,W.min(255,W.round(n)))}function Yn(n,e,t){var r=n+e-t,a=W.abs(r-n),o=W.abs(r-e),r=W.abs(r-t);return a<=o&&a<=r?n:o<=r?e:t}function Jn(n,e,t,r,a){n.copy(r,a,e,e+t)}function jn(n,e,t){for(var r=0,a=e+t,o=e;o<a;o++)r+=W.abs(n[o]);return r}function Hn(n,e,t,r,a,o){for(var i=0;i<t;i++){var l=o<=i?n[e+i-o]:0,l=n[e+i]-l;r[a+i]=255&l}}function Vn(n,e,t,r){for(var a=0,o=0;o<t;o++){var i=r<=o?n[e+o-r]:0,i=n[e+o]-i;a+=W.abs(i)}return a}function Qn(n,e,t,r,a){for(var o=0;o<t;o++){var i=0<e?n[e+o-t]:0,i=n[e+o]-i;r[a+o]=255&i}}function Wn(n,e,t){for(var r=0,a=e+t,o=e;o<a;o++){var i=0<e?n[o-t]:0,i=n[o]-i;r+=W.abs(i)}return r}function $n(n,e,t,r,a,o){for(var i=0;i<t;i++){var l=o<=i?n[e+i-o]:0,u=0<e?n[e+i-t]:0,l=n[e+i]-(l+u>>1);r[a+i]=255&l}}function Zn(n,e,t,r){for(var a=0,o=0;o<t;o++){var i=r<=o?n[e+o-r]:0,l=0<e?n[e+o-t]:0,i=n[e+o]-(i+l>>1);a+=W.abs(i)}return a}function Kn(n,e,t,r,a,o){for(var i=0;i<t;i++){var l=o<=i?n[e+i-o]:0,u=0<e?n[e+i-t]:0,s=0<e&&o<=i?n[e+i-(t+o)]:0,l=n[e+i]-Yn(l,u,s);r[a+i]=255&l}}function ne(n,e,t,r){for(var a=0,o=0;o<t;o++){var i=r<=o?n[e+o-r]:0,l=0<e?n[e+o-t]:0,u=0<e&&r<=o?n[e+o-(t+r)]:0,i=n[e+o]-Yn(i,l,u);a+=W.abs(i)}return a}var ee=null;function te(n){for(var e=function(){var n,e,t;if(null==ee)for(ee=new Int32Array(256),n=0;n<256;++n){for(t=n,e=0;e<8;++e)t=1&t?3988292384^t>>>1:t>>>1;ee[n]=t}return ee}(),t=-1,r=0,a=n.length;r<a;++r)t=e[255&(t^n[r])]^t>>>8;return-1^t}function re(n,e=null,t=0){(e=null==e?Buffer.alloc(1):e)[t=null==t?0:t]=255&n}function ae(n,e=null,t=0){return(e=null==e?Buffer.alloc(4):e).writeUInt32BE(4294967295&n,t=null==t?0:t),e}function oe(n){if((n=n||{}).deflateChunkSize=W.max(1024,parseInt(n.deflateChunkSize||32768)),n.deflateLevel=W.min(9,W.max(0,parseInt(null!=n.deflateLevel?n.deflateLevel:9))),n.deflateStrategy=W.min(3,W.max(0,parseInt(null!=n.deflateStrategy?n.deflateStrategy:3))),n.inputHasAlpha=!(null!=n.inputHasAlpha&&!n.inputHasAlpha),n.bitDepth=8,n.colorType=W.min(6,W.max(0,parseInt("number"==typeof n.colorType?n.colorType:Mn))),n.colorType!==Xn&&n.colorType!==Mn)throw new Error("option color type:"+n.colorType+" is not supported at present");this._options=n}async function ie(n,e,t,r,a){return a=a||{},"base64"!==n?new oe(a).toPNG(e,t,r):u?"data:image/png;base64,"+(await new oe(a).toPNG(e,t,r)).toString("base64"):i?(a=(n=document.createElement("canvas")).getContext("2d"),n.width=t,n.height=r,a.createImageData(t,r),(t=a.getImageData(0,0,t,r)).data.set(e,0),a.putImageData(t,0,0),n.toDataURL("image/png")):""}function l(){var r=this,e="",a=0,o=0,i=null;P(r,"width",{get:function(){return a},set:function(n){}}),P(r,"height",{get:function(){return o},set:function(n){}}),P(r,"src",{get:function(){return e},set:function(n){var t;e=n,u&&(t=e.toUpperCase().split(".").pop(),l.Reader[t]||H('"'+e+'" does not end in one of gif, jpg, jpeg, png!'),require("fs").readFile(e,function(n,e){if(n){if(r.onerror)return void r.onerror(n);throw n}l.Reader[t](e).then(function(n){a=(i=n).width,o=n.height,r.onload&&r.onload()}).catch(function(n){if(!r.onerror)throw n;r.onerror(n)})}))}}),r.getImageData=function(){return i}}function o(n,e){var t,r,a=this;if(!(a instanceof o))return new o(n,e);t={width:n,height:e,data:new D(n*e<<2)},r=new F(n,e,F.setRGBATo(t)),P(a,"width",{get:function(){return n},set:function(n){}}),P(a,"height",{get:function(){return e},set:function(n){}}),a.getContext=function(n){return r.getContext(n)},a.toDataURL=async function(n,e){return ie("base64",t.data,t.width,t.height)},a.toBlob=function(e){"undefined"!=typeof Blob&&e&&ie("binary",t.data,t.width,t.height).then(function(n){e(new Blob(n,{type:"image/png"}))}).catch(function(){})},a.toPNG=async function(){return ie("binary",t.data,t.width,t.height)}}return oe[n]={_options:null,constructor:oe,toPNG:async function(n,e,t){var r,a,o=[];if(o.push(Buffer.from(On)),o.push(this.packIHDR(e,t)),this._options.gamma&&o.push(this.packGAMA(this._options.gamma)),n=this.filterData(Buffer.from(n),e,t),e=this.getDeflateOptions(),r=n,t=e.level,n=e.chuckSize,a={chunkSize:null==n?16384:n},null!=t&&(a.level=t),(e=await new Promise(function(t){require("zlib").deflate(r instanceof Buffer?r:Buffer.from(r),a,function(n,e){t(n?null:e)})}))&&e.length)return o.push(this.packIDAT(Buffer.from(e))),e=null,o.push(this.packIEND()),Buffer.concat(o);throw new Error("bad png - invalid compressed data response")},getDeflateOptions:function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},filterData:function(n,e,t){return this._filter(this._bitPack(n,e,t),e,t)},packIHDR:function(n,e){var t=Buffer.alloc(13);return ae(n,t,0),ae(e,t,4),re(this._options.bitDepth,t,8),re(this._options.colorType,t,9),re(0,t,10),re(0,t,11),re(0,t,12),this._packChunk(1229472850,t)},packGAMA:function(n){return this._packChunk(1732332865,ae(W.floor(1e5*parseFloat(n))))},packIDAT:function(n){return this._packChunk(1229209940,n)},packIEND:function(){return this._packChunk(1229278788,null)},_bitPack:function(n,e,t){var r=this._options.inputHasAlpha,a=this._options.colorType===Mn;if(r&&a)return n;if(!r&&!a)return n;for(var o,i,l,u,s,c=a?4:3,f=Buffer.alloc(e*t*c),h=r?4:3,d=0,p=0,m=this._options.bgColor||{},g=b(null!=m.red?m.red:255),v=b(null!=m.green?m.green:255),y=b(null!=m.blue?m.blue:255),w=0;w<t;w++)for(o=0;o<e;o++)i=n[d],l=n[d+1],u=n[d+2],r?(s=n[d+3],a||(i=(1-(s/=255))*g+s*i,l=(1-s)*v+s*l,u=(1-s)*y+s*u)):s=255,f[p]=b(i),f[p+1]=b(l),f[p+2]=b(u),a&&(f[p+3]=b(s)),d+=h,p+=c;return f},_filter:function(n,e,t){for(var r,a,o,i=[Jn,Hn,Qn,$n,Kn],l=[jn,Vn,Wn,Zn,ne],u=[0],s=Nn[this._options.colorType],c=e*s,f=0,h=0,d=Buffer.alloc((1+c)*t),p=u[0],m=u.length,g=0;g<t;g++){if(1<m)for(a=1/0,r=0;r<m;r++)(o=l[u[r]](n,h,c,s))<a&&(p=u[r],a=o);i[d[f]=p](n,h,c,d,++f,s),f+=c,h+=c}return d},_packChunk:function(n,e){var t=e?e.length:0,r=Buffer.alloc(t+12);return ae(t,r,0),ae(n,r,4),e&&e.copy(r,8),[t,n=null,e]=[te(r.slice(4,r.length-4)),r,r.length-4],(n=null==n?Buffer.alloc(4):n).writeInt32BE(t,e=null==e?0:e),r}},l[n]={constructor:l,width:0,height:0,src:"",onload:null,onerror:null,getImageData:null},l.Reader={GIF:async function(n,e){var a,o=null,i={width:0,height:0,data:null};return Ln(new Bn(new Uint8Array(n)),{hdr:function(n){a=n},gce:function(n){o=n.transparencyGiven?n.transparencyIndex:null},img:function(n){var t=n.lctFlag?n.lct:a.gct,r=new D(n.width*n.height<<2);n.pixels.forEach(function(n,e){e<<=2;n!==o&&(r[e]=t[n][0],r[1+e]=t[n][1],r[2+e]=t[n][2],r[3+e]=255)}),i.width=n.width,i.height=n.height,i.data=r}}),i},JPG:Gn,JPEG:Gn,PNG:async function(n,e){var t=new _n;return t.readData(new Uint8Array(n)),{width:t.width,height:t.height,data:await t.decode()}}},o[n]={constructor:o,width:0,height:0,getContext:null,toDataURL:null,toBlob:null,toPNG:null},o.Image=l,o.RenderingContext2D=F.RenderingContext2D,o});