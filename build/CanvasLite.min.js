/**
*   CanvasLite
*   an html canvas implementation in pure JavaScript
*
*   @version 1.0.0 (2025-05-07 16:55:42)
*   https://github.com/foo123/CanvasLite
*
**/!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"CanvasLite",function(e){"use strict";var n="prototype",P=Object.defineProperty,c=Object[n].hasOwnProperty,t=Object[n].toString,f="undefined"!=typeof global&&"[object global]"===t.call(global),i="undefined"!=typeof window&&"[object Window]"===t.call(window),rn=Math,an=1/0,r=Number.EPSILON,a=rn.sqrt(2),A=isNaN,D=isFinite,W=function(n){return!A(n=+n)&&D(n)&&0<n},d=rn.PI,x=2*d,l=6,p=a,m=.5,E="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array,z=[0,0,0,0],L=/[MLHVCSQTAZ]/gi,Q=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g;function F(n,e,t,r){var a;if(!(this instanceof F))return new F(n,e,t,r);r=r||(t&&t.$target?F.getRGBAFrom(t.$target):function(n,e){return z}),a=new v(n,e,t,r),P(this,"width",{get:function(){return n},set:function(n){}}),P(this,"height",{get:function(){return e},set:function(n){}}),this.getContext=function(n){if("2d"===n)return a;Y('Unsupported context "'+n+'"')}}function v(B,S,m,d){var i,g,e,t,o,l,u,s,c,f,h,p,y,v,b,C,w=this,a=null,x=null,r=function(){a={}},k=function(n){for(var e in a){var t=a[e],e=e.split(",");n(+e[0],+e[1],t)}a=null},L=function(n,e,t){var r;0<=n&&n<B&&0<=e&&e<S&&0<t&&0<v&&(n=String(n)+","+String(e),e=a[n]||0,r=x?x[n]||0:1,e<(t*=v*r))&&(a[n]=t)},T=function(n,e,t){var r="clear"===b?z:i(n,e),a=3<r.length?r[3]:1;m(n,e,r[0],r[1],r[2],a*t,b)},I=function(n,e,t){var r="clear"===b?z:g(n,e),a=3<r.length?r[3]:1;m(n,e,r[0],r[1],r[2],a*t,b)},n=function(n){i=F.getRGBAFrom([0,0,0,1]),g=F.getRGBAFrom([0,0,0,1]),x=a=null,u="butt",s="miter",c=10,f=1,h=[],p=0,y=G.EYE(),v=1,b="source-over",e=[],C=new R(y),n||w.clearRect(0,0,B,S)};P(w,"strokeStyle",{get:function(){return""},set:function(n){i=n instanceof J||n instanceof j?n.getColorAt.bind(n):F.getRGBAFrom((n.substr&&n.split?Dn(n):n)||z)}}),P(w,"fillStyle",{get:function(){return""},set:function(n){g=n instanceof J||n instanceof j?n.getColorAt.bind(n):F.getRGBAFrom((n.substr&&n.split?Dn(n):n)||z)}}),P(w,"lineWidth",{get:function(){return f},set:function(n){W(n=+n)&&(f=n)}}),P(w,"lineCap",{get:function(){return u},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(u=n)}}),P(w,"lineJoin",{get:function(){return s},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(s=n)}}),P(w,"miterLimit",{get:function(){return c},set:function(n){!A(n=+n)&&D(n)&&0<=n&&(c=n)}}),P(w,"lineDashOffset",{get:function(){return p},set:function(n){!A(n=+n)&&D(n)&&(p=n)}}),P(w,"lineDash",{get:function(){return h.slice()},set:function(n){(n=1&(n=[].concat(n)).length?n.concat(n):n).filter(W).length===n.length&&(h=n)}}),w.getLineDash=function(){return w.lineDash},w.setLineDash=function(n){w.lineDash=n},P(w,"globalAlpha",{get:function(){return v},set:function(n){!A(n=+n)&&0<=n&&n<=1&&(v=n)}}),P(w,"globalCompositeOperation",{get:function(){return b},set:function(n){b=String(n)}}),w.save=function(){(e=e||[]).push([i,g,x,u,s,c,f,h,p,y,v,b])},w.restore=function(){var n;e&&e.length&&(n=e.pop(),i=n[0],g=n[1],x=n[2],u=n[3],s=n[4],c=n[5],f=n[6],h=n[7],p=n[8],C.transform=y=n[9],v=n[10],b=n[11])},w.reset=function(){n()},w.scale=function(n,e){C.transform=y=y.mul(G.scale(n,e))},w.rotate=function(n){C.transform=y=y.mul(G.rotate(n||0))},w.translate=function(n,e){C.transform=y=y.mul(G.translate(n||0,e||0))},w.transform=function(n,e,t,r,a,i){C.transform=y=y.mul(new G(n,t,a,e,r,i))},w.getTransform=function(){return y.clone()},w.setTransform=function(n,e,t,r,a,i){1<arguments.length?y=new G(n,t,a,e,r,i):n&&null!=n.a&&null!=n.f&&(y=new G(n.a,n.c,n.e,n.b,n.d,n.f)),C.transform=y},w.resetTransform=function(){C.transform=y=G.EYE()},w.beginPath=function(){C=new R(y)},w.closePath=function(){C.closePath()},w.moveTo=function(n,e){C.moveTo(n,e)},w.lineTo=function(n,e){C.lineTo(n,e)},w.rect=function(n,e,t,r){C.rect(n,e,t,r)},w.roundRect=function(n,e,t,r){C.roundRect.apply(C,arguments)},w.arc=function(n,e,t,r,a,i){C.arc(n,e,t,r,a,i)},w.ellipse=function(n,e,t,r,a,i,o,l){C.ellipse(n,e,t,r,a,i,o,l)},w.arcTo=function(n,e,t,r,a){C.arcTo(n,e,t,r,a)},w.quadraticCurveTo=function(n,e,t,r){C.quadraticCurveTo(n,e,t,r)},w.bezierCurveTo=function(n,e,t,r,a,i){C.bezierCurveTo(n,e,t,r,a,i)},w.clearRect=function(n,e,t,r){var a=b,i=v;b="clear",v=1,w.fill(new R(y).rect(n,e,t,r),"evenodd"),b=a,v=i},w.strokeRect=function(n,e,t,r){0<f&&w.stroke(new R(y).rect(n,e,t,r))},w.fillRect=function(n,e,t,r){w.fill(new R(y).rect(n,e,t,r),"evenodd")},w.stroke=function(n){var e,t;0<f&&(t=(n=n||C).transform,e=rn.abs(t.sx),t=rn.abs(t.sy),r(),en(L,n,f,h,p,u,s,c,e,t,0,0,B-1,S-1),k(T))},t=function(n,e){var t=B-1,r=S-1,a=(en(L,n,.5,[],0,"butt","bevel",0,1,1,0,0,t,r),L),i=0,o=0,l=t,t=r,u=n._sd;if(u.length){var s,c,f,h,d,p,m,g,y,v,b,w,x,k,C=u.length,T=new Array(C),I=u.ymin,P=u.ymax,A=0,D="evenodd"===e;for(I=rn.max(o,rn.round(I)),P=rn.min(t,rn.round(P));I<=P;++I){for(;A<C&&u[A][3]<I;)++A;if(C<=A)break;if((f=u[A])[1]>I)I=rn.floor(f[1]);else{for(v=f[0],b=f[2],d=f[1],p=f[3],y=N(d,p)?(w=!1,g=rn.min(v,b),rn.max(v,b)):g=w=(b-v)*(I-d)/(p-d)+v,f[8]=w,f[9]=0,T[0]=f,s=A+(c=1);s<C&&u[s][1]<=I;++s)(f=u[s])[3]>=I&&(v=f[0],b=f[2],d=f[1],p=f[3],y=N(d,p)?(w=!1,g=rn.min(g,v,b),rn.max(y,v,b)):(w=(b-v)*(I-d)/(p-d)+v,g=rn.min(g,w),rn.max(y,w)),f[8]=w,f[9]=0,T[c++]=f);if(h=hn(T,c),!(c<h+2||(g=rn.max(i,rn.round(g+.5)),(y=rn.min(l,rn.round(y-.5)))<g)))if(D)for(m=g;m<=y;++m){for(k=x=!1,s=0;s<c;++s)(f=T[s])[9]||!1!==(w=f[8])&&(w<m&&(x=!x),m<w)&&(k=!k);x&&k&&a(m,I,1)}else for(m=g;m<=y;++m){for(s=k=x=0;s<c;++s)(f=T[s])[9]||!1!==(w=f[8])&&(w<m||m<w)&&(h=dn(m,I,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),w<m&&(x+=h),m<w)&&(k+=h);x&&k&&a(m,I,1)}}}}},w.fill=function(n,e){!arguments.length||null==n&&null==e?(n=C,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof R?e="nonzero":(e=n,n=C)),e=String(e||"nonzero").toLowerCase(),r(),t(n=n||C,e="evenodd"!==e?"nonzero":e),k(I)},w.clip=function(n,e){!arguments.length||null==n&&null==e?(n=C,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof R?e="nonzero":(e=n,n=C)),"evenodd"!==(e=String(e||"nonzero").toLowerCase())&&(e="nonzero"),(n=n||C)===C&&(C=new R(y)),r(),t(n,e),x=a,a=null},w.isPointInStroke=function(n,r,a){arguments.length<3&&(a=r,r=n,n=C),r=r||0,a=a||0,n=n||C,r=rn.round(r),a=rn.round(a);var i=String(r)+","+String(a),o=!1;return en(function(n,e,t){r===n&&a===e&&0<(t*=x?x[i]||0:1)&&(o=!0)},n,f,h,p,u,s,c,n.transform.sx,n.transform.sy,null,null,null,null),o},w.isPointInPath=function(n,e,t,r){n instanceof R||(r=t,t=e,e=n,n=C),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var a=e||0,i=t||0,e=r,o=(t=n||C)._sd;if(!(!o.length||i<o.ymin||i>o.ymax)){for(var l,u,s,c,f,h,d,p,m,g,y,v,b,w=o.length,x=new Array(w),k=0,t="evenodd"===e;k<w&&o[k][3]<i;)++k;if(!(w<=k||(s=o[k])[1]>i)){for(m=s[0],g=s[2],f=s[1],h=s[3],p=N(f,h)?(y=!1,d=rn.min(m,g),rn.max(m,g)):d=y=(g-m)*(i-f)/(h-f)+m,s[8]=y,s[9]=0,x[0]=s,l=k+(u=1);l<w&&o[l][1]<=i;++l)(s=o[l])[3]>=i&&(m=s[0],g=s[2],f=s[1],h=s[3],p=N(f,h)?(y=!1,d=rn.min(d,m,g),rn.max(p,m,g)):(y=(g-m)*(i-f)/(h-f)+m,d=rn.min(d,y),rn.max(p,y)),s[8]=y,s[9]=0,x[u++]=s);if(c=hn(x,u),u<c+2)return!1!==x[0][8]&&_(a,x[0][8]);if(!(p<d||a<d||p<a)){if(t)for(b=v=!1,l=0;l<u;++l)(s=x[l])[9]||!1!==(y=s[8])&&(y<=a&&(v=!v),a<=y)&&(b=!b);else for(l=b=v=0;l<u;++l)(s=x[l])[9]||!1!==(y=s[8])&&(y<a||a<y)&&(c=dn(a,i,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),y<=a&&(v+=c),a<=y)&&(b+=c);if(v&&b)return!0}}}return!1},o=function(n,e,t,r,a,i,o){if(r=rn.min(r,e-1),a=rn.min(a,t-1),i=rn.min(i,e-1),o=rn.min(o,t-1),i<r||o<a)return new E(0);var l,u,s,c,f,h=new E((i-r+1)*(o-a+1)<<2);if(n)for(u=r,s=a,c=0;s<=o&&!(i<u&&(u=r,o<++s));c+=4,++u)h[c]=n[f=s*e+u<<2],h[c+1]=n[1+f],h[c+2]=n[2+f],h[c+3]=n[3+f];else for(u=r,s=a,c=0;s<=o&&!(i<u&&(u=r,o<++s));c+=4,++u)l=d(u,s),h[c]=X(l[0],0,255),h[c+1]=X(l[1],0,255),h[c+2]=X(l[2],0,255),h[c+3]=X(rn.round(255*l[3]),0,255);return h},l=function(n,e,t,r,a,i,o,l,u,s,c,f){var h,d,p;for(o=rn.min(o,a-1),l=rn.min(l,i-1),c=rn.min(c,e-1),f=rn.min(f,t-1),u=rn.min(u,a-1),s=rn.min(s,i-1),c-=o,f-=l,d=o,p=l;p<=s&&!(u<d&&(d=o,s<++p));++d)t<=p+f||e<=d+c||m(d+c,p+f,r[h=p*a+d<<2],r[1+h],r[2+h],r[3+h]/255,"copy")},w.drawImage=function(n,t,r,a,i,o,l,u,s){(n=(n=n instanceof V?n.getContext("2d").getImageData(0,0,n.width,n.height):n)&&"function"==typeof n.getImageData?n.getImageData():n)&&n.data||Y("Invalid image data in drawImage");var c,f,h=n.width,d=n.height,p=n.data,n=arguments.length,e=g;h&&d||Y("Invalid image data in drawImage"),t=t||0,r=r||0,n<4&&(a=h,i=d),n<6&&(o=t,l=r,u=a,s=i),c=y.inv(),f=[0,0],g=function(n,e){return c.transform(n,e,f),n=rn.round(t+(f[0]-o)*a/u),e=rn.round(r+(f[1]-l)*i/s),0<=n&&n<h&&0<=e&&e<d?[p[n=n+h*e<<2],p[1+n],p[2+n],p[3+n]/255]:z},w.fillRect(o,l,u,s),g=e},w.getImageData=function(n,e,t,r){var a=B,i=S;return null==e&&(e=0),null==t&&(t=a),null==r&&(r=i),n=rn.max(0,rn.min(n=null==n?0:n,a-1)),e=rn.max(0,rn.min(e,i-1)),t=rn.min(n+t-1,a-1),r=rn.min(e+r-1,i-1),{data:o(null,a,i,n,e,t,r),width:t-n+1,height:r-e+1}},w.putImageData=function(n,e,t){n&&n.data||Y("Invalid image data in putImageData");var r=n.width,a=n.height;l(0,B,S,n.data,r,a,0,0,r-1,a-1,e=null==e?0:e,t=null==t?0:t)},n(!0)}function R(n,f){var e,c,t,h,d,p,m,g,y,v=this,s=!0,b=[],w=null;P(v,"transform",{get:function(){return f.clone()},set:function(n){f=n}}),P(v,"_d",{get:function(){return b},set:function(n){}}),P(v,"_sd",{get:function(){return w=w||tn(b)},set:function(n){}}),v.moveTo=function(n,e){n=C([n,e],f);return n&&(b.push(n),s=!1),v},v.closePath=function(){var n,e,t,r,a,i;return b.length&&2<b[b.length-1].length&&(n=+b[b.length-1][0],e=b[b.length-1][1],t=+b[b.length-1][2],r=b[b.length-1][3],a=+b[b.length-1][b[b.length-1].length-2],i=b[b.length-1][b[b.length-1].length-1],_(n,a,1e-6)&&_(e,i,1e-6)?b[b.length-1][b[b.length-1].length-2]=new k(a,{join:[t,r]}):b[b.length-1].push(new k(n,{join:[t,r]}),e),b.push([n,e]),s=!1,w=null),v},v.lineTo=function(n,e){n=C([n,e],f);return n&&(s?(b.push(n),s=!1):(b[b.length-1].push(n[0],n[1]),w=null)),v},v.rect=function(n,e,t,r){t=C([n,e,n+t,e,n+t,e+r,n,e+r],f);return t?(t[0]=new k(+t[0],{lineCap:"butt",lineJoin:"miter"}),b.length&&b[b.length-1].length<=2?b[b.length-1]=t:b.push(t),w=null,v.closePath()):v},v.roundRect=function(n,e,t,r){var a,i,o,l,u,s,c=C([n,e,t,r]);return c?(((s=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<s.length)&&Y("Invalid radii in roundRect"),4===s.length?(a=s[0],i=s[1],o=s[2],l=s[3]):3===s.length?(a=s[0],i=s[1],l=s[1],o=s[2]):l=2===s.length?(a=s[0],o=s[0],i=s[1],s[1]):(a=s[0],i=s[0],o=s[0],s[0]),t<0&&(n+=t,t=-t,u=a,a=i,i=u,u=l,l=o,o=u),r<0&&(e+=r,r=-r,u=a,a=l,l=u,u=i,i=o,o=u),(s=rn.min(t/(a+i),r/(i+o),t/(o+l),r/(a+l)))<1&&(a*=s,i*=s,l*=s,o*=s),T(c=[],n+a,e,f),T(c,n+t-i,e,f),$(c,n+t-i,e,n+t,e,n+t,e+i,i,f),T(c,n+t,e+r-o,f),$(c,n+t,e+r-o,n+t,e+r,n+t-o,e+r,o,f),T(c,n+l,e+r,f),$(c,n+l,e+r,n,e+r,n,e+r-l,l,f),T(c,n,e+a,f),$(c,n,e+a,n,e,n+a,e,a,f),c[0]=new k(+c[0],{lineCap:"butt",lineJoin:"bevel"}),b.push(c),w=null,v.closePath()):v},v.arc=function(n,e,t,r,a,i){var o=C([n,e,t,r,a]);return o&&(t<0&&Y("Negative radius in arc"),(o=Z(n,e,t,t,0,r,a,i,f))[0]=new k(+o[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),o[o.length-2]=new k(+o[o.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),s?(b.push(o),s=!1):b[b.length-1].push.apply(b[b.length-1],o),w=null),v},v.ellipse=function(n,e,t,r,a,i,o,l){var u=C([n,e,t,r,a,i,o]);return u&&((t<0||r<0)&&Y("Negative radius in ellipse"),(u=Z(n,e,t,r,a,i,o,l,f))[0]=new k(+u[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),u[u.length-2]=new k(+u[u.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),s?(b.push(u),s=!1):b[b.length-1].push.apply(b[b.length-1],u),w=null),v},v.arcTo=function(n,e,t,r,a){n=C([n,e,t,r,a]);return n&&(a<0&&Y("Negative radius in arcTo"),s&&(b.push(f.transform(n[0],n[1])),s=!1),(n=K((e=f.inv().transform(+b[b.length-1][b[b.length-1].length-2],b[b.length-1][b[b.length-1].length-1]))[0],e[1],n[0],n[1],n[2],n[3],a,f))[0]=new k(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),b[b.length-1].push.apply(b[b.length-1],n),w=null),v},v.quadraticCurveTo=function(n,e,t,r){n=C([n,e,t,r],f);return n&&(s&&(b.push([n[0],n[1]]),s=!1),e=b[b.length-1].pop(),(n=nn([+b[b.length-1].pop(),e,n[0],n[1],n[2],n[3]],f))[0]=new k(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),b[b.length-1].push.apply(b[b.length-1],n),w=null),v},v.bezierCurveTo=function(n,e,t,r,a,i){n=C([n,e,t,r,a,i],f);return n&&(s&&(b.push([n[0],n[1]]),s=!1),e=b[b.length-1].pop(),(n=nn([+b[b.length-1].pop(),e,n[0],n[1],n[2],n[3],n[4],n[5]],f))[0]=new k(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new k(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),b[b.length-1].push.apply(b[b.length-1],n),w=null),v},v.addPath=function(n){return n instanceof R&&(e(n),w=null),v},v.dispose=function(){w=b=null},e=function(n){var t;n._d.reduce(function(n,e){return e&&e.length&&2<e.length&&(t=[+e[e.length-2],e[e.length-1]],n.push(e.slice())),n},b),s=!t||(b.push(t),!1)},1===arguments.length&&(n instanceof G?(f=n,n=null):f=null),f=(f=f instanceof G?f:null)||G.EYE(),n&&(n instanceof R?e(n):(n=n,c=v,t=I(String(n)).match(L),h=n.split(L),m=null,y=g=!(p=[(d=[0,0])[0],d[1]]),t&&t.forEach(function(n,e){var t,r,a,i,o,l,u=n===n.toLowerCase(),s=(I(h[e+1]||"").match(Q)||[]).map(mn);switch(n.toUpperCase()){case"M":for(l=!1;2<=s.length;)l?(t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),g=!0):(d[0]=(u?d[0]:0)+s.shift(),d[1]=(u?d[1]:0)+s.shift(),p=[d[0],d[1]],c.moveTo(d[0],d[1]),y=!0),l=!0;m=null;break;case"H":for(g=y||g;1<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),t[1]],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),y&&(g=!0),y=!0;m=null;break;case"V":for(g=y||g;1<=s.length;)r=[(t=[d[0],d[1]])[0],(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),y&&(g=!0),y=!0;m=null;break;case"L":for(g=y||g;2<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],c.lineTo(d[0],d[1]),y&&(g=!0),y=!0;m=null;break;case"A":for(y=g=!0;7<=s.length;)o={start:null,end:null,radiusX:s.shift(),radiusY:s.shift(),angle:s.shift(),largeArc:s.shift(),sweep:s.shift()},t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=r[0],d[1]=r[1],o.start=t,o.end=r,c.ellipse.apply(c,function(n,e,t,r,a,i,o,l,u){var s=u?rn.cos(u):1,c=u?rn.sin(u):0,f=s*(n-t)/2+c*(e-r)/2,h=-c*(n-t)/2+s*(e-r)/2,d=f*f,p=h*h,m=o*o,g=l*l,y=d/m+p/g;1<y&&(y=rn.sqrt(y),m=(o*=y)*o,g=(l*=y)*l);y=rn.sqrt(rn.abs((m*g-m*p-g*d)/(m*p+g*d)))*(a===i?-1:1),m=y*o*h/l,p=-y*l*f/o,g=s*m-c*p+(n+t)/2,d=c*m+s*p+(e+r)/2,a=M(pn(1,0,(f-m)/o,(h-p)/l)),y=pn((f-m)/o,(h-p)/l,(-f-m)/o,(-h-p)/l);y-=rn.floor(y/x)*x,!i&&0<y&&(y-=x);i&&y<0&&(y+=x);return[g,d,o,l,u,a,a+y,!i]}(o.start[0],o.start[1],o.end[0],o.end[1],o.largeArc,o.sweep,o.radiusX,o.radiusY,o.angle));m=null;break;case"Q":for(y=g=!0;4<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=a[0],d[1]=a[1],c.quadraticCurveTo(r[0],r[1],a[0],a[1]),m=["Q",t,r,a];break;case"T":for(y=g=!0;2<=s.length;)t=[d[0],d[1]],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],r=m&&"Q"===m[0]?[2*t[0]-m[2][0],2*t[1]-m[2][1]]:[t[0],t[1]],d[0]=a[0],d[1]=a[1],c.quadraticCurveTo(r[0],r[1],a[0],a[1]),m=["Q",t,r,a];break;case"C":for(y=g=!0;6<=s.length;)t=[d[0],d[1]],r=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],i=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],d[0]=i[0],d[1]=i[1],c.bezierCurveTo(r[0],r[1],a[0],a[1],i[0],i[1]),m=["C",t,r,a,i];break;case"S":for(y=g=!0;4<=s.length;)t=[d[0],d[1]],a=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],i=[(u?t[0]:0)+s.shift(),(u?t[1]:0)+s.shift()],r=m&&"C"===m[0]?[2*t[0]-m[3][0],2*t[1]-m[3][1]]:[t[0],t[1]],d[0]=i[0],d[1]=i[1],c.bezierCurveTo(r[0],r[1],a[0],a[1],i[0],i[1]),m=["C",t,r,a,i];break;case"Z":t=[d[0],d[1]],r=[p[0],p[1]],d[0]=r[0],d[1]=r[1],p=[d[0],d[1]],c.closePath(),y=g=!1,m=null}}),g&&c.moveTo(d[0],d[1])))}function G(n,e,t,r,a,i){var o=this,l=1,u=1;arguments.length&&(o.m11=n,o.m12=e,o.m13=t,o.m21=r,o.m22=a,o.m23=i),P(o,"a",{get:function(){return o.m11},set:function(n){o.m11=l=n}}),P(o,"c",{get:function(){return o.m12},set:function(n){o.m12=n}}),P(o,"e",{get:function(){return o.m13},set:function(n){o.m13=n}}),P(o,"b",{get:function(){return o.m21},set:function(n){o.m21=n}}),P(o,"d",{get:function(){return o.m22},set:function(n){o.m22=u=n}}),P(o,"f",{get:function(){return o.m23},set:function(n){o.m23=n}}),P(o,"is2D",{get:function(){return!0},set:function(n){}}),P(o,"isIdentity",{get:function(){return N(o.m11,1)&&N(o.m12,0)&&N(o.m13,0)&&N(o.m21,0)&&N(o.m22,1)&&N(o.m23,0)},set:function(n){}}),P(o,"sx",{get:function(){return l},set:function(n){l*=n}}),P(o,"sy",{get:function(){return u},set:function(n){u*=n}})}function k(n,e){this.value=n,this.params=e||null}function C(n,e){for(var t,r=0,a=n.length;r<a;++r)if(A(n[r])||!D(n[r]))return null;if(e)for(t=[0,0],r=0;r<a;r+=2)e.transform(n[r],n[r+1],t),n[r]=t[0],n[r+1]=t[1];return n}function T(n,e,t,r){r=r?r.transform(e,t):[e,t];n.push(r[0],r[1])}function $(n,e,t,r,a,i,o,l,u){n.push.apply(n,K(e,t,r,a,i,o,l,u))}function ln(){return this.v}function un(n,e,t,r,a,i){var o,l,u,s,c=e.length;if((t=X(t,0,i-1))+1<i)for(s=a.l||0,l=a.i||0;l<c;++l){if(0<e[l]&&s+e[l]>t)return u=l<<1,r.i=l,N(o=X((t-(r.l=s))/e[l],0,1),0)?(r.x=n[u+0],r.y=n[u+1]):N(o,1)?(r.x=n[u+2],r.y=n[u+3]):(r.x=+n[u]+(+n[u+2]-n[u])*o,r.y=+n[u+1]+(+n[u+3]-n[u+1])*o),void(r.y={dx:+n[u+2]-n[u+0],dy:+n[u+3]-n[u+1],v:r.y,valueOf:ln});s+=e[l]}u=(l=c-1)<<1,r.i=l,r.l=i,r.x=n[u+2],r.y={dx:+n[u+2]-n[u+0],dy:+n[u+3]-n[u+1],v:n[u+3],valueOf:ln}}function sn(n,e,t,r,a,i,o,l,u,s,c,f,h,d,p,m,g,y,v){var b,w,x,k,C;return 0===l&&0===u?O(n,e,t,r,a,i,o,f,h,d,p,m,!0,!0,v):0===i&&0===o&&null!=g?O(n,e-l,t-(g*y<0?1:-1)*u,r+l,a+(g*y<0?1:-1)*u,2*l,2*u,1,h,d,p,m,!1,!1,v):(n=n,e=e,t=t,r=r,a=a,l=l,u=u,s=s,c=c,f=f,h=h,d=d,p=p,m=m,g=g,y=y,v=v,C=on(i=i,o=o),C=null!=v&&v<1&&0<v?v:(C<1?C:1)||1,r<e&&(v=e,e=r,r=v,v=t,t=a,a=v,v=s,s=c,c=v),v=a<t?-1:1,!N(i,0)||null!=g&&0!==g?!N(o,0)||null!=y&&0!==y?("square"===s&&(e-=+u,t-=v*l),"square"===c&&(r+=+u,a+=v*l),g=e-(i=+l),y=t+(o=v*u),b=e+i,x=t-o,w=r-i,k=a+o,i=r+i,o=a-o,"round"!==s&&"round"!==c||(f=on(l,u)),"round"===s?q(n,g,y,b,x,(g-+u+b-+u)/2,(y-v*l+x-v*l)/2,f,h,d,p,m,C):O(n,g,y,b,x,null,null,C,h,d,p,m),O(n,b,x,i,o,null,null,C,h,d,p,m),"round"===c?q(n,i,o,w,k,(+u+w+i+ +u)/2,(k+v*l+o+v*l)/2,f,h,d,p,m,C):O(n,i,o,w,k,null,null,C,h,d,p,m),O(n,w,k,g,y,null,null,C,h,d,p,m),function(n,e,t,r,a,i,o,l,u,s,c,f,h,d){var p,m,g,y,v,b,w,x,k=rn.min(t,a,o,u),C=rn.max(t,a,o,u),T=rn.min(e,r,i,l),I=rn.max(e,r,i,l),P=null!=s;if(P&&(C<c||h<k||I<s||f<T))return;null==d&&(d=1);if(N(k,C))return k=rn.round(k),T=rn.round(T),I=rn.round(I),B(n,T,k,I,k,s,c,f,h,d);k=rn.round(k),C=rn.round(C),P&&(k=rn.max(c,k),C=rn.min(h,C));if(!(C<k))for((v=[a<t?[r,a,e,t]:[e,t,r,a],o<a?[i,o,r,a]:[r,a,i,o],u<o?[l,u,i,o]:[i,o,l,u],t<u?[e,t,l,u]:[l,u,e,t]])[1][1]<v[0][1]&&(b=v[0],v[0]=v[1],v[1]=b),v[3][1]<v[2][1]&&(b=v[2],v[2]=v[3],v[3]=b),v[2][1]<v[0][1]&&(b=v[0],v[0]=v[2],v[2]=b),v[3][1]<v[1][1]&&(b=v[1],v[1]=v[3],v[3]=b),v[2][1]<v[1][1]&&(b=v[2],v[2]=v[1],v[1]=b),w=0;k<=C;++k){for(;w<4&&v[w][3]<k;)++w;if(4<=w)return;for(I=-(T=an),x=w;x<4;++x)g=v[x][0],p=v[x][1],y=v[x][2],m=v[x][3],p<=k&&k<=m&&(I=N(p,m)?(T=rn.min(T,g,y),rn.max(I,g,y)):(y=(y-g)*(k-p)/(m-p)+g,T=rn.min(T,y),rn.max(I,y)));if(I-T<1)(!P||s<=T&&T<=f)&&n(rn.round(T),k,1);else for(T=rn.round(T+.5),I=rn.round(I-.5),P&&(T=rn.max(s,T),I=rn.min(f,I));T<=I;++T)n(T,k,d)}}(n,g,y,b,x,i,o,w,k,h,d,p,m,C)):("square"===s&&(e-=+u),"square"===c&&(r+=+u),"round"===s&&q(n,e,t-u,e,t+u,e-u,t,u,h,d,p,m,C),"round"===c&&q(n,r,a-u,r,a+u,r+u,a,u,h,d,p,m,C),B(n,rn.round(e),rn.round(t-u),rn.round(r),rn.round(t+u),h,d,p,m,C)):("square"===s&&(t-=v*l),"square"===c&&(a+=v*l),"round"===s&&q(n,e-l,t,e+l,t,e,t-v*l,l,h,d,p,m,C),"round"===c&&q(n,r-l,a,r+l,a,r,a+v*l,l,h,d,p,m,C),B(n,rn.round(e-l),rn.round(t),rn.round(e+l),rn.round(a),h,d,p,m,C)),C)}function cn(n,e,t,r,a,i,o){var n=rn.max(0,(n-1)/2),l=1===r?0:r/2,u=1===a?0:a/2;return null!=i&&(e=rn.abs(i),t=rn.abs(o)),r*n+l<.5&&a*n+u<.5?[0,0]:N(e,0)?[r*n+l,0]:N(t,0)?[0,a*n+u]:[(r*n+l)*t/(i=on(e,t)),(a*n+u)*e/i]}function B(n,e,t,r,a,i,o,l,u,s){var c,f;if(r<e&&(c=e,e=r,r=c),a<t&&(f=t,t=a,a=f),null!=i){if(r<i||l<e||a<o||u<t)return;e=rn.max(e,i),t=rn.max(t,o),r=rn.min(r,l),a=rn.min(a,u)}if(null==s&&(s=1),t===a)for(c=e;c<=r;++c)n(c,t,s);else if(e===r)for(f=t;f<=a;++f)n(e,f,s);else for(f=t;f<=a;++f)for(c=e;c<=r;++c)n(c,f,s)}function U(n,e,t,r,a,i,o,l,u,s,c,f){var h,d,p,m,g,y,v,b,w,x,k,C,T,I,P=null!=l;if(!P||!(rn.max(e,r,i)<l||rn.min(e,r,i)>s||rn.max(t,a,o)<u||rn.min(t,a,o)>c)){if(null==f&&(f=1),a<t&&(p=t,t=a,a=p,p=e,e=r,r=p),o<t&&(p=t,t=o,o=p,p=e,e=i,i=p),o<a&&(p=a,a=o,o=p,p=r,r=i,i=p),N(x=o-t,0))return m=rn.round(t),B(n,h=rn.round(rn.min(e,r,i)),m,d=rn.round(rn.max(e,r,i)),m,l,u,s,c,f);for(C=o-a,v=i-e,b=r-e,w=i-r,T=N(k=a-t,0),I=N(C,0),m=rn.round(t+.5),g=a,y=rn.round(o-.5),P&&(m=rn.max(u,m),y=rn.min(c,y));m<=y;++m)if(d=m<g?T?(h=e,r):(h=v*(m-t)/x+e,b*(m-t)/k+e):I?(h=r,i):(h=v*(m-t)/x+e,w*(m-a)/C+r),rn.abs(d-h)<1)(!P||l<=h&&h<=s)&&n(rn.round(h),m,1);else for(d<h&&(p=h,h=d,d=p),h=rn.round(h+.5),d=rn.round(d-.5),P&&(h=rn.max(l,h),d=rn.min(s,d));h<=d;++h)n(h,m,f)}}function q(n,e,t,r,a,i,o,l,u,s,c,f,h){var d,p,m,g,y,v,b,w,x,k,C,G,U,T,I,P,A,D,B,S,L,E,z,F,R,q=null!=u;for(a<t&&(D=t,t=a,a=D,D=e,e=r,r=D),D=i,B=o,E=r,z=a,F=(E-=S=e)*(D-=S)+(z-=L=t)*(B-=L),R=on(E,z),on(D,B),S=i+l/(B=on(i-(k=[S+(D=F/R)*E/R,L+D*z/R])[0],o-k[1]))*(k[0]-i),F=o+l/B*(k[1]-o),E=rn.atan2(o-F,i-S),L=rn.atan2(t-F,e-S),z=rn.atan2(a-F,r-S),E=M(E),R=M(L),B=M(z),P=(k=Z(S,F,l,l,0,L,z,!(E<R&&E<B||R<E&&B<E||R<E&&E<B))).length-2,null==h&&(h=1),T=0;T<P;T+=2)O(n,k[T],k[T+1],k[T+2],k[T+3],null,null,h,u,s,c,f);for(k=tn([k]),d=rn.round(rn.min(t,a,o,k.ymin)),p=rn.round(rn.max(t,a,o,k.ymax)),q&&(d=rn.max(d,s),p=rn.min(p,f)),C=r-e,U=N(G=a-t,0),T=0,P=k.length;d<=p;++d){for(;T<P&&k[T][3]<d;)++T;if(P<=T)break;if((A=k[T])[1]>d)d=rn.floor(A[1]);else{for(g=-(m=an),t<=d&&d<=a&&(g=U?(m=rn.min(m,e,r),rn.max(g,e,r)):(m=rn.min(m,y=C*(d-t)/G+e),rn.max(g,y))),I=T;I<P&&k[I][1]<=d;++I)(A=k[I])[3]>=d&&(v=A[0],b=A[2],g=N(w=A[1],x=A[3])?(m=rn.min(m,v,b),rn.max(g,v,b)):(m=rn.min(m,y=(b-v)*(d-w)/(x-w)+v),rn.max(g,y)));for(m=rn.round(m+.5),g=rn.round(g-.5),q&&(m=rn.max(m,u),g=rn.min(g,c));m<=g;++m)n(m,d,h)}}}function O(n,e,t,r,a,i,o,l,u,s,c,f,h,d,p){var m=rn.min(e,r),g=rn.max(e,r),y=rn.min(t,a),v=rn.max(t,a),b=l<1?l:1,l=null!=u;if((b=null!=p&&p<b?p:b)&&(!l||!(g<u||c<m||v<s||f<y))){if(null==i&&(i=rn.abs(r-e),o=rn.abs(a-t)),l&&(m<u||c<g||y<s||f<v)){p=function(n,e,t,r,a,i,o,l){if(null!=a){var t=-(t-n),u=-t,r=-(r-e),s=-r,a=n-a,o=o-n,i=e-i,l=l-e,c=1,f=0;if(!(0==t&&a<0||0==u&&o<0||0==r&&i<0||0==s&&l<0||(0!=t&&(a=a/t,o=o/u,t<0?(f<a&&(f=a),o<c&&(c=o)):(f<o&&(f=o),a<c&&(c=a))),0!=r&&(t=i/r,o=l/s,r<0?(f<t&&(f=t),o<c&&(c=o)):(f<o&&(f=o),t<c&&(c=t))),c<f)))return[n+u*f,e+s*f,n+u*c,e+s*c]}}(e,t,r,a,u,s,c,f);if(!p)return b;e=p[0],t=p[1],r=p[2],a=p[3]}if(N(i,0)||N(o,0))B(n,rn.round(e),rn.round(t),rn.round(r),rn.round(a),null,null,null,null,b);else{var w,x,k,C,T=0,I=0,P=0,l=i<o;if(l&&(w=e,e=t,t=w,w=r,r=a,a=w,w=i,i=o,o=w),r<e&&(w=e,e=r,r=w,x=t,t=a,a=x),g=t+(C=(a<t?-1:1)*o/i)*((m=rn.round(e))-e),y=h?1:1-(e+.5-rn.floor(e+.5)),v=m,P=1-(I=g-(u=rn.floor(g))),l?(n(u,v,b*P*y),n(u+1,v,b*I*y)):(n(v,u,b*P*y),n(v,u+1,b*I*y)),T=g+C,g=a+C*((m=rn.round(r))-r),y=d?1:r+.5-rn.floor(r+.5),k=m,P=1-(I=g-(s=rn.floor(g))),l?(n(s,k,b*P*y),n(s+1,k,b*I*y)):(n(k,s,b*P*y),n(k,s+1,b*I*y)),l)for(w=v+1;w<k;++w)0<(P=1-(I=T-(x=rn.floor(T))))&&n(x,w,b*P),0<I&&n(x+1,w,b*I),T+=C;else for(w=v+1;w<k;++w)0<(P=1-(I=T-(x=rn.floor(T))))&&n(w,x,b*P),0<I&&n(w,x+1,b*I),T+=C}}return b}function fn(n,e,t,r,a,i,o,l,u,s,c,f,h,d,p,m,g,y,v,b,w,x){var k,C,T,I,P,A,D,B,S=r<e||e===r&&l<0?-1:1,L=a<t||t===a&&u<0?-1:1,E=i<r||r===i&&f<0?-1:1,z=o<a||a===o&&h<0?-1:1;l=rn.abs(l),_(L*(u=rn.abs(u))*E*(f=rn.abs(f)),z*(h=rn.abs(h))*S*l,1e-6)||(null==x&&(x=1),k={x:e-(B=S*s),y:t+(D=L*c)},e={x:e+B,y:t-D},t={x:r-B,y:a+D},B={x:r+B,y:a-D},A={x:r-(D=E*d),y:a+(P=z*p)},C={x:r+D,y:a-P},T={x:i-D,y:o+P},i={x:i+D,y:o-P},D={x:r,y:a},o=z*h*S*l<L*u*E*f?(I=t,A):(I=B,C),E*L*S*z<0&&(I=B===I?t:B,o=C===o?A:C),S*z<0&&(I=B===I?t:B),E*L<0&&(o=C===o?A:C),S*E<0&&(I=B===I?t:B,o=C===o?A:C),"bevel"===m?(O(n,I.x,I.y,o.x,o.y,null,null,x,y,v,b,w),U(n,D.x,D.y,I.x,I.y,o.x,o.y,y,v,b,w,x)):(r=(P=I===B?e:k).x,a=P.y,h=I.x,l=I.y,u=o.x,f=o.y,z=l-a,L=r-h,h=h*a-r*l,l=(E=(S=o===C?i:T).x)*f-u*(t=S.y),B=on((A=!N(E=z*(r=u-E)-L*(a=t-f),0)&&{x:(L*l-h*r)/E,y:(h*a-z*l)/E}).x-D.x,A.y-D.y),e=rn.min(on(s,c),on(d,p)),"round"===m?(A={x:D.x+e*(A.x-D.x)/B,y:D.y+e*(A.y-D.y)/B},U(n,D.x,D.y,I.x,I.y,o.x,o.y,y,v,b,w,x),q(n,I.x,I.y,o.x,o.y,A.x,A.y,e,y,v,b,w,x)):g*e<B?(O(n,I.x,I.y,o.x,o.y,null,null,x,y,v,b,w),U(n,D.x,D.y,I.x,I.y,o.x,o.y,y,v,b,w,x)):(O(n,I.x,I.y,A.x,A.y,null,null,x,y,v,b,w),O(n,o.x,o.y,A.x,A.y,null,null,x,y,v,b,w),U(n,D.x,D.y,I.x,I.y,o.x,o.y,y,v,b,w,x),U(n,A.x,A.y,I.x,I.y,o.x,o.y,y,v,b,w,x))))}function Z(r,a,i,o,n,l,e,t,u){s=e,t=t,c=M(f=l),s+=c-f,!t&&x<=s-c?s=c+x:t&&x<=c-s?s=c-x:!t&&s<c?s=c+(x-M(c-s)):t&&c<s&&(s=c-(x-M(s-c)));var s,c,f=[c,s],h=(l=f[0],e=f[1],n?rn.cos(n):1),d=n?rn.sin(n):0,p=e-l,m=u&&!u.isIdentity;return g(function(n){var n=l+n*p,e=i*rn.cos(n),n=o*rn.sin(n),t=r+h*e-d*n,e=a+d*e+h*n;return m?u.transform(t,e):[t,e]},m?u.sx:1,m?u.sy:1)}function K(n,e,t,r,a,i,o,l){var u=[],n=function(n,e,t,r,a,i,o){if(_(t,n)&&_(r,e)||_(t,a)&&_(r,i)||_(o,0))return[t,r];var l,u,s,c=!1;if(a={x:a-t,y:i-r},u=on((i={x:n-t,y:e-r}).x,i.y),s=on(a.x,a.y),N(l=(i.x*a.x+i.y*a.y)/(u*s),-1))return[t,r];if(N(l,1))return[n+(n=65535/u)*i.x,e+n*i.y];e=o/rn.tan(rn.acos(l)/2),l={x:t+(n=e/u)*i.x,y:r+n*i.y},n=on((u={x:i.y,y:-i.x}).x,u.y),i=o/n,(u.x*a.x+u.y*a.y)/(n*s)<0&&(u={x:-u.x,y:-u.y});i={x:l.x+i*u.x,y:l.y+i*u.y},u={x:-u.x,y:-u.y},n=rn.acos(u.x/n),u.y<0&&(n=x-n);s=on((e={x:(t={x:t+(u=e/s)*a.x,y:r+u*a.y}).x-i.x,y:t.y-i.y}).x,e.y),r=rn.acos(e.x/s),e.y<0&&(r=x-r);r<n&&n-r<d&&(c=!0);n<r&&d<r-n&&(c=!0);return[l.x,l.y,i.x,i.y,n,r,!(!c||_(x,o))]}(n,e,t,r,a,i,o);return n&&2<=n.length&&(e=l?l.transform(n[0],n[1]):[n[0],n[1]],u.push(e[0],e[1]),2<n.length)&&u.push.apply(u,Z(n[2],n[3],o,o,0,n[4],n[5],n[6],l)),u}function nn(o,n){var e=n&&!n.isIdentity;return g(6<o.length?function(n){var e=1-n,t=n*n,r=e*e,a=r*e,i=t*n,r=3*r*n,n=3*t*e;return[a*o[0]+r*o[2]+n*o[4]+i*o[6],a*o[1]+r*o[3]+n*o[5]+i*o[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*o[0]+e*o[2]+n*o[4],t*o[1]+e*o[3]+n*o[5]]},e?n.sx:1,e?n.sy:1)}function en(G,U,q,n,O,_,N,X,M,Y,J,j,H,V){var e={length:0,min:an,offset:O};n.forEach(function(n){e.length+=n,e.min=rn.min(e.min,n)}),1<=e.min&&(e.min=1),e.length<=e.offset&&(e.offset-=rn.floor(e.offset/e.length)*e.length),e.offset<0&&(e.offset+=rn.ceil(-e.offset/e.length)*e.length),e.offset/=e.min;for(var t,r=0,W=U._d,Q=W.length;r<Q;++r)if((t=W[r])&&2<t.length)for(var $=n.length?function(n,e,t,r,a,i){for(var o,l,u,s,c,f,h,d,p,m,g,y,v=n.length,b=(v>>>1)-1,w=new Array(b),x=e.length,k=0,C=[],T=0,I=0;T<b;++T,I+=2)o=on((+n[I+2]-n[I])/a,(+n[I+3]-n[I+1])/i),k+=w[T]=o;for(h={x:n[0],y:n[1],i:0,l:0},d={x:n[v-2],y:n[v-1],i:0,l:0},l=0,g=-t;g<k;)u=e[l]/r,s=e[l+1]/r,0<u&&0<g+u&&(un(n,w,g,h,d,k),un(n,w,g+u-1,d,h,k),y=null,h.i+1<d.i?((y=[]).push(h.x),y.push(h.y),y.push.apply(y,n.slice(h.i+1<<1,d.i<<1)),y.push(d.x),y.push(d.y)):h.i<d.i?y=[h.x,h.y,n[d.i<<1],n[1+(d.i<<1)],d.x,d.y]:h.i===d.i&&(y=[h.x,h.y,d.x,d.y]),y)&&y.length&&((P=(m=C.length?C[C.length-1]:null)?{x:m[m.length-2],y:m[m.length-1],i:m.i}:null)&&h.i-1===P.i&&(p={x:n[h.i<<1],y:n[1+(h.i<<1)],i:h.i},c+f<on((+P.x-p.x)/a,(+P.y-p.y)/i)+on((+p.x-h.x)/a,(+p.y-h.y)/i)+t)&&(D=n[P.i<<1],B=n[1+(P.i<<1)],P.i,P=n[2+(h.i<<1)],A=n[3+(h.i<<1)],h.i,C.push([p.x,{dx:+p.x-D,dy:+p.y-B,v:p.y,valueOf:ln},p.x,p.y,p.x,{dx:+P-p.x,dy:+A-p.y,v:p.y,valueOf:ln}]),C[C.length-1].i=h.i,C[C.length-1].alpha=m.alpha),y.i=d.i,y.alpha=rn.max(.7,e[l]<1?e[l]:1),C.push(y)),0<u&&(g+=u),0<s&&(g+=s),c=u,f=s,x<=(l+=2)&&(l=0);var P,A;var D,B;return C}(t,n,e.offset,e.min,M,Y):[t],a=0,Z=$.length;a<Z;++a)if(0<$[a].length){tn=en=R=F=x=w=b=v=y=g=m=p=d=h=f=c=s=u=l=o=i=z=E=L=S=B=D=A=nn=K=P=I=T=C=k=void 0;var i,o,l,u,s,c,f,h,d,p,m,g,y,v,b,w,x,k=G,C=$[a],T=q,I=0===a?_:"butt",P=Z===1+a?_:"butt",K=N,nn=X,A=M,D=Y,B=J,S=j,L=H,E=V,z=C.length,F=K,R=0,en=I,tn=P;if(z<6)R=sn(k,+(o=C[0]),+(l=C[1]),+(u=C[2]),+(s=C[3]),p=rn.abs(+u-o),m=rn.abs(+s-l),(x=cn(T,p,m,A,D,g=(null==l.dx?s:l).dx,y=(null==l.dy?s:l).dy))[0],x[1],I,P,T,B,S,L,E,g,y,C.alpha);else for(z-=2,i=0;i<z;i+=2)o=C[i],l=C[i+1],u=C[i+2],s=C[i+3],x=cn(T,p=rn.abs(u-o),m=rn.abs(s-l),A,D,g=(null==l.dx?s:l).dx,y=(null==l.dy?s:l).dy),o.params&&o.params.lineCap&&(en=!0===o.params.lineCap?I:o.params.lineCap),u.params&&u.params.lineCap&&(tn=!0===u.params.lineCap?P:u.params.lineCap),R=rn.max(R,sn(k,+o,+l,+u,+s,p,m,x[0],x[1],0===i?en:null,z===i+2?tn:null,T,B,S,L,E,g,y,C.alpha)),0<i&&(0<w[0]||0<w[1]||0<x[0]||0<x[1])&&(o.params&&o.params.lineJoin&&(F=!0===o.params.lineJoin?K:o.params.lineJoin),fn(k,+c,+f,+o,+l,+u,+s,v||h,b||d,w[0],w[1],g||p,y||m,x[0],x[1],F,nn,B,S,L,E,R)),c=o,f=l,h=p,d=m,v=g,b=y,w=x;u.params&&u.params.join&&(c=u.params.join[0],f=u.params.join[1],0<(w=cn(T,h=rn.abs(c-u),d=rn.abs(f-s),A,D,v=null,b=null))[0]||0<w[1]||0<x[0]||0<x[1])&&fn(k,+o,+l,+u,+s,+c,+f,g||p,y||m,x[0],x[1],v||h,b||d,w[0],w[1],F,nn,B,S,L,E,R)}}function tn(n){if(!n)return[];for(var e,t,r,a,i=[],o=n.length,l=an,u=-an,s=0,c=0,f=0;f<o;++f)if((a=n[f])&&!((e=a.length-2)<=0)){for(++s,r=-(c=1),t=0;t<e;t+=2)a[t].params&&a[t].params.type&&(0<=r&&r<i.length&&(i[r][7]=i[r+c-2][6]+1,i[r+c-2][7]=i[r][6]+1),++s,c=1,r=i.length),l=rn.min(l,a[t+1]),u=rn.max(u,a[t+1]),a[t+1]>a[t+3]?i.push([+a[t+2],a[t+3],+a[t],a[t+1],-1,s,c,c,0,0]):i.push([+a[t],a[t+1],+a[t+2],a[t+3],1,s,c,c,0,0]),++c;l=rn.min(l,a[1+e]),u=rn.max(u,a[1+e])}return(i=i.sort(b)).ymin=l,i.ymax=u,i}function hn(n,e){for(var t,r,a,i=0,o=0;o<e;++o)if(!(r=n[o])[9])for(t=o+1;t<e;++t)(a=n[t])[9]||r[4]!==a[4]||r[5]!==a[5]||1<rn.abs(r[6]-a[6])&&1<rn.abs(r[7]-a[7])||(_(r[0],a[0],1e-6)&&_(r[1],a[1],1e-6)&&_(r[2],a[2],1e-6)&&_(r[3],a[3],1e-6)||_(r[3],a[1],1e-6)||_(r[1],a[3],1e-6))&&(a[9]=1,++i);return i}function g(n,e,t){var r,a=[],i=l,o=n(0);for(a.push(o[0],o[1]),r=0;r<i;++r)o=function n(e,t,r,a,i,o,l,u){if(o<=i||_(i,o,1e-6))return l;l=l||t(i);u=u||t(o);var s,c=rn.max(r,a),f=on(u[0]-l[0],u[1]-l[1])*c;if(f<=p){if(f<1)return l;e.push(u[0],u[1])}else y((s=t(f=(i+o)/2))[0],s[1],l[0],l[1],u[0],u[1])*c<m?e.push(u[0],u[1]):(n(e,t,r,a,i,f,l,s),n(e,t,r,a,f,o,s,u));return u}(a,n,e,t,0===r?0:r/i,i===r+1?1:(r+1)/i,o,null);return a}function dn(n,e,t,r,a,i){return(n-t)*(i-r)-(a-t)*(e-r)<0?-1:1}function on(n,e){n=rn.abs(n),e=rn.abs(e);var t=0;return N(n,0)?e:N(e,0)?n:e<n?n*rn.sqrt(1+(t=e/n)*t):n<e?e*rn.sqrt(1+(t=n/e)*t):n*a}function y(n,e,t,r,a,i){var a=a-t,i=i-r,o=on(a,i);return N(o,0)?on(n-t,e-r):rn.abs(a*(r-e)-i*(t-n))/o}function pn(n,e,t,r){var a,i,o=n*r-e*t;return t=t,r=r,a=on(n=n,e=e),i=on(t,r),(o<0?-1:1)*(N(a,0)||N(i,0)?0:rn.acos(X(n/a*(t/i)+e/a*(r/i),-1,1)))}function _(n,e,t){return rn.abs(+n-e)<(t||1e-6)}function N(n,e){return rn.abs(+n-e)<r}function X(n,e,t){return rn.min(rn.max(n,e),t)}function M(n){return n=n,t=0,r=e=x,(n-=e*rn.floor(n/e))<t&&(n+=e),r<n&&(n-=e),n;var e,t,r}function b(n,e){var t=n[1]-e[1];return _(t,0)?n[3]-e[3]:t}function mn(n){return parseFloat(n||"")||0}function I(n){return n.trim()}function Y(n){throw new Error(n)}function o(){}function J(r){if(!(this instanceof J)||"function"!=typeof r||r.length<5)throw new Error("Gradient: invalid gradient");var a=new gn,t={0:[0,[0,0,0,0]],1:[1,[0,0,0,0]]},i=null,o=function(){var n;return null==i&&((n=Object.keys(t)).sort(function(n,e){return parseFloat(n)-parseFloat(e)}),i=n.map(function(n){return t[n]}).filter(function(n){return 0<=n[0]&&n[0]<=1})),i};P(this,"transform",{get:function(){return a},set:function(n){},enumerable:!0,configurable:!1}),this.addColorStop=function(n,e){i=null,t[String(n)]=[+n,Dn(e)||z]},this.getColorAt=function(n,e){var t=a.imatrix(!0),t=t?t.transform(n,e):null,n=[0,0,0,0];return t?r(t[0],t[1],o(),n,0):n}}function j(a){if(!(this instanceof j)||"function"!=typeof a||a.length<4)throw new Error("Pattern: invalid pattern");var i=new gn;P(this,"transform",{get:function(){return i},set:function(n){},enumerable:!0,configurable:!1}),this.getColorAt=function(n,e){var t=i.imatrix(!0),r=[0,0,0,0];return t&&(t=t.transform(n,e),a(t[0],t[1],r,0)),r[3]/=255,r}}function gn(){var o=this,l=new G,u=new G,e=[];o.dispose=function(){e=u=l=null},o.matrix=function(n){return!0===n?l:l.clone()},o.imatrix=function(n){return!0===n?u:u.clone()},o.reset=function(){return l=new G,u=new G,o},o.save=function(){return 10<=e.length&&e.shift(),e.push([l,u]),o},o.restore=function(){var n;return e.length&&(n=e.pop(),l=n[0],u=n[1]),o},o.scale=function(n,e,t,r){return l=l.mul(G.scale(n,e,t,r)),u=G.scale(1/n,1/e,t,r).mul(u),o},o.rotate=function(n,e,t){return l=l.mul(G.rotate(n,e,t)),u=G.rotate(-n,e,t).mul(u),o},o.translate=function(n,e){return l=l.mul(G.translate(n,e)),u=G.translate(-n,-e).mul(u),o},o.skewX=function(n){n=G.skewX(n);return l=l.mul(n),u=n.inv().mul(u),o},o.skewY=function(n){n=G.skewY(n);return l=l.mul(n),u=n.inv().mul(u),o},o.transform=function(n,e,t,r,a,i){n=new G(n,t,a,e,r,i);return l=l.mul(n),u=n.inv().mul(u),o}}function yn(n,e,t){for(var r,a=0,i=t-1;a<i;){if(e[a][0]>=n)return a;e[r=a+i>>>1][0]<n?a=1+r:i=r}return a}function vn(n,e,t,r,a){return n[e+0]=X(rn.round(t[0]+a*(r[0]-t[0])),0,255),n[e+1]=X(rn.round(t[1]+a*(r[1]-t[1])),0,255),n[e+2]=X(rn.round(t[2]+a*(r[2]-t[2])),0,255),n[e+3]=3<t.length?X(t[3]+a*(r[3]-t[3]),0,1):1,n}F.VERSION="1.0.0",F[n]={constructor:F,width:null,height:null,getContext:null},F.getRGBAFrom=function(i){var t;return"function"==typeof i?function(n,e){n=i(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:i.data&&null!=i.width&&null!=i.height?function(n,e){var t=i.width,r=i.height,a=i.data;return 0<=n&&n<t&&0<=e&&e<r?[a[r=n+t*e<<2],a[1+r],a[2+r],a[3+r]/255]:z}:(t=[i[0]||0,i[1]||0,i[2]||0,3<i.length?i[3]||0:1],function(n,e){return t})},F.setRGBATo=function(y){var n;return"function"==typeof y?y:((n=function(n,e,t,r,a,i,o){var l=y.width,u=y.height,s=y.data;if(0<=n&&n<l&&0<=e&&e<u){var u=n+l*e<<2,n=s[u]||0,l=s[1+u]||0,e=s[2+u]||0,c=(s[3+u]||0)/255,f=i,h=null,d=0,p=0,m=0,g=0;switch("clear"!==(o=o||"source-over")&&"copy"!==o&&(h=(h=v.CompositionMode[o])||v.CompositionMode[o="source-over"]),o){case"clear":h=null;break;case"copy":d=t,p=r,m=a,g=X(rn.round(255*f),0,255),h=null;break;case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":g=h(c,c,f,f);break;default:g=f+c-f*c}h&&(g=0<g?(d=X(rn.round(255*h(c*n/255,c,f*t/255,f)/g),0,255),p=X(rn.round(255*h(c*l/255,c,f*r/255,f)/g),0,255),m=X(rn.round(255*h(c*e/255,c,f*a/255,f)/g),0,255),X(rn.round(255*g),0,255)):m=p=d=0),s[u]=d,s[1+u]=p,s[2+u]=m,s[3+u]=g}}).$target=y,n)},v[n]={constructor:v,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return null==e&&null!=n.width&&null!=n.height&&(e=n.height,n=n.width),{data:new E(n*e<<2),width:n,height:e}},getImageData:null,putImageData:null,drawImage:null,createLinearGradient:o,createRadialGradient:o,createConicGradient:o,createPattern:o,strokeText:o,fillText:o,measureText:o},((F.RenderingContext2D=v).CompositionMode={xor:function(n,e,t,r){return t*(1-e)+n*(1-r)},"destination-out":function(n,e,t,r){return n*(1-r)},"destination-in":function(n,e,t,r){return n*r},"destination-atop":function(n,e,t,r){return t*(1-e)+n*r},"destination-over":function(n,e,t,r){return t*(1-e)+n},"source-out":function(n,e,t,r){return t*(1-e)},"source-in":function(n,e,t,r){return t*e},"source-atop":function(n,e,t,r){return t*e+n*(1-r)},"source-over":function(n,e,t,r){return t+n*(1-r)},multiply:function(n,e,t,r){return t*n+t*(1-e)+n*(1-r)},screen:function(n,e,t,r){return t+n-t*n},overlay:function(n,e,t,r){return 2*n<=e?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-2*n*t-e*r},darken:function(n,e,t,r){return rn.min(t*e,n*r)+t*(1-e)+n*(1-r)},lighten:function(n,e,t,r){return rn.max(t*e,n*r)+t*(1-e)+n*(1-r)},"color-dodge":function(n,e,t,r){return t===r&&0===n?t*(1-e):t===r?r*e+t*(1-e)+n*(1-r):r*e*rn.min(1,n/e*r/(r-t))+t*(1-e)+n*(1-r)},"color-burn":function(n,e,t,r){return 0===t&&n===e?r*e+n*(1-r):0===t?n*(1-r):r*e*(1-rn.min(1,(1-(e?n/e:0))*r/t))+t*(1-e)+n*(1-r)},"hard-light":function(n,e,t,r){return 2*t<=r?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-r*e-2*t*n},"soft-light":function(n,e,t,r){var a=e?n/e:0;return 2*t<=r?n*(r+(2*t-r)*(1-a))+t*(1-e)+n*(1-r):r<2*t&&4*n<=e?e*(2*t-r)*(16*rn.pow(a,3)-12*rn.pow(a,2)-3*a)+t-t*e+n:e*(2*t-r)*(rn.pow(a,.5)-a)+t-t*e+n},difference:function(n,e,t,r){return t+n-2*rn.min(t*e,n*r)},exclusion:function(n,e,t,r){return t*e+n*r-2*t*n+t*(1-e)+n*(1-r)}}).hardlight=v.CompositionMode["hard-light"],v.CompositionMode.softlight=v.CompositionMode["soft-light"],v.Interpolation={},R[n]={constructor:R,_d:null,_sd:null,transform:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},v.Path2D=R,G[n]={constructor:G,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this,e=new G(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23);return e.sx=n.sx,e.sy=n.sy,e},mul:function(n){var e,t=this;if(n instanceof G)return(e=new G(t.m11*n.m11+t.m12*n.m21,t.m11*n.m12+t.m12*n.m22,t.m11*n.m13+t.m12*n.m23+t.m13,t.m21*n.m11+t.m22*n.m21,t.m21*n.m12+t.m22*n.m22,t.m21*n.m13+t.m22*n.m23+t.m23)).sx=t.sx*n.sx,e.sy=t.sy*n.sy,e},inv:function(){var n=this,e=n.m11,t=n.m12,r=n.m13,a=n.m21,i=n.m22,o=n.m23,l=e*i-t*a;return N(l,0)?null:((a=new G(i=i/l,t=-t/l,-i*r-t*o,i=-a/l,t=e/l,-i*r-t*o)).sx=1/n.sx,a.sy=1/n.sy,a)},transform:function(n,e,t){2===arguments.length&&e&&e.length?(t=e,e=n[1],n=n[0]):1===arguments.length&&(e=n[1],n=n[0]);var r=this,a=r.m11*n+r.m12*e+r.m13,n=r.m21*n+r.m22*e+r.m23;return t&&t.length?(t[0]=a,t[1]=n):t=[a,n],t}},G.translate=function(n,e){return new G(1,0,n||0,0,1,e||0)},G.scale=function(n,e,t,r){t=new G(n,0,-n*(t=t||0)+t,0,e,-e*(r=r||0)+r);return t.sx=n,t.sy=e,t},G.rotate=function(n,e,t){e=e||0,t=t||0;var r=rn.cos(n||0),n=rn.sin(n||0);return new G(r,-n,e-r*e+n*t,n,r,t-r*t-n*e)},G.skewX=function(n){return new G(1,n||0,0,0,1,0)},G.skewY=function(n){return new G(1,0,0,n||0,1,0)},G.EYE=function(){return new G(1,0,0,0,1,0)},v.Matrix2D=G,k[n]={constructor:k,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},J.VERSION="1.2.3",J[n]={constructor:J,transform:null,addColorStop:null,getColorAt:null},J.createLinearGradient=function(u,s,n,e){var c=(n=n||0)-(u=u||0),f=(e=e||0)-(s=s||0),h=N(c,0),d=N(f,0),p=2*c*f;return new J(function(n,e,t,r,a){var i,o,l=t.length,n=n-u,e=e-s,n=d&&h?0:h?e/f:d?n/c:(n*f+e*c)/p;return n<=0?n=i=o=0:1<=n?(i=o=l-1,n=1):i=0===(o=yn(n,t,l))?0:o-1,vn(r,a||0,t[i][1],t[o][1],t[o][0]>t[i][0]?(n-t[i][0])/(t[o][0]-t[i][0]):n)})},J.createRadialGradient=function(d,p,m,g,y,n){var v=(m=m||0)*m-2*m*(n=n||0)+n*n-(d=d||0)*d+2*d*(g=g||0)-g*g-(p=p||0)*p+2*p*(y=y||0)-y*y,b=-2*m*m+2*m*n+2*d*d-2*d*g+2*p*p-2*p*y,w=-d*d-p*p+m*m;return new J(function(n,e,t,r,a){var i,o,l,u,s,c,f,h=t.length;return u=b-2*n*d+2*n*g-2*e*p+2*e*y,s=w-n*n+2*n*d-e*e+2*e*p,(u=(s=N(l=v,0)?(f=s,!N(c=u,0)&&[-f/c]):_(f=u*u-4*l*s,c=0,1e-6)?[-u/(2*l)]:!(f<0)&&(c=rn.sqrt(f),[(-u-c)/(2*l),(-u+c)/(2*l)]))?1<s.length?0<=s[0]&&s[0]<=1&&0<=s[1]&&s[1]<=1?rn.min(s[0],s[1]):0<=s[0]&&s[0]<=1?s[0]:0<=s[1]&&s[1]<=1?s[1]:rn.min(s[0],s[1]):s[0]:-1)<0||1<u?(l=n-d,s=e-p,o=i=rn.sqrt(l*l+s*s)<m?u=0:h-(u=1)):i=0===(o=yn(u,t,h))?0:o-1,vn(r,a||0,t[i][1],t[o][1],t[o][0]>t[i][0]?(u-t[i][0])/(t[o][0]-t[i][0]):u)})},J.createConicGradient=function(o,l,u){return o=o||0,l=l||0,u=u||0,new J(function(n,e,t,r,a){var i=t.length,e=rn.atan2(e-u,n-l)-o;return e<0&&(e+=x),x<e&&(e-=x),vn(r,a||0,t[r=0===(n=yn(e=X(e/x,0,1),t,i))?0:n-1][1],t[n][1],t[n][0]>t[r][0]?(e-t[r][0])/(t[n][0]-t[r][0]):e)})},j[n]={constructor:j,transform:null,getColorAt:null},j.createPattern=function(a,n){if(!((a=a&&"function"==typeof a.getImageData?a.getImageData():a)&&a.data&&a.width&&a.height&&a.data.length===4*a.width*a.height))throw new Error("Pattern: invalid image data");var i=a.width,o=a.height;switch(n){case"no-repeat":return new j(function(n,e,t,r){return n=rn.round(n),e=rn.round(e),0<=n&&n<i&&0<=e&&e<o&&(t[r+0]=a.data[n=n+e*i<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n]),t});case"repeat-x":return new j(function(n,e,t,r){return n=rn.round(n),0<=(e=rn.round(e))&&e<o&&((n%=i)<0&&(n+=i),t[r+0]=a.data[n=n+e*i<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n]),t});case"repeat-y":return new j(function(n,e,t,r){return n=rn.round(n),e=rn.round(e),0<=n&&n<i&&((e%=o)<0&&(e+=o),t[r+0]=a.data[n=n+e*i<<2],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n]),t});default:return new j(function(n,e,t,r){n=rn.round(n),e=rn.round(e),(n%=i)<0&&(n+=i),(e%=o)<0&&(e+=o);n=n+e*i<<2;return t[r+0]=a.data[n],t[r+1]=a.data[1+n],t[r+2]=a.data[2+n],t[r+3]=a.data[3+n],t})}},J.Pattern=j,J.createPattern=j.createPattern,v.Gradient=J,v.Pattern=j,v[n].createLinearGradient=J.createLinearGradient,v[n].createRadialGradient=J.createRadialGradient,v[n].createConicGradient=J.createConicGradient,v[n].createPattern=J.createPattern,gn[n]={constructor:gn,dispose:null,matrix:null,imatrix:null,reset:null,save:null,restore:null,scale:null,rotate:null,translate:null,reflectX:null,reflectY:null,skewX:null,skewY:null,transform:null},J.Transform=gn;var bn=/^#([0-9a-fA-F]{3,6})\b/,wn=/^(rgba?)\b\s*\(([^\)]*)\)/i,xn=/^(hsla?)\b\s*\(([^\)]*)\)/i,kn=/^(hwba?)\b\s*\(([^\)]*)\)/i,Cn=/\s+|,/gm,Tn=/\/\s*(\d*?\.?\d+%?)/;function In(n,e,t,r){var a,i,o;return e/=100,e=(1-rn.abs(2*(t/=100)-1))*e,a=rn.floor((n=n/60)/2),a=e*(1-rn.abs(n-2*a-1)),t=t-e/2,n=0<=n&&n<1?(i=e+t,o=a+t,0+t):1<=n&&n<2?(i=a+t,o=e+t,0+t):2<=n&&n<3?(i=0+t,o=e+t,a+t):3<=n&&n<4?(i=0+t,o=a+t,e+t):4<=n&&n<5?(i=a+t,o=0+t,e+t):(i=e+t,o=0+t,a+t),[X(rn.round(255*i),0,255),X(rn.round(255*o),0,255),X(rn.round(255*n),0,255),r]}function Pn(n,e,t,r){var a,t=1-t/100;return n=n,a=100*t,r=r,e=(a/=100)*(1-(e=100-e/t)/200),t=rn.min(e,1-e),In(n,0===t?0:100*(a-e)/t,100*e,r)}var An=/^\s+|\s+$/gm,I=String.prototype.trim?function(n){return n.trim()}:function(){return s.replace(An,"")};function Dn(n){var e,t,r,a,i,o,l,u;return n=I(String(n)).toLowerCase(),(e=n.match(bn))?!(r=e[1])||r.length<3?[0,0,0,0]:r.length<6?[X(parseInt(r[0]+r[0],16)||0,0,255),X(parseInt(r[1]+r[1],16)||0,0,255),X(parseInt(r[2]+r[2],16)||0,0,255),1]:[X(parseInt(r[0]+r[1],16)||0,0,255),X(parseInt(r[2]+r[3],16)||0,0,255),X(parseInt(r[4]+r[5],16)||0,0,255),1]:(e=n.match(kn))?(t=e[2].match(Tn),l=(a=I(e[2]).split(Cn).map(I))[0]||"0",r=a[1]||"0",i=a[2]||"0",o=t?t[1]:"1",Pn(l=parseFloat(l,10),r="%"===r.slice(-1)?parseFloat(r,10):100*parseFloat(r,10)/255,i="%"===i.slice(-1)?parseFloat(i,10):100*parseFloat(i,10)/255,o="%"===o.slice(-1)?parseFloat(o,10)/100:parseFloat(o,10))):(e=n.match(xn))?(t=e[2].match(Tn),l=(a=I(e[2]).split(Cn).map(I))[0]||"0",n=a[1]||"0",u=a[2]||"0",o=t?t[1]:"hsla"===e[1]&&null!=a[3]?a[3]:"1",In(l=parseFloat(l,10),n="%"===n.slice(-1)?parseFloat(n,10):100*parseFloat(n,10)/255,u="%"===u.slice(-1)?parseFloat(u,10):100*parseFloat(u,10)/255,o="%"===o.slice(-1)?parseFloat(o,10)/100:parseFloat(o,10))):(e=n.match(wn))?(t=e[2].match(Tn),l=(a=I(e[2]).split(Cn).map(I))[0]||"0",u=a[1]||"0",i=a[2]||"0",o=t?t[1]:"rgba"===e[1]&&null!=a[3]?a[3]:"1",[l="%"===l.slice(-1)?2.55*parseFloat(l,10):parseFloat(l,10),u="%"===u.slice(-1)?2.55*parseFloat(u,10):parseFloat(u,10),i="%"===i.slice(-1)?2.55*parseFloat(i,10):parseFloat(i,10),o="%"===o.slice(-1)?parseFloat(o,10)/100:parseFloat(o,10)]):c.call(Bn,n)?Bn[n].slice():void 0}var Bn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Sn(n){return n.reduce(function(n,e){return 2*n+e},0)}function Ln(n){for(var e=[],t=7;0<=t;--t)e.push(!!(n&1<<t));return e}function En(n,r){for(var e,t,a=0,i=[],o=1<<n,l=1+o,u=n+1,s=[];;)if(t=e,(e=function(n){for(var e=0,t=0;t<n;++t)r.charCodeAt(a>>3)&1<<(7&a)&&(e|=1<<t),++a;return e}(u))===o){c=void 0,s=[],u=n+1;for(var c=0;c<o;++c)s[c]=[c];s[o]=[],s[l]=null}else{if(e===l)break;if(e<s.length)t!==o&&s.push(s[t].concat(s[e][0]));else{if(e!==s.length)throw new Error("Invalid LZW code.");s.push(s[t].concat(s[t][0]))}i.push.apply(i,s[e]),s.length===1<<u&&u<12&&u++}return i}function zn(n){var e=this;e.data=n,e.len=e.data.length,e.pos=0,e.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return n instanceof Uint8Array?n[this.pos++]:255&n.charCodeAt(this.pos++)},e.readBytes=function(n){for(var e=[],t=0;t<n;++t)e.push(this.readByte());return e},e.read=function(n){for(var e="",t=0;t<n;++t)e+=String.fromCharCode(this.readByte());return e},e.readUnsigned=function(){var n=this.readBytes(2);return(n[1]<<8)+n[0]}}function Fn(i,o){o=o||{};function l(){for(var n,e="";n=i.readByte(),e+=i.read(n),0!==n;);return e}var r=function(n){for(var e=[],t=0;t<n;++t)e.push(i.readBytes(3));return e},e=function(n){function e(n){var e;i.readByte(),n.identifier=i.read(8),n.authCode=i.read(3),"NETSCAPE"===n.identifier?(e=n,i.readByte(),e.unknown=i.readByte(),e.iterations=i.readUnsigned(),e.terminator=i.readByte(),o.app&&o.app.NETSCAPE&&o.app.NETSCAPE(e)):((e=n).appData=l(),o.app&&o.app[e.identifier]&&o.app[e.identifier](e))}var t,r;switch(n.label=i.readByte(),n.label){case 249:n.extType="gce",a=n,i.readByte(),r=Ln(i.readByte()),a.reserved=r.splice(0,3),a.disposalMethod=Sn(r.splice(0,3)),a.userInput=r.shift(),a.transparencyGiven=r.shift(),a.delayTime=i.readUnsigned(),a.transparencyIndex=i.readByte(),a.terminator=i.readByte(),o.gce&&o.gce(a);break;case 254:n.extType="com",(r=n).comment=l(),o.com&&o.com(r);break;case 1:n.extType="pte";var a=n;i.readByte(),a.ptHeader=i.readBytes(12),a.ptData=l(),o.pte&&o.pte(a);break;case 255:n.extType="app",e(n);break;default:n.extType="unknown",(t=n).data=l(),o.unknown&&o.unknown(t)}},t=function(n){function e(n,e){for(var t=new Array(n.length),r=n.length/e,a=[0,4,2,1],i=[8,8,4,2],o=0,l=0;l<4;++l)for(var u=a[l];u<r;u+=i[l]){var s=u,c=o;c=n.slice(c*e,(c+1)*e),t.splice.apply(t,[s*e,e].concat(c)),++o}return t}n.leftPos=i.readUnsigned(),n.topPos=i.readUnsigned(),n.width=i.readUnsigned(),n.height=i.readUnsigned();var t=Ln(i.readByte()),t=(n.lctFlag=t.shift(),n.interlaced=t.shift(),n.sorted=t.shift(),n.reserved=t.splice(0,2),n.lctSize=Sn(t.splice(0,3)),n.lctFlag&&(n.lct=r(1<<n.lctSize+1)),n.lzwMinCodeSize=i.readByte(),l());n.pixels=En(n.lzwMinCodeSize,t),n.interlaced&&(n.pixels=e(n.pixels,n.width)),o.img&&o.img(n)},a=function(){var n={};switch(n.sentinel=i.readByte(),String.fromCharCode(n.sentinel)){case"!":n.type="ext",e(n);break;case",":n.type="img",t(n);break;case";":n.type="eof",o.eof&&o.eof(n);break;default:throw new Error("Unknown block: 0x"+n.sentinel.toString(16))}"eof"!==n.type&&a()},n={};if(n.sig=i.read(3),n.ver=i.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=i.readUnsigned(),n.height=i.readUnsigned();var u=Ln(i.readByte());n.gctFlag=u.shift(),n.colorRes=Sn(u.splice(0,3)),n.sorted=u.shift(),n.gctSize=Sn(u.splice(0,3)),n.bgColor=i.readByte(),n.pixelAspectRatio=i.readByte(),n.gctFlag&&(n.gct=r(1<<n.gctSize+1)),o.hdr&&o.hdr(n),a()}var Rn=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),H=5793;function Gn(){}function Un(e,t,n,r,a,u,s,i,c){n.precision,n.samplesPerLine,n.scanLines;var o=n.mcusPerLine,G=n.progressive,U=(n.maxH,n.maxV,t),l=0,f=0;function h(){if(0<f)return l>>--f&1;if(255==(l=e[t++])){var n=e[t++];if(n)throw"unexpected marker: "+(l<<8|n).toString(16)}return l>>>(f=7)}function d(n){for(var e,t=n;null!=(e=h());){if("number"==typeof(t=t[e]))return t;if("object"!=typeof t)throw"invalid huffman sequence"}return null}function p(n){for(var e=0;0<n;){var t=h();if(null==t)return;e=e<<1|t,--n}return e}function m(n){var e=p(n);return 1<<n-1<=e?e:e+(-1<<n)+1}var g=0;var y,v=0;var b,w,x,k,C,T,I,P,A,q,D,B,O,S,_,L,E,z=r.length,N=G?0===u?0===i?function(n,e){var t=0===(t=d(n.huffmanTableDC))?0:m(t)<<c;e[0]=n.pred+=t}:function(n,e){e[0]|=h()<<c}:0===i?function(n,e){if(0<g)--g;else for(var t=u,r=s;t<=r;){var a=d(n.huffmanTableAC),i=15&a,a=a>>4;if(0==i){if(a<15){g=p(a)+(1<<a)-1;break}t+=16}else e[Rn[t+=a]]=m(i)*(1<<c),t++}}:function(n,e){for(var t=u,r=s,a=0;t<=r;){var i=Rn[t];switch(v){case 0:var o=d(n.huffmanTableAC),l=15&o,a=o>>4;if(0==l)v=a<15?(g=p(a)+(1<<a),4):(a=16,1);else{if(1!=l)throw"invalid ACn encoding";y=m(l),v=a?2:3}continue;case 1:case 2:e[i]?e[i]+=h()<<c:0===--a&&(v=2==v?3:0);break;case 3:e[i]?e[i]+=h()<<c:(e[i]=y<<c,v=0);break;case 4:e[i]&&(e[i]+=h()<<c)}t++}4===v&&0===--g&&(v=0)}:function(n,e){for(var t=0===(t=d(n.huffmanTableDC))?0:m(t),r=(e[0]=n.pred+=t,1);r<64;){var a=d(n.huffmanTableAC),i=15&a,a=a>>4;if(0==i){if(a<15)break;r+=16}else e[Rn[r+=a]]=m(i),r++}},F=0,R=1==z?r[0].blocksPerLine*r[0].blocksPerColumn:o*n.mcusPerColumn;for(a=a||R;F<R;){for(w=0;w<z;++w)r[w].pred=0;if(g=0,1==z)for(b=r[0],C=0;C<a;++C)_=N,E=void 0,E=(L=F)/(S=b).blocksPerLine|0,L%=S.blocksPerLine,_(S,S.blocks[E][L]),++F;else for(C=0;C<a;++C){for(w=0;w<z;++w)for(I=(b=r[w]).h,P=b.v,x=0;x<P;++x)for(k=0;k<I;++k)q=N,B=x,O=k,B=((D=F)/o|0)*(A=b).v+B,D=D%o*A.h+O,q(A,A.blocks[B][D]);if(++F===R)break}if(f=0,(T=e[t]<<8|e[t+1])<65280)throw"marker was not found";if(!(65488<=T&&T<=65495))break;t+=2}return t-U}function qn(n,e){var t=[],r=e.blocksPerLine,a=e.blocksPerColumn,i=r<<3,o=new Int32Array(64),l=new Uint8Array(64);for(var u=0;u<a;++u){var s=u<<3;for(z=0;z<8;++z)t.push(new Uint8Array(i));for(var c=0;c<r;++c){D=A=P=I=T=b=v=y=g=m=p=d=h=f=C=k=x=w=void 0;for(var f,h,d,p,m,g,y,v,b,w=e.blocks[u][c],x=l,k=o,C=e.quantizationTable,T=k,I=0;I<64;++I)T[I]=w[I]*C[I];for(I=0;I<8;++I){var P=8*I;0==T[1+P]&&0==T[2+P]&&0==T[3+P]&&0==T[4+P]&&0==T[5+P]&&0==T[6+P]&&0==T[7+P]?(b=H*T[0+P]+512>>10,T[0+P]=b,T[1+P]=b,T[2+P]=b,T[3+P]=b,T[4+P]=b,T[5+P]=b,T[6+P]=b,T[7+P]=b):(f=H*T[0+P]+128>>8,h=H*T[4+P]+128>>8,d=T[2+P],p=T[6+P],m=2896*(T[1+P]-T[7+P])+128>>8,v=2896*(T[1+P]+T[7+P])+128>>8,g=T[3+P]<<4,b=f-h+1>>1,f=f+h+1>>1,h=b,b=3784*d+1567*p+128>>8,d=1567*d-3784*p+128>>8,p=b,b=m-(y=T[5+P]<<4)+1>>1,m=m+y+1>>1,y=b,b=v+g+1>>1,g=v-g+1>>1,v=b,b=f-p+1>>1,f=f+p+1>>1,p=b,b=h-d+1>>1,h=h+d+1>>1,d=b,b=2276*m+3406*v+2048>>12,m=3406*m-2276*v+2048>>12,v=b,b=799*g+4017*y+2048>>12,g=4017*g-799*y+2048>>12,y=b,T[0+P]=f+v,T[7+P]=f-v,T[1+P]=h+y,T[6+P]=h-y,T[2+P]=d+g,T[5+P]=d-g,T[3+P]=p+m,T[4+P]=p-m)}for(I=0;I<8;++I){var A=I;0==T[8+A]&&0==T[16+A]&&0==T[24+A]&&0==T[32+A]&&0==T[40+A]&&0==T[48+A]&&0==T[56+A]?(b=H*k[I+0]+8192>>14,T[0+A]=b,T[8+A]=b,T[16+A]=b,T[24+A]=b,T[32+A]=b,T[40+A]=b,T[48+A]=b,T[56+A]=b):(f=H*T[0+A]+2048>>12,h=H*T[32+A]+2048>>12,d=T[16+A],p=T[48+A],m=2896*(T[8+A]-T[56+A])+2048>>12,v=2896*(T[8+A]+T[56+A])+2048>>12,g=T[24+A],b=f-h+1>>1,f=f+h+1>>1,h=b,b=3784*d+1567*p+2048>>12,d=1567*d-3784*p+2048>>12,p=b,b=m-(y=T[40+A])+1>>1,m=m+y+1>>1,y=b,b=v+g+1>>1,g=v-g+1>>1,v=b,b=f-p+1>>1,f=f+p+1>>1,p=b,b=h-d+1>>1,h=h+d+1>>1,d=b,b=2276*m+3406*v+2048>>12,m=3406*m-2276*v+2048>>12,v=b,b=799*g+4017*y+2048>>12,g=4017*g-799*y+2048>>12,y=b,T[0+A]=f+v,T[56+A]=f-v,T[8+A]=h+y,T[48+A]=h-y,T[16+A]=d+g,T[40+A]=d-g,T[24+A]=p+m,T[32+A]=p-m)}for(I=0;I<64;++I){var D=128+(T[I]+8>>4);x[I]=D<0?0:255<D?255:D}for(var B=0,S=c<<3,L=0;L<8;++L)for(var E=t[s+L],z=0;z<8;++z)E[S+z]=l[B++]}}return t}function S(n){return n<0?0:255<n?255:n}function On(n,e,t){var r,a=[];if(0<=n)for(r=0;r<n;++r)a.push(e[t.pos++]);else for(r=0;n<r;--r)a.push(e[t.pos++]);return a}Gn[n]={constructor:Gn,parse:function(e){var t=0;e.length;function n(){var n=e[t]<<8|e[t+1];return t+=2,n}var r,a,i=null,o=null,l=[],u=[],s=[],c=[],f=n();if(65496!=f)throw"SOI not found";for(f=n();65497!=f;){switch(f){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:void 0,L=void 0,L=n(),L=e.subarray(t,t+L-2),t+=L.length;65504===f&&74===L[0]&&70===L[1]&&73===L[2]&&70===L[3]&&0===L[4]&&(i={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),65518===f&&65===L[0]&&100===L[1]&&111===L[2]&&98===L[3]&&101===L[4]&&0===L[5]&&(o={version:L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var G=n()+t-2;t<G;){var h=e[t++],d=new Int32Array(64);if(h>>4==0)for(z=0;z<64;++z)d[Rn[z]]=e[t++];else{if(h>>4!=1)throw"DQT: invalid table spec";for(z=0;z<64;++z)d[Rn[z]]=n()}l[15&h]=d}break;case 65472:case 65473:case 65474:n(),(r={}).extended=65473===f,r.progressive=65474===f,r.precision=e[t++],r.scanLines=n(),r.samplesPerLine=n(),r.components={},r.componentsOrder=[];var U=e[t++];for(E=0;E<U;++E){var p=e[t],q=e[t+1]>>4,O=15&e[t+1],_=e[t+2];r.componentsOrder.push(p),r.components[p]={h:q,v:O,quantizationIdx:_},t+=3}B=D=A=P=I=T=C=k=w=b=m=x=v=y=g=void 0;var m,g=r,y=0,v=0;for(m in g.components)g.components.hasOwnProperty(m)&&(y<(x=g.components[m]).h&&(y=x.h),v<x.v)&&(v=x.v);var b=rn.ceil(g.samplesPerLine/8/y),w=rn.ceil(g.scanLines/8/v);for(m in g.components)if(g.components.hasOwnProperty(m)){for(var x=g.components[m],k=rn.ceil(rn.ceil(g.samplesPerLine/8)*x.h/y),C=rn.ceil(rn.ceil(g.scanLines/8)*x.v/v),T=b*x.h,I=w*x.v,P=[],A=0;A<I;++A){for(var D=[],B=0;B<T;++B)D.push(new Int32Array(64));P.push(D)}x.blocksPerLine=k,x.blocksPerColumn=C,x.blocks=P}g.maxH=y,g.maxV=v,g.mcusPerLine=b,g.mcusPerColumn=w,u.push(r);break;case 65476:var N=n();for(E=2;E<N;){var X=e[t++],M=new Uint8Array(16),S=0;for(z=0;z<16;++z,++t)S+=M[z]=e[t];var Y=new Uint8Array(S);for(z=0;z<S;++z,++t)Y[z]=e[t];E+=17+S,(X>>4==0?c:s)[15&X]=function(n,e){for(var t,r=0,a=[],i=16;0<i&&!n[i-1];)--i;a.push({children:[],index:0});for(var o,l=a[0],u=0;u<i;++u){for(t=0;t<n[u];++t){for((l=a.pop()).children[l.index]=e[r];0<l.index;)l=a.pop();for(++l.index,a.push(l);a.length<=u;)a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o;r++}u+1<i&&(a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o)}return a[0].children}(M,Y)}break;case 65501:n(),a=n();break;case 65498:n();var J=e[t++],j=[];for(E=0;E<J;++E){R=r.components[e[t++]];var H=e[t++];R.huffmanTableDC=c[H>>4],R.huffmanTableAC=s[15&H],j.push(R)}var L=e[t++],V=e[t++],W=e[t++],V=Un(e,t,r,j,a,L,V,W>>4,15&W);t+=V;break;default:if(255==e[t-3]&&192<=e[t-2]&&e[t-2]<=254){t-=3;break}throw"unknown JPEG marker "+f.toString(16)}f=n()}if(1!=u.length)throw"only single frame JPEGs supported";for(var E=0;E<u.length;++E){var z,F=u[E].components;for(z in F)F[z].quantizationTable=l[F[z].quantizationIdx],delete F[z].quantizationIdx}this.width=r.samplesPerLine,this.height=r.scanLines,this.jfif=i,this.adobe=o,this.components=[];for(E=0;E<r.componentsOrder.length;++E){var R=r.components[r.componentsOrder[E]];this.components.push({lines:qn(0,R),scaleX:R.h/r.maxH,scaleY:R.v/r.maxV})}},getData:function(n,e){var t,r,a,i,o,l,u,s,c,f,h,d,p,m,g,y,v,b,w,x,k,C=this.width/n,T=this.height/e,I=0,P=n*e*this.components.length,A=new Uint8Array(P);switch(this.components.length){case 1:for(t=this.components[0],f=0;f<e;++f)for(o=t.lines[0|f*t.scaleY*T],c=0;c<n;++c)h=o[0|c*t.scaleX*C],A[I++]=h;break;case 2:for(t=this.components[0],r=this.components[1],f=0;f<e;++f)for(o=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],c=0;c<n;++c)h=o[0|c*t.scaleX*C],A[I++]=h,h=l[0|c*r.scaleX*C],A[I++]=h;break;case 3:for(k=!0,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),t=this.components[0],r=this.components[1],a=this.components[2],f=0;f<e;++f)for(o=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],u=a.lines[0|f*a.scaleY*T],c=0;c<n;++c)x=k?(h=o[0|c*t.scaleX*C],d=l[0|c*r.scaleX*C],b=S(h+1.402*((p=u[0|c*a.scaleX*C])-128)),w=S(h-.3441363*(d-128)-.71413636*(p-128)),S(h+1.772*(d-128))):(b=o[0|c*t.scaleX*C],w=l[0|c*r.scaleX*C],u[0|c*a.scaleX*C]),A[I++]=b,A[I++]=w,A[I++]=x;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(k=!1,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),t=this.components[0],r=this.components[1],a=this.components[2],i=this.components[3],f=0;f<e;++f)for(o=t.lines[0|f*t.scaleY*T],l=r.lines[0|f*r.scaleY*T],u=a.lines[0|f*a.scaleY*T],s=i.lines[0|f*i.scaleY*T],c=0;c<n;++c)k?(h=o[0|c*t.scaleX*C],d=l[0|c*r.scaleX*C],p=u[0|c*a.scaleX*C],m=s[0|c*i.scaleX*C],g=255-S(h+1.402*(p-128)),y=255-S(h-.3441363*(d-128)-.71413636*(p-128)),v=255-S(h+1.772*(d-128))):(g=o[0|c*t.scaleX*C],y=l[0|c*r.scaleX*C],v=u[0|c*a.scaleX*C],m=s[0|c*i.scaleX*C]),A[I++]=g,A[I++]=y,A[I++]=v,A[I++]=m;break;default:throw"Unsupported color mode"}return A},copyToImageData:function(n){var e,t,r,a,i,o,l,u,s=n.width,c=n.height,f=n.data,h=this.getData(s,c),d=0,p=0;switch(this.components.length){case 1:for(t=0;t<c;++t)for(e=0;e<s;++e)r=h[d++],f[p++]=r,f[p++]=r,f[p++]=r,f[p++]=255;break;case 3:for(t=0;t<c;++t)for(e=0;e<s;++e)o=h[d++],l=h[d++],u=h[d++],f[p++]=o,f[p++]=l,f[p++]=u,f[p++]=255;break;case 4:for(t=0;t<c;++t)for(e=0;e<s;++e)a=h[d++],i=h[d++],r=h[d++],o=255-S(a*(1-(a=h[d++])/255)+a),l=255-S(i*(1-a/255)+a),u=255-S(r*(1-a/255)+a),f[p++]=o,f[p++]=l,f[p++]=u,f[p++]=255;break;default:throw"Unsupported color mode"}}};var _n=function(n,e){var t=n[e.pos++];return n[e.pos++]|t<<8},h=function(n,e){var t=n[e.pos++],r=n[e.pos++],a=n[e.pos++];return n[e.pos++]|a<<8|r<<16|t<<24};function Nn(){}Nn[n]={constructor:Nn,data:null,pos:null,palette:null,imgData:null,transparency:null,animation:null,text:null,width:0,height:0,bits:null,colorType:null,compressionMethod:null,filterMethod:null,interlaceMethod:null,hasAlphaChannel:null,colors:null,colorSpace:null,pixelBitlength:null,readData:function(n){var e,t,r,a,i,o,l,u,s,c,f=this;for(f.data=n,f.pos=8,f.palette=[],f.imgData=[],f.transparency={},f.animation=null,f.text={},r=null;;){switch(e=h(f.data,f),i=function(){var n,e=[];for(n=0;n<4;++n)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(f).join("")){case"IHDR":f.width=h(f.data,f),f.height=h(f.data,f),f.bits=f.data[f.pos++],f.colorType=f.data[f.pos++],f.compressionMethod=f.data[f.pos++],f.filterMethod=f.data[f.pos++],f.interlaceMethod=f.data[f.pos++];break;case"acTL":f.animation={numFrames:h(f.data,f),numPlays:h(f.data,f)||an,frames:[]};break;case"PLTE":f.palette=On(e,f.data,f);break;case"fcTL":r&&f.animation.frames.push(r),f.pos+=4,r={width:h(f.data,f),height:h(f.data,f),xOffset:h(f.data,f),yOffset:h(f.data,f)},l=_n(f.data,f),a=_n(f.data,f)||100,r.delay=1e3*l/a,r.disposeOp=f.data[f.pos++],r.blendOp=f.data[f.pos++],r.data=[];break;case"IDAT":case"fdAT":for("fdAT"===i&&(f.pos+=4,e-=4),n=(null!=r?r.data:void 0)||f.imgData,u=0;0<=e?u<e:e<u;0<=e?++u:--u)n.push(f.data[f.pos++]);break;case"tRNS":switch(f.transparency={},f.colorType){case 3:if(f.transparency.indexed=On(e,f.data,f),0<(o=255-f.transparency.indexed.length))for(s=0;0<=o?s<o:o<s;0<=o?++s:--s)f.transparency.indexed.push(255);break;case 0:f.transparency.grayscale=On(e,f.data,f)[0];break;case 2:f.transparency.rgb=On(e,f.data,f)}break;case"tEXt":a=(l=On(e,f.data,f)).indexOf(0),c=String.fromCharCode.apply(String,l.slice(0,a)),f.text[c]=String.fromCharCode.apply(String,l.slice(a+1));break;case"IEND":return r&&f.animation.frames.push(r),f.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(f),f.hasAlphaChannel=4===(c=f.colorType)||6===c,t=f.colors+(f.hasAlphaChannel?1:0),f.pixelBitlength=f.bits*t,f.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(f),void(f.imgData=new Uint8Array(f.imgData));default:f.pos+=e}if(f.pos+=4,f.pos>f.data.length)throw new Error("Incomplete or corrupt PNG file")}},decodePixels:async function(n){var e,t,r,a,i,o,l,u,s,c,f,h,d,p,m,g,y,v,b,w,x,k,C,T;if(0===(n=null==n?this.imgData:n).length)return new Uint8Array(0);for(k=n,T={chunkSize:null==C?16384:C},n=await new Promise(function(t){require("zlib").inflate(k instanceof Buffer?k:Buffer.from(k),T,function(n,e){t(n?null:e)})}),p=(c=this.pixelBitlength/8)*this.width,f=new Uint8Array(p*this.height),o=n.length,t=h=d=0;h<o;){switch(n[h++]){case 0:for(a=y=0;y<p;a=y+=1)f[t++]=n[h++];break;case 1:for(a=v=0;v<p;a=v+=1)e=n[h++],i=a<c?0:f[t-c],f[t++]=(e+i)%256;break;case 2:for(a=b=0;b<p;a=b+=1)e=n[h++],r=(a-a%c)/c,m=d&&f[(d-1)*p+r*c+a%c],f[t++]=(m+e)%256;break;case 3:for(a=w=0;w<p;a=w+=1)e=n[h++],r=(a-a%c)/c,i=a<c?0:f[t-c],m=d&&f[(d-1)*p+r*c+a%c],f[t++]=(e+Math.floor((i+m)/2))%256;break;case 4:for(a=x=0;x<p;a=x+=1)e=n[h++],r=(a-a%c)/c,i=a<c?0:f[t-c],0===d?m=g=0:(m=f[(d-1)*p+r*c+a%c],g=r&&f[(d-1)*p+(r-1)*c+a%c]),s=i+m-g,l=Math.abs(s-i),u=Math.abs(s-m),s=Math.abs(s-g),f[t++]=(e+(l<=u&&l<=s?i:u<=s?m:g))%256;break;default:throw new Error("Invalid filter algorithm: "+n[h-1])}d++}return f},decodePalette:function(){for(var n,e,t=this.palette,r=this.transparency.indexed||[],a=new Uint8Array((r.length||0)+t.length),i=0,o=(t.length,0),l=n=0,u=t.length;n<u;l=n+=3)a[i++]=t[l],a[i++]=t[l+1],a[i++]=t[l+2],a[i++]=null!=(e=r[o++])?e:255;return a},copyToImageData:function(n,e){var t,r,a,i,o,l,u,s,c=this,f=c.colors,h=null,d=c.hasAlphaChannel;if(c.palette.length&&(h=null!=(s=c._decodedPalette)?s:c._decodedPalette=c.decodePalette(),f=4,d=!0),l=(t=n.data||n).length,a=h||e,r=i=0,1===f)for(;r<l;)o=h?4*e[r/4]:i,u=a[o++],t[r++]=u,t[r++]=u,t[r++]=u,t[r++]=d?a[o++]:255,i=o;else for(;r<l;)o=h?4*e[r/4]:i,t[r++]=a[o++],t[r++]=a[o++],t[r++]=a[o++],t[r++]=d?a[o++]:255,i=o},decode:async function(){var n=new Uint8Array(this.width*this.height<<2);return this.copyToImageData(n,await this.decodePixels()),n}};var Xn=[137,80,78,71,13,10,26,10],Mn=2,Yn=6,Jn={0:1,2:3,3:1,4:2,6:4};function w(n){return rn.max(0,rn.min(255,rn.round(n)))}function jn(n,e,t){var r=n+e-t,a=rn.abs(r-n),i=rn.abs(r-e),r=rn.abs(r-t);return a<=i&&a<=r?n:i<=r?e:t}function Hn(n,e,t,r,a){n.copy(r,a,e,e+t)}function Vn(n,e,t){for(var r=0,a=e+t,i=e;i<a;i++)r+=rn.abs(n[i]);return r}function Wn(n,e,t,r,a,i){for(var o=0;o<t;o++){var l=i<=o?n[e+o-i]:0,l=n[e+o]-l;r[a+o]=255&l}}function Qn(n,e,t,r){for(var a=0,i=0;i<t;i++){var o=r<=i?n[e+i-r]:0,o=n[e+i]-o;a+=rn.abs(o)}return a}function $n(n,e,t,r,a){for(var i=0;i<t;i++){var o=0<e?n[e+i-t]:0,o=n[e+i]-o;r[a+i]=255&o}}function Zn(n,e,t){for(var r=0,a=e+t,i=e;i<a;i++){var o=0<e?n[i-t]:0,o=n[i]-o;r+=rn.abs(o)}return r}function Kn(n,e,t,r,a,i){for(var o=0;o<t;o++){var l=i<=o?n[e+o-i]:0,u=0<e?n[e+o-t]:0,l=n[e+o]-(l+u>>1);r[a+o]=255&l}}function ne(n,e,t,r){for(var a=0,i=0;i<t;i++){var o=r<=i?n[e+i-r]:0,l=0<e?n[e+i-t]:0,o=n[e+i]-(o+l>>1);a+=rn.abs(o)}return a}function ee(n,e,t,r,a,i){for(var o=0;o<t;o++){var l=i<=o?n[e+o-i]:0,u=0<e?n[e+o-t]:0,s=0<e&&i<=o?n[e+o-(t+i)]:0,l=n[e+o]-jn(l,u,s);r[a+o]=255&l}}function te(n,e,t,r){for(var a=0,i=0;i<t;i++){var o=r<=i?n[e+i-r]:0,l=0<e?n[e+i-t]:0,u=0<e&&r<=i?n[e+i-(t+r)]:0,o=n[e+i]-jn(o,l,u);a+=rn.abs(o)}return a}var re=null;function ae(n){for(var e=function(){var n,e,t;if(null==re)for(re=new Int32Array(256),n=0;n<256;++n){for(t=n,e=0;e<8;++e)t=1&t?3988292384^t>>>1:t>>>1;re[n]=t}return re}(),t=-1,r=0,a=n.length;r<a;++r)t=e[255&(t^n[r])]^t>>>8;return-1^t}function ie(n,e=null,t=0){(e=null==e?Buffer.alloc(1):e)[t=null==t?0:t]=255&n}function oe(n,e=null,t=0){return(e=null==e?Buffer.alloc(4):e).writeUInt32BE(4294967295&n,t=null==t?0:t),e}function le(n){if((n=n||{}).deflateChunkSize=rn.max(1024,parseInt(n.deflateChunkSize||32768)),n.deflateLevel=rn.min(9,rn.max(0,parseInt(null!=n.deflateLevel?n.deflateLevel:9))),n.deflateStrategy=rn.min(3,rn.max(0,parseInt(null!=n.deflateStrategy?n.deflateStrategy:3))),n.inputHasAlpha=!(null!=n.inputHasAlpha&&!n.inputHasAlpha),n.bitDepth=8,n.colorType=rn.min(6,rn.max(0,parseInt("number"==typeof n.colorType?n.colorType:Yn))),n.colorType!==Mn&&n.colorType!==Yn)throw new Error("option color type:"+n.colorType+" is not supported at present");this._options=n}async function ue(n,e,t,r,a){return a=a||{},"base64"!==n?new le(a).toPNG(e,t,r):f?"data:image/png;base64,"+(await new le(a).toPNG(e,t,r)).toString("base64"):i?(a=(n=document.createElement("canvas")).getContext("2d"),n.width=t,n.height=r,a.createImageData(t,r),(t=a.getImageData(0,0,t,r)).data.set(e,0),a.putImageData(t,0,0),n.toDataURL("image/png")):""}function u(){var t=this,e="",r=0,a=0,i=null,o=function(n){if(!n instanceof Error&&(n=new Error(String(n))),!t.onerror)throw n;t.onerror(n)},l=function(n){var e;if(n)return(e=u.Reader[u.detectImageType(n)])?void e(n).then(function(n){r=(i=n).width,a=n.height,t.onload&&t.onload()}).catch(o):o("Image file type is not supported!")};P(t,"width",{get:function(){return r},set:function(n){}}),P(t,"height",{get:function(){return a},set:function(n){}}),P(t,"naturalWidth",{get:function(){return r},set:function(n){}}),P(t,"naturalHeight",{get:function(){return a},set:function(n){}}),P(t,"src",{get:function(){return e},set:function(n){"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer||"undefined"!=typeof Buffer&&n instanceof Buffer?l(e=n):"undefined"!=typeof Blob&&n instanceof Blob||"undefined"!=typeof Buffer&&Buffer.Blob&&n instanceof Buffer.Blob?(e=n).arrayBuffer().then(l).catch(o):("string"==typeof n||n instanceof String)&&(/^data:image\/[a-z]+;base64,/.test(n)?l(function(n){if("undefined"!=typeof Buffer)return Buffer.from(n,"base64");if("function"==typeof atob){for(var e=atob(n),t=e.length,r=new Uint8Array(t),a=0;a<t;++a)r[a]=e.charCodeAt(a);return r.buffer}}((e=n).slice(n.indexOf(";base64,")+8))):f&&require("fs").readFile(e=n,function(n,e){n?o(n):l(e)}))}}),t.getImageData=function(){return i}}function V(e,t){var r,a,i,n=this;if(!(n instanceof V))return new V(e,t);i=function(){e=e||0,t=t||0,a&&a.dispose(),r={width:e,height:t,data:new E(e*t<<2)},a=new F(e,t,F.setRGBATo(r))},P(n,"width",{get:function(){return e},set:function(n){!A(n=+n)&&D(n)&&0<=n&&e!==n&&(e=n,i())}}),P(n,"height",{get:function(){return t},set:function(n){!A(n=+n)&&D(n)&&0<=n&&t!==n&&(t=n,i())}}),n.getContext=function(n){return a.getContext(n)},n.toDataURL=async function(n,e){return ue("base64",r.data,r.width,r.height)},n.toBlob=function(e){var t;"function"==typeof e&&(t="undefined"!=typeof Blob?Blob:"undefined"!=typeof Buffer&&Buffer.Blob?Buffer.Blob:null)&&ue("binary",r.data,r.width,r.height).then(function(n){e(new t([n],{type:"image/png"}))}).catch(o)},n.toPNG=async function(){return ue("binary",r.data,r.width,r.height)},i()}return le[n]={_options:null,constructor:le,toPNG:async function(n,e,t){var r,a,i=[];if(i.push(Buffer.from(Xn)),i.push(this.packIHDR(e,t)),this._options.gamma&&i.push(this.packGAMA(this._options.gamma)),n=this.filterData(Buffer.from(n),e,t),e=this.getDeflateOptions(),r=n,t=e.level,n=e.chuckSize,a={chunkSize:null==n?16384:n},null!=t&&(a.level=t),(e=await new Promise(function(t){require("zlib").deflate(r instanceof Buffer?r:Buffer.from(r),a,function(n,e){t(n?null:e)})}))&&e.length)return i.push(this.packIDAT(Buffer.from(e))),e=null,i.push(this.packIEND()),Buffer.concat(i);throw new Error("bad png - invalid compressed data response")},getDeflateOptions:function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},filterData:function(n,e,t){return this._filter(this._bitPack(n,e,t),e,t)},packIHDR:function(n,e){var t=Buffer.alloc(13);return oe(n,t,0),oe(e,t,4),ie(this._options.bitDepth,t,8),ie(this._options.colorType,t,9),ie(0,t,10),ie(0,t,11),ie(0,t,12),this._packChunk(1229472850,t)},packGAMA:function(n){return this._packChunk(1732332865,oe(rn.floor(1e5*parseFloat(n))))},packIDAT:function(n){return this._packChunk(1229209940,n)},packIEND:function(){return this._packChunk(1229278788,null)},_bitPack:function(n,e,t){var r=this._options.inputHasAlpha,a=this._options.colorType===Yn;if(r&&a)return n;if(!r&&!a)return n;for(var i,o,l,u,s,c=a?4:3,f=Buffer.alloc(e*t*c),h=r?4:3,d=0,p=0,m=this._options.bgColor||{},g=w(null!=m.red?m.red:255),y=w(null!=m.green?m.green:255),v=w(null!=m.blue?m.blue:255),b=0;b<t;b++)for(i=0;i<e;i++)o=n[d],l=n[d+1],u=n[d+2],r?(s=n[d+3],a||(o=(1-(s/=255))*g+s*o,l=(1-s)*y+s*l,u=(1-s)*v+s*u)):s=255,f[p]=w(o),f[p+1]=w(l),f[p+2]=w(u),a&&(f[p+3]=w(s)),d+=h,p+=c;return f},_filter:function(n,e,t){for(var r,a,i,o=[Hn,Wn,$n,Kn,ee],l=[Vn,Qn,Zn,ne,te],u=[0],s=Jn[this._options.colorType],c=e*s,f=0,h=0,d=Buffer.alloc((1+c)*t),p=u[0],m=u.length,g=0;g<t;g++){if(1<m)for(a=1/0,r=0;r<m;r++)(i=l[u[r]](n,h,c,s))<a&&(p=u[r],a=i);o[d[f]=p](n,h,c,d,++f,s),f+=c,h+=c}return d},_packChunk:function(n,e){var t=e?e.length:0,r=Buffer.alloc(t+12);return oe(t,r,0),oe(n,r,4),e&&e.copy(r,8),[t,n=null,e]=[ae(r.slice(4,r.length-4)),r,r.length-4],(n=null==n?Buffer.alloc(4):n).writeInt32BE(t,e=null==e?0:e),r}},u[n]={constructor:u,width:0,height:0,naturalWidth:0,naturalHeight:0,src:"",onload:null,onerror:null,getImageData:null},u.Reader={NOT_SUPPORTED:null,GIF:async function(n,e){var a,i=null,o={width:0,height:0,data:null};return Fn(new zn(new Uint8Array(n)),{hdr:function(n){a=n},gce:function(n){i=n.transparencyGiven?n.transparencyIndex:null},img:function(n){var t=n.lctFlag?n.lct:a.gct,r=new E(n.width*n.height<<2);n.pixels.forEach(function(n,e){e<<=2;n!==i&&(r[e]=t[n][0],r[1+e]=t[n][1],r[2+e]=t[n][2],r[3+e]=255)}),o.width=n.width,o.height=n.height,o.data=r}}),o},JPG:async function(n,e){var t=new Gn;return t.parse(new Uint8Array(n)),n={width:t.width,height:t.height,data:new Uint8Array(t.width*t.height<<2)},t.copyToImageData(n),n},PNG:async function(n,e){var t=new Nn;return t.readData(new Uint8Array(n)),{width:t.width,height:t.height,data:await t.decode()}}},u.detectImageType=function(n){function e(n){return n<t.length?t[n]:0}var t=new Uint8Array(n[n.subarray?"subarray":"slice"](0,8));return 137===e(0)&&80===e(1)&&78===e(2)&&71===e(3)&&13===e(4)&&10===e(5)&&26===e(6)&&10===e(7)?"PNG":71!==e(0)||73!==e(1)||70!==e(2)||56!==e(3)||55!==e(4)&&57!==e(4)||97!==e(5)?255===e(0)&&216===e(1)?"JPG":"NOT_SUPPORTED":"GIF"},V[n]={constructor:V,width:0,height:0,getContext:null,toDataURL:null,toBlob:null,toPNG:null},V.VERSION="1.0.0",V.Image=u,V.RenderingContext2D=F.RenderingContext2D,V});